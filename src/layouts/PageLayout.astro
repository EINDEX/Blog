---
import Breadcrumb from "@components/Breadcrumb.astro";
import Layout from "./Layout.astro";
const { title, cover, series, seo = {}, breadcrumb = [], Content } = Astro.props;

import A from "@components/webmentions/A.astro";
import { Image } from "astro:assets";

const url = Astro.url;
---

<Layout seo={seo} title={title}>
  <br />
  <Breadcrumb breadcrumb={breadcrumb} />
  <article class="h-entry">
    {cover ? <img class="u-photo" alt={title} src={cover} /> : <></>}
    <!-- {series || <span class="series p-category">{t(series)}</span>} -->
    <h1 class="title p-name"><a class="u-url" href={url}>{title}</a></h1>
    <slot name="before-content" />
    <section
      class="main e-content"
    >
      <a class="u-bridgy-fed" href="https://fed.brid.gy/"></a>
      <Content class="raw" components={{ a: A, link: A, img: Image }} />
    </section>
  </article>
  <slot name="footer" />
</Layout>

<style lang="scss">
  article {
    @apply flex flex-col w-full gap-4;

    img {
      @apply rounded-lg sm:mt-0 mt-10 self-center;
      min-width: calc(min( 100vw, 768px));
    //   max-width: 768px;
    }

    h1 {
      @apply text-3xl font-bold text-center sm:text-2xl;
    }

    section.main {
      @apply max-w-full;
      color: var(--text-color);
      background-color: var(--bg-color);

        p:has(img) {
          @apply flex flex-col items-center;
        }
        img {
            @apply self-center rounded;
            min-width: calc(min( 100vw, 768px));
        }
      
      }
  }
</style>

<style lang="scss" is:global>
  section.main.e-content {
    @apply prose dark:prose-invert;
    iframe {
      @apply w-full;
    }
  }
</style>
