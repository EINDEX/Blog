---
import i18next, { changeLanguage } from "i18next";
import Img from "@components/Img.astro";
import EmptyWapper from "@layouts/EmptyWapper.astro";
import Navbar from "@components/Navbar.astro";
import SEO from "@components/SEO.astro";

changeLanguage("en");

const locale = i18next.language;
const resp = await fetch("https://img.eindex.me/pic/pic_list.json");
const images = await resp.json();
const links = [
  {
    name: "Home",
    url: "/",
  },
  {
    name: "\u4E2D\u6587\u535A\u5BA2",
    url: "/cn/posts",
  },
  {
    name: "Posts",
    url: "/posts",
  },
];
---

<EmptyWapper
  title="Gallery"
  locale={locale}
  seo={{
    title: "Gallery",
    description: "Gallery",
    keywords: "Gallery",
    url: "https://eindex.me/gallery",
    image: "https://img.eindex.me/pic/2021/08/30/20210830100000.jpg",
  }}
>
  <Navbar links={links} />
  <main>
    <h1>Gallery</h1>
    <div class="gallery">
      {
        images.map((image) => (
          <img
            loading="lazy"
            height={`${image.width / (image.height / 300)}px`}
            width="300px"
            src={`https://img.eindex.me/pic/${image.thumbnail}`}
          />
        ))
      }
    </div>
  </main>
</EmptyWapper>

<style lang="scss">
  main {
    @apply flex flex-col gap-8 py-8 px-4;

    h1 {
      @apply text-6xl self-center font-bold py-8;
    }
  }
  .gallery {
    @apply lg:columns-5 columns-4 md:columns-3 sm:columns-2 self-center;

    img {
      @apply rounded-lg shadow-lg mb-4;
    }
  }
</style>
