---
import Giscus from "@giscus/react";
import WMComments from "./webmentions/WMComments.astro";
import i18next from "i18next";

const locale = i18next.language;

const { slug } = Astro.props;
---

<hr />
<div class="comments">
  <h2>Comments</h2>
  <WMComments slug={slug} />
  <Giscus
    client:load
    id="comments"
    repo="eindex/blog"
    repoId="R_kgDOGWb6Yg"
    category="General"
    categoryId="DIC_kwDOGWb6Ys4CAKn-"
    mapping="specific"
    term={slug}
    reactionsEnabled="1"
    emitMetadata="1"
    inputPosition="top"
    theme="preferred_color_scheme"
    lang={locale == "cn" ? "zh-CN" : locale}
    loading="lazy"
  />
</div>

<style lang="scss">
  .comments {
    @apply flex flex-col;
  }
  h2 {
    @apply text-2xl font-bold;
  }
</style>
