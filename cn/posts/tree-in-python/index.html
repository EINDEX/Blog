


  
  


<!DOCTYPE html>
<html lang="en" charset="utf-8">
  <head>
    

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SR36ZS0R52"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  
  var page_link = new URL(window.location.href);
  gtag('js', new Date());
  gtag('config', 'G-SR36ZS0R52', {
    traffic_type: page_link.searchParams.get("traffic_type")
  });
  gtag('set', {
    traffic_type: page_link.searchParams.get("traffic_type")
  })
  

</script>









  
    
    <link rel="alternate" type="application/rss+xml" title="RSS" href="https://eindex.me/cn/feed.xml">
    
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <meta name="author" itemprop="author" content="EINDEX">
  
  <title>Tree in Python &bull; EINDEX&#x27;s Blog</title>
  <meta property="og:title" content="Tree in Python &bull; EINDEX&#x27;s Blog" />
  

  <!-- Required meta tags -->
  <meta charset="utf-8" />


  <!-- **** BEGINNING, favicons **** -->

  <!-- generics -->

  <!-- iOS -->

  <!-- Android -->

  <!-- Windows 8, IE 10 -->

  <!-- Windows 8.1 and up, IE 11 -->

  <!-- **** CONCLUSION, favicons **** -->

  <!-- CSS/SCSS -->
  <link rel="stylesheet" href="https://eindex.me/css/index.css?h=ff5e76b2b0aa3b98d43d63a71cff2769965e6d0f4c5dafd8914c19f3a7f51d12" />  <style>@-moz-document url-prefix() {.lazy:-moz-loading {visibility:hidden;}}.ieOnly {display: none;}@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {.ieOnly {display: block;}}</style>


  <link rel="webmention" href="https://webmention.io/eindex.me/webmention" />
  <link rel="pingback" href="https://webmention.io/eindex.me/xmlrpc" />

  <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.1/dist/iconify-icon.min.js"></script>
  
  
  <link rel="apple-touch-icon" sizes="512x512" href="/favicon-512.png">
  
  <link rel="icon" type="image/png" sizes="512x512" href="/favicon-512.png">
  
  
  <link rel="icon" type="image/png" sizes="192x192" href="/favicon-192.png">
  
  <link rel="manifest" href="/manifest.json">
  <meta name="twitter:dnt" content="on">
  <meta name="twitter:widgets:csp" content="on">
  



  
    
  

  
    
  





<meta property="og:url" content="https://eindex.me/cn/posts/tree-in-python/">
<meta property="og:site_name" content="EINDEX&#x27;s Blog">
<meta property="og:image" content="https://eindex.me/images/avatar.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Tree in Python">

<meta name="twitter:site" content="@eindex_li">
<meta name="twitter:creator" content="@eindex_li">
<meta name="twitter:image" content="https://eindex.me/images/avatar.png">
<link
  rel="me"
  href="https://twitter.com/eindex_li">
<script type="application/ld+json">
{
  "@context": "https://schema.org/",
  "@type": "BlogPosting",
  "headline": "Tree in Python",
  "image": "https://eindex.me/images/avatar.png",
  
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://eindex.me/cn/posts/tree-in-python/"
  },
  
  "datePublished": "2018-04-08",
  
  
  "author": {
    "@type": "Person",
    "name": "EINDEX",
    "url": "https://eindex.me/about"
  },
  "publisher": {
    "@type": "Organization",
    "name": "EINDEX's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://eindex.me/images/avatar.png"
    }
  },
  "keywords": ["Python","algorithm"]
}
</script>

  
  <link
rel="stylesheet"
href="https://cdn.jsdelivr.net/npm/docs-searchbar.js@2.4.1/dist/cdn/docs-searchbar.min.css"
/>
  
  
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1265138627025369"
     crossorigin="anonymous"></script>





    
  </head>
  <body>
    <div class="all">
      <header>
  <nav class="navbar">
    <div class="avatar">
      
      <a class="site-link" href="https://eindex.me/cn/"><img
        class="avatar"
        src="https:&#x2F;&#x2F;eindex.me&#x2F;processed_images&#x2F;e75389feba7c019600.png"
        alt="Workflow"
    /></a>
  </div>
  <div class="menus">
    
    
      <a
        href="https://eindex.me/cn/gallery/"
        >相册</a
      >
    
    
    
      <a
        href="https://eindex.me/cn/archive/"
        >归档</a
      >
    
    
  </div>
    
    <div class="switcher">
      <a class="language switch"href = "https://eindex.me/"><iconify-icon icon="ri:english-input"></iconify-icon></a>
    </div>
  </nav>
</header>


      <div class="content">
          <main>
              
  <article class="h-entry" data-clarity-region="article">
    
<section class="header">
  <section class="title-area">
    
      
      
      
      <a class="series p-category" href="https:&#x2F;&#x2F;eindex.me&#x2F;cn&#x2F;series&#x2F;algorithm&#x2F;">Algorithm</a>
    
    <h1 class="title p-name">
    <a class="u-url" href="https:&#x2F;&#x2F;eindex.me&#x2F;cn&#x2F;posts&#x2F;tree-in-python&#x2F;">Tree in Python</a>
    </h1>
  </section>
  <section class="meta-area">
    <p class="p-summary" style="display: none;">&lt;p&gt;树是计算机科学中常用的数据结构之一,常见的地方有，Java 的继承树等。
还有一些基于树的特殊数据结构，比如二叉树，B 树，等等。&lt;&#x2F;p&gt;
&lt;p&gt;本篇会讲述一些关于简单关于树的操作。&lt;&#x2F;p&gt;
</p>
  
    <span><iconify-icon icon="ant-design:calendar-outlined"></iconify-icon>&nbsp;<time class="dt-published">2018-04-08</time>&nbsp;</span>
  
    <span><iconify-icon icon="bx:time-five"></iconify-icon>&nbsp;7 mins</span>  
    <span style="display:none"><iconify-icon icon="mdi:eye-outline"></iconify-icon>&nbsp;<span id="pv"></span>&nbsp;views</span>
  </section>
</section>

    <div class="p-author h-card" style="display: none;">
    <img class="u-logo u-photo" src="https://eindex.me/images/avatar.png">
    <a class="p-nickname p-name u-url" href="https://eindex.me">EINDEX</a>
    <p class="p-note">My goal is make happy.</p>
</div>
    
    <section class="main e-content">
        
  <p>树是计算机科学中常用的数据结构之一,常见的地方有，Java 的继承树等。
还有一些基于树的特殊数据结构，比如二叉树，B 树，等等。</p>
<p>本篇会讲述一些关于简单关于树的操作。</p>
<span id="continue-reading"></span><h2 id="shu-de-ding-yi">树的定义</h2>
<blockquote>
<p>树（英语：tree）是一种抽象数据类型（ADT）或是实作这种抽象数据类型的数据结构，用来模拟具有树状结构性质的数据集合。它是由n（n&gt;0）个有限节点组成一个具有层次关系的集合。把它叫做“树”是因为它看起来像一棵倒挂的树，也就是说它是根朝上，而叶朝下的。它具有以下的特点：</p>
</blockquote>
<blockquote>
<ul>
<li>每个节点有零个或多个子节点</li>
<li>没有父节点的节点称为根节点</li>
<li>每一个非根节点有且只有一个父节点</li>
<li>除了根节点外，每个子节点可以分为多个不相交的子树</li>
</ul>
</blockquote>
<p>节选自 <a rel="webmention" rel="nofollow" href="https://zh.wikipedia.org/wiki/%E6%A0%91_(%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84)">树(数据结构)</a></p>
<h2 id="ding-yi-shu-ju-jie-gou">定义数据结构</h2>
<pre data-lang="python" style="background-color:#272822;color:#f8f8f2;" class="language-python "><code class="language-python" data-lang="python"><span style="font-style:italic;color:#f92672;">class </span><span style="text-decoration:underline;color:#a6e22e;">TreeNode</span><span>(</span><span style="text-decoration:underline;font-style:italic;color:#a6e22e;">object</span><span>):
</span><span>    </span><span style="color:#75715e;">&quot;&quot;&quot;
</span><span style="color:#75715e;">    一个树节点
</span><span style="color:#75715e;">    &quot;&quot;&quot;
</span><span>
</span><span>    </span><span style="font-style:italic;color:#f92672;">def </span><span style="color:#66d9ef;">__init__</span><span>(</span><span style="font-style:italic;color:#fd971f;">self</span><span>, </span><span style="font-style:italic;color:#fd971f;">value</span><span>, </span><span style="font-style:italic;color:#fd971f;">children</span><span>: </span><span style="font-style:italic;color:#66d9ef;">list </span><span style="color:#f92672;">= </span><span style="color:#ae81ff;">None</span><span>):
</span><span>        </span><span style="color:#75715e;">&quot;&quot;&quot;
</span><span style="color:#75715e;">
</span><span style="color:#75715e;">        :param value: 节点的值
</span><span style="color:#75715e;">        :param children: 节点的子节点，一个 TreeNode 的列表
</span><span style="color:#75715e;">        &quot;&quot;&quot;
</span><span>
</span><span>        self.value </span><span style="color:#f92672;">= </span><span>value
</span><span>
</span><span>        </span><span style="color:#f92672;">if not </span><span>children:
</span><span>            self.children </span><span style="color:#f92672;">= </span><span>[]
</span><span>        </span><span style="color:#f92672;">elif not </span><span>self.value:
</span><span>            self.children </span><span style="color:#f92672;">= </span><span>[]
</span><span>        </span><span style="color:#f92672;">else</span><span>:
</span><span>            self.children </span><span style="color:#f92672;">= </span><span>children
</span><span>
</span><span style="font-style:italic;color:#f92672;">class </span><span style="text-decoration:underline;color:#a6e22e;">Tree</span><span>(</span><span style="text-decoration:underline;font-style:italic;color:#a6e22e;">object</span><span>):
</span><span>    </span><span style="color:#75715e;">&quot;&quot;&quot;
</span><span style="color:#75715e;">    树：基本树的数据结构
</span><span style="color:#75715e;">    &quot;&quot;&quot;
</span><span>
</span><span>    </span><span style="font-style:italic;color:#f92672;">def </span><span style="color:#66d9ef;">__init__</span><span>(</span><span style="font-style:italic;color:#fd971f;">self</span><span>, </span><span style="font-style:italic;color:#fd971f;">root</span><span>: TreeNode </span><span style="color:#f92672;">or </span><span style="color:#ae81ff;">None</span><span>):
</span><span>        </span><span style="color:#75715e;">&quot;&quot;&quot;
</span><span style="color:#75715e;">        传入根节点
</span><span style="color:#75715e;">        :param root: 如果为 TreeNode 为根节点， 如果为 None 为空书
</span><span style="color:#75715e;">        &quot;&quot;&quot;
</span><span>        </span><span style="color:#f92672;">if not </span><span>(root </span><span style="color:#f92672;">is </span><span style="color:#ae81ff;">None </span><span style="color:#f92672;">or </span><span style="color:#66d9ef;">isinstance</span><span>(root, TreeNode)):
</span><span>            </span><span style="color:#f92672;">raise </span><span style="font-style:italic;color:#66d9ef;">AttributeError</span><span>(</span><span style="color:#e6db74;">&#39;illegal root&#39;</span><span>)
</span><span>        self.root </span><span style="color:#f92672;">= </span><span>root
</span></code></pre>
<h2 id="qian-xu-bian-li">前序遍历</h2>
<p>先遍历根节点。在遍历孩子节点。
<img src="https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E5%89%8D%E5%BA%8F%E9%81%8D%E5%8E%86.jpg" alt="前序遍历" /></p>
<h3 id="xun-huan-ban">循环版</h3>
<pre data-lang="python" style="background-color:#272822;color:#f8f8f2;" class="language-python "><code class="language-python" data-lang="python"><span>    </span><span style="font-style:italic;color:#f92672;">def </span><span style="color:#a6e22e;">preorder_traversal_while</span><span>(</span><span style="font-style:italic;color:#fd971f;">self</span><span>):
</span><span>        </span><span style="color:#75715e;">&quot;&quot;&quot;
</span><span style="color:#75715e;">        树的前序遍历
</span><span style="color:#75715e;">        :return: list of tree node value
</span><span style="color:#75715e;">        &quot;&quot;&quot;
</span><span>        res </span><span style="color:#f92672;">= </span><span>[]
</span><span>        </span><span style="color:#f92672;">if not </span><span>self.root:
</span><span>            </span><span style="color:#f92672;">return </span><span>res
</span><span>        stack </span><span style="color:#f92672;">= </span><span>[self.root]
</span><span>
</span><span>        </span><span style="color:#f92672;">while </span><span style="color:#66d9ef;">len</span><span>(stack):
</span><span>            node </span><span style="color:#f92672;">= </span><span>stack.pop()
</span><span>            </span><span style="color:#f92672;">if not </span><span>node.value:
</span><span>                </span><span style="color:#f92672;">continue
</span><span>            </span><span style="color:#f92672;">for </span><span>sub_node </span><span style="color:#f92672;">in </span><span>node.children[::</span><span style="color:#f92672;">-</span><span style="color:#ae81ff;">1</span><span>]:
</span><span>                stack.append(sub_node)
</span><span>            res.append(node.value)
</span><span>
</span><span>        </span><span style="color:#f92672;">return </span><span>res
</span></code></pre>
<h3 id="di-gui-ban">递归版</h3>
<pre data-lang="python" style="background-color:#272822;color:#f8f8f2;" class="language-python "><code class="language-python" data-lang="python"><span style="font-style:italic;color:#f92672;">def </span><span style="color:#a6e22e;">preorder_traversal_recursion</span><span>(</span><span style="font-style:italic;color:#fd971f;">self</span><span>):
</span><span>        </span><span style="color:#75715e;">&quot;&quot;&quot;
</span><span style="color:#75715e;">        树的前序遍历
</span><span style="color:#75715e;">        :return: list of tree node value
</span><span style="color:#75715e;">        &quot;&quot;&quot;
</span><span>        res </span><span style="color:#f92672;">= </span><span>[]
</span><span>        </span><span style="color:#f92672;">if not </span><span>self.root:
</span><span>            </span><span style="color:#f92672;">return </span><span>res
</span><span>
</span><span>        </span><span style="font-style:italic;color:#f92672;">def </span><span style="color:#a6e22e;">_inner</span><span>(</span><span style="font-style:italic;color:#fd971f;">root</span><span>):
</span><span>            inner_res </span><span style="color:#f92672;">= </span><span>[]
</span><span>            </span><span style="color:#f92672;">if </span><span>root.value:
</span><span>                inner_res.append(root.value)
</span><span>                </span><span style="color:#f92672;">for </span><span>sub_node </span><span style="color:#f92672;">in </span><span>root.children:
</span><span>                    inner_res </span><span style="color:#f92672;">+= </span><span>_inner(sub_node)
</span><span>            </span><span style="color:#f92672;">return </span><span>inner_res
</span><span>        </span><span style="color:#f92672;">return </span><span>_inner(self.root)
</span></code></pre>
<h2 id="hou-xu-bian-li">后序遍历</h2>
<p>先遍历孩子节点，最后遍历根节点。</p>
<p><img src="https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86.jpg" alt="后序遍历" /></p>
<h3 id="xun-huan-ban-1">循环版</h3>
<pre data-lang="python" style="background-color:#272822;color:#f8f8f2;" class="language-python "><code class="language-python" data-lang="python"><span style="font-style:italic;color:#f92672;">def </span><span style="color:#a6e22e;">postorder_traversal_while</span><span>(</span><span style="font-style:italic;color:#fd971f;">self</span><span>):
</span><span>        </span><span style="color:#75715e;">&quot;&quot;&quot;
</span><span style="color:#75715e;">        树的后序遍历
</span><span style="color:#75715e;">        :return: list of tree node value
</span><span style="color:#75715e;">        &quot;&quot;&quot;
</span><span>        res </span><span style="color:#f92672;">= </span><span>[]
</span><span>
</span><span>        </span><span style="color:#f92672;">if not </span><span>self.root:
</span><span>            </span><span style="color:#f92672;">return </span><span>res
</span><span>
</span><span>        stack </span><span style="color:#f92672;">= </span><span>[self.root]
</span><span>
</span><span>        </span><span style="color:#f92672;">while </span><span style="color:#66d9ef;">len</span><span>(stack):
</span><span>            node </span><span style="color:#f92672;">= </span><span>stack.pop()
</span><span>            </span><span style="color:#f92672;">if not </span><span>node.value:
</span><span>                </span><span style="color:#f92672;">continue
</span><span>            </span><span style="color:#f92672;">for </span><span>sub_node </span><span style="color:#f92672;">in </span><span>node.children:
</span><span>                stack.append(sub_node)
</span><span>            res.append(node.value)
</span><span>
</span><span>        </span><span style="color:#f92672;">return </span><span>res[::</span><span style="color:#f92672;">-</span><span style="color:#ae81ff;">1</span><span>]
</span></code></pre>
<h3 id="di-gui-ban-1">递归版</h3>
<pre data-lang="python" style="background-color:#272822;color:#f8f8f2;" class="language-python "><code class="language-python" data-lang="python"><span>   </span><span style="font-style:italic;color:#f92672;">def </span><span style="color:#a6e22e;">postorder_traversal_recursion</span><span>(</span><span style="font-style:italic;color:#fd971f;">self</span><span>):
</span><span>        </span><span style="color:#75715e;">&quot;&quot;&quot;
</span><span style="color:#75715e;">        树的后序遍历
</span><span style="color:#75715e;">        :return: list of tree node value
</span><span style="color:#75715e;">        &quot;&quot;&quot;
</span><span>        res </span><span style="color:#f92672;">= </span><span>[]
</span><span>        </span><span style="color:#f92672;">if not </span><span>self.root:
</span><span>            </span><span style="color:#f92672;">return </span><span>res
</span><span>
</span><span>        </span><span style="font-style:italic;color:#f92672;">def </span><span style="color:#a6e22e;">_inner</span><span>(</span><span style="font-style:italic;color:#fd971f;">root</span><span>):
</span><span>            inner_res </span><span style="color:#f92672;">= </span><span>[]
</span><span>            </span><span style="color:#f92672;">if </span><span>root.value:
</span><span>                </span><span style="color:#f92672;">for </span><span>sub_node </span><span style="color:#f92672;">in </span><span>root.children:
</span><span>                    inner_res </span><span style="color:#f92672;">+= </span><span>_inner(sub_node)
</span><span>                inner_res.append(root.value)
</span><span>            </span><span style="color:#f92672;">return </span><span>inner_res
</span><span>
</span><span>        </span><span style="color:#f92672;">return </span><span>_inner(self.root)
</span><span>
</span></code></pre>
<h2 id="ceng-ci-bian-li">层次遍历</h2>
<p>按层遍历节点。
<img src="https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E5%B1%82%E5%BA%8F%E9%81%8D%E5%8E%86.jpg" alt="层序遍历" /></p>
<h3 id="xun-huan-ban-2">循环版</h3>
<pre data-lang="python" style="background-color:#272822;color:#f8f8f2;" class="language-python "><code class="language-python" data-lang="python"><span style="font-style:italic;color:#f92672;">def </span><span style="color:#a6e22e;">layer_while</span><span>(</span><span style="font-style:italic;color:#fd971f;">self</span><span>):
</span><span>        </span><span style="color:#75715e;">&quot;&quot;&quot;
</span><span style="color:#75715e;">        树的层序遍历
</span><span style="color:#75715e;">        :return: list of tree node value
</span><span style="color:#75715e;">        &quot;&quot;&quot;
</span><span>        res </span><span style="color:#f92672;">= </span><span>[]
</span><span>        </span><span style="color:#f92672;">if not </span><span>self.root:
</span><span>            </span><span style="color:#f92672;">return </span><span>res
</span><span>
</span><span>        queue </span><span style="color:#f92672;">= </span><span>Queue()
</span><span>        queue.put(self.root)
</span><span>
</span><span>        </span><span style="color:#f92672;">while </span><span>queue.qsize():
</span><span>            node </span><span style="color:#f92672;">= </span><span>queue.get()
</span><span>            </span><span style="color:#f92672;">if not </span><span>node.value:
</span><span>                </span><span style="color:#f92672;">continue
</span><span>            res.append(node.value)
</span><span>            </span><span style="color:#f92672;">for </span><span>sub_node </span><span style="color:#f92672;">in </span><span>node.children:
</span><span>                queue.put(sub_node)
</span><span>        </span><span style="color:#f92672;">return </span><span>res
</span></code></pre>
<h2 id="qiu-shu-de-shen-du">求树的深度</h2>
<p>计算树的最大深度。</p>
<pre data-lang="python" style="background-color:#272822;color:#f8f8f2;" class="language-python "><code class="language-python" data-lang="python"><span> </span><span style="font-style:italic;color:#f92672;">def </span><span style="color:#a6e22e;">depth_recursion</span><span>(</span><span style="font-style:italic;color:#fd971f;">self</span><span>):
</span><span>
</span><span>        </span><span style="font-style:italic;color:#f92672;">def </span><span style="color:#a6e22e;">_inner</span><span>(</span><span style="font-style:italic;color:#fd971f;">root</span><span>, </span><span style="font-style:italic;color:#fd971f;">depth</span><span style="color:#f92672;">=</span><span style="color:#ae81ff;">1</span><span>):
</span><span>            </span><span style="color:#f92672;">if not </span><span>root.children:
</span><span>                </span><span style="color:#f92672;">return </span><span>depth
</span><span>            </span><span style="color:#f92672;">return </span><span style="color:#66d9ef;">max</span><span>([_inner(sub_node, depth</span><span style="color:#f92672;">+</span><span style="color:#ae81ff;">1</span><span>) </span><span style="color:#f92672;">for </span><span>sub_node </span><span style="color:#f92672;">in </span><span>root.children])
</span><span>
</span><span>        </span><span style="color:#f92672;">return </span><span>_inner(self.root)
</span></code></pre>
<h2 id="qiu-shu-de-jie-dian-shu">求树的结点数</h2>
<p>计算树一共有多少节点。</p>
<pre data-lang="python" style="background-color:#272822;color:#f8f8f2;" class="language-python "><code class="language-python" data-lang="python"><span> </span><span style="font-style:italic;color:#f92672;">def </span><span style="color:#a6e22e;">node_count</span><span>(</span><span style="font-style:italic;color:#fd971f;">self</span><span>):
</span><span>        </span><span style="font-style:italic;color:#f92672;">def </span><span style="color:#a6e22e;">_inner</span><span>(</span><span style="font-style:italic;color:#fd971f;">root</span><span>):
</span><span>            </span><span style="color:#f92672;">if not </span><span>root.children:
</span><span>                </span><span style="color:#f92672;">return </span><span style="color:#ae81ff;">1
</span><span>            </span><span style="color:#f92672;">return </span><span style="color:#ae81ff;">1 </span><span style="color:#f92672;">+ </span><span style="color:#66d9ef;">sum</span><span>([_inner(sub_node) </span><span style="color:#f92672;">for </span><span>sub_node </span><span style="color:#f92672;">in </span><span>root.children])
</span><span>        </span><span style="color:#f92672;">return </span><span>_inner(self.root)
</span></code></pre>
<h2 id="qiu-shu-de-xie-zi-shu">求树的叶子数</h2>
<p>计算书中有多少没有孩子的节点。</p>
<pre data-lang="python" style="background-color:#272822;color:#f8f8f2;" class="language-python "><code class="language-python" data-lang="python"><span style="font-style:italic;color:#f92672;">def </span><span style="color:#a6e22e;">leaf_count</span><span>(</span><span style="font-style:italic;color:#fd971f;">self</span><span>):
</span><span>        </span><span style="font-style:italic;color:#f92672;">def </span><span style="color:#a6e22e;">_inner</span><span>(</span><span style="font-style:italic;color:#fd971f;">root</span><span>):
</span><span>            </span><span style="color:#f92672;">if not </span><span>root.children:
</span><span>                </span><span style="color:#f92672;">return </span><span style="color:#ae81ff;">1
</span><span>            </span><span style="color:#f92672;">return </span><span style="color:#66d9ef;">sum</span><span>([_inner(sub_node) </span><span style="color:#f92672;">for </span><span>sub_node </span><span style="color:#f92672;">in </span><span>root.children])
</span><span>        </span><span style="color:#f92672;">return </span><span>_inner(self.root)
</span></code></pre>
<h2 id="qiu-liang-ge-jie-dian-de-zui-di-gong-gong-zu-xian-jie-dian">求两个结点的最低公共祖先结点</h2>
<p>首先需要在树中找到两个结点。
保存找到两个节点的链表。
遍历两个链表的最长公共节点，就能找到最低的公共祖先节点。
<img src="https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E6%9C%80%E4%BD%8E%E5%85%AC%E5%85%B1%E7%A5%96%E5%85%88%E8%8A%82%E7%82%B9.jpg" alt="最低公共祖先节点" /></p>
<pre data-lang="python" style="background-color:#272822;color:#f8f8f2;" class="language-python "><code class="language-python" data-lang="python"><span style="font-style:italic;color:#f92672;">def </span><span style="color:#a6e22e;">lowest_ancestor_node</span><span>(</span><span style="font-style:italic;color:#fd971f;">self</span><span>, </span><span style="font-style:italic;color:#fd971f;">node1</span><span>, </span><span style="font-style:italic;color:#fd971f;">node2</span><span>):
</span><span>        stack </span><span style="color:#f92672;">= </span><span>[self.root]
</span><span>        stack1 </span><span style="color:#f92672;">= </span><span style="color:#ae81ff;">None
</span><span>        stack2 </span><span style="color:#f92672;">= </span><span style="color:#ae81ff;">None
</span><span>
</span><span>        </span><span style="color:#f92672;">while </span><span style="color:#66d9ef;">len</span><span>(stack) </span><span style="color:#f92672;">and not </span><span>(stack1 </span><span style="color:#f92672;">and </span><span>stack2):
</span><span>            node </span><span style="color:#f92672;">= </span><span>stack.pop()
</span><span>
</span><span>            </span><span style="color:#f92672;">if </span><span>node </span><span style="color:#f92672;">is </span><span>node1:
</span><span>                stack1 </span><span style="color:#f92672;">= </span><span>stack[:]
</span><span>            </span><span style="color:#f92672;">if </span><span>node </span><span style="color:#f92672;">is </span><span>node2:
</span><span>                stack2 </span><span style="color:#f92672;">= </span><span>stack[:]
</span><span>            </span><span style="color:#f92672;">if not </span><span>node.value:
</span><span>                </span><span style="color:#f92672;">continue
</span><span>            </span><span style="color:#f92672;">for </span><span>sub_node </span><span style="color:#f92672;">in </span><span>node.children:
</span><span>                stack.append(sub_node)
</span><span>
</span><span>        res </span><span style="color:#f92672;">= </span><span>self.root
</span><span>        </span><span style="color:#f92672;">for </span><span>i </span><span style="color:#f92672;">in </span><span style="color:#66d9ef;">range</span><span>(</span><span style="color:#66d9ef;">len</span><span>(stack1)):
</span><span>            </span><span style="color:#f92672;">if </span><span>stack1[i] </span><span style="color:#f92672;">== </span><span>stack2[i]:
</span><span>                res </span><span style="color:#f92672;">= </span><span>stack1[i]
</span><span>            </span><span style="color:#f92672;">else</span><span>:
</span><span>                </span><span style="color:#f92672;">return </span><span>res.value
</span><span>
</span><span>        </span><span style="color:#f92672;">return </span><span>res.value
</span></code></pre>
<h2 id="qiu-ren-yi-liang-jie-dian-ju-chi">求任意两结点距离</h2>
<p>首先需要在树中找到两个结点。
保存找到两个节点的链表。
在判断剩余的长度
<img src="https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E4%BB%BB%E6%84%8F%E4%B8%A4%E8%8A%82%E7%82%B9%E8%B7%9D%E7%A6%BB.jpg" alt="任意两节点距离" /></p>
<pre data-lang="python" style="background-color:#272822;color:#f8f8f2;" class="language-python "><code class="language-python" data-lang="python"><span style="font-style:italic;color:#f92672;">def </span><span style="color:#a6e22e;">two_node_distence</span><span>(</span><span style="font-style:italic;color:#fd971f;">self</span><span>, </span><span style="font-style:italic;color:#fd971f;">node1</span><span>, </span><span style="font-style:italic;color:#fd971f;">node2</span><span>):
</span><span>        stack </span><span style="color:#f92672;">= </span><span>[self.root]
</span><span>        stack1 </span><span style="color:#f92672;">= </span><span style="color:#ae81ff;">None
</span><span>        stack2 </span><span style="color:#f92672;">= </span><span style="color:#ae81ff;">None
</span><span>
</span><span>        </span><span style="color:#f92672;">while </span><span style="color:#66d9ef;">len</span><span>(stack) </span><span style="color:#f92672;">and not </span><span>(stack1 </span><span style="color:#f92672;">and </span><span>stack2):
</span><span>            node </span><span style="color:#f92672;">= </span><span>stack.pop()
</span><span>
</span><span>            </span><span style="color:#f92672;">if </span><span>node </span><span style="color:#f92672;">is </span><span>node1:
</span><span>                stack1 </span><span style="color:#f92672;">= </span><span>stack[:]
</span><span>            </span><span style="color:#f92672;">if </span><span>node </span><span style="color:#f92672;">is </span><span>node2:
</span><span>                stack2 </span><span style="color:#f92672;">= </span><span>stack[:]
</span><span>            </span><span style="color:#f92672;">if not </span><span>node.value:
</span><span>                </span><span style="color:#f92672;">continue
</span><span>            </span><span style="color:#f92672;">for </span><span>sub_node </span><span style="color:#f92672;">in </span><span>node.children:
</span><span>                stack.append(sub_node)
</span><span>
</span><span>        res </span><span style="color:#f92672;">= </span><span>self.root
</span><span>        </span><span style="color:#f92672;">for </span><span>i </span><span style="color:#f92672;">in </span><span style="color:#66d9ef;">range</span><span>(</span><span style="color:#66d9ef;">len</span><span>(stack1)):
</span><span>            </span><span style="color:#f92672;">if </span><span>stack1[i] </span><span style="color:#f92672;">== </span><span>stack2[i]:
</span><span>                res </span><span style="color:#f92672;">= </span><span>stack1[i]
</span><span>            </span><span style="color:#f92672;">else</span><span>:
</span><span>                </span><span style="color:#f92672;">return </span><span style="color:#66d9ef;">len</span><span>(stack1) </span><span style="color:#f92672;">+ </span><span style="color:#66d9ef;">len</span><span>(stack2) </span><span style="color:#f92672;">- </span><span style="color:#ae81ff;">2</span><span style="color:#f92672;">*</span><span>i
</span><span>
</span><span>        </span><span style="color:#f92672;">return </span><span style="color:#66d9ef;">len</span><span>(stack1) </span><span style="color:#f92672;">+ </span><span style="color:#66d9ef;">len</span><span>(stack2) </span><span style="color:#f92672;">- </span><span style="color:#ae81ff;">2</span><span style="color:#f92672;">*</span><span>i
</span><span>
</span></code></pre>
<h2 id="zong-shu">综述</h2>
<p>以上就是和树有关联的简单代码。
以上代码也在 Github 上发布 <a rel="webmention" rel="nofollow" href="https://github.com/EINDEX/Python-algorithm/blob/master/data_structure/tree/tree.py">tree</a>， 如有差错，欢迎提交 Issue 或 PR。</p>
<h2 id="geng-xin">更新</h2>
<ul>
<li>修复图片的 Bug</li>
</ul>


        






    </section>
    <section class="post-footer">
        
<div class="tags">
    
        
        <span class="tag"><a href="https:&#x2F;&#x2F;eindex.me&#x2F;cn&#x2F;tags&#x2F;python&#x2F;">Python</a></span>
    
</div>

    </section>
    


    




<hr/>
<section class="webmentions">
  <h2>Response</h2>
  <p class="how-to-send-webmention">Have you written any responses to this article? If so, please send your article or tweet link below. (Making sure to include the link of this article in the content, learn more about webmentions from <a href="https://indieweb.org/Webmention">here</a>.)</p>
  <form class="webmention-form" action="https://webmention.io/eindex.me/webmention" method="post">
    <input name="target" type="hidden" value="https:&#x2F;&#x2F;eindex.me&#x2F;cn&#x2F;posts&#x2F;tree-in-python&#x2F;" />
    <input name="source" type="text" placeholder="Your webmention link" />
    <button type="submit">Send Webmention</button>
  </form>
  <p class="how-to-send-webmention"><a class="twitter-share-button" href="https://twitter.com/intent/tweet">Tweet</a> and send response
  
  
    </p>
  
</section>
    
</article>

          </main>
          <aside>
              
<section class="search">
<input type="search" id="search-bar-input" placeholder="Searching..." />
</section>
<section>
    <h3 class="section-title">Series</h3>
    
    
    <p><a href="https:&#x2F;&#x2F;eindex.me&#x2F;series&#x2F;blog-enhance-plan&#x2F;">博客演进计划 (1)</a></p>
    
    <p><a href="https:&#x2F;&#x2F;eindex.me&#x2F;series&#x2F;security&#x2F;">应用安全 (1)</a></p>
    
</section>

<section class="tags">
<h3 class="section-title">Tags</h3>

<div class="tags">
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;webmentions&#x2F;">Webmentions (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;umami&#x2F;">umami (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;static-analysis&#x2F;">Static Analysis (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;semgrep&#x2F;">Semgrep (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;security&#x2F;">Security (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;sast&#x2F;">SAST (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;microformats2&#x2F;">Microformats2 (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;memos&#x2F;">memos (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;meilisearch&#x2F;">meilisearch (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;javascript&#x2F;">JavaScript (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;indie-web&#x2F;">Indie Web (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;github-actions&#x2F;">Github Actions (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;engagement&#x2F;">Engagement (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;devsecops&#x2F;">DevSecOps (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;devops&#x2F;">DevOps (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;connectivity&#x2F;">Connectivity (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;community&#x2F;">Community (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;code-review&#x2F;">Code Review (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;ci&#x2F;">CI (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;build-security-in&#x2F;">Build Security In (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;best-practices&#x2F;">Best Practices (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;beginner-s-guide&#x2F;">Beginner&#x27;s Guide (1)</a>
    
<div>
</section>

<section class="advertisement">
    <h3 class="section-title">Advertisement</h3>
    <ins class="adsbygoogle"
        style="display:inline-block;width:192px;height:144px"
        data-ad-client="ca-pub-1265138627025369"
        data-ad-slot="3727265125"></ins>
    <ins class="adsbygoogle"
        style="display:inline-block;width:192px;height:144px"
        data-ad-client="ca-pub-1265138627025369"
        data-ad-slot="3727265125"></ins>
    <ins class="adsbygoogle"
        style="display:inline-block;width:192px;height:144px"
        data-ad-client="ca-pub-1265138627025369"
        data-ad-slot="3727265125"></ins>
</section>
          </aside>
      </div>
      <footer class="footer">
  <span class="webring">
<a href="https://xn--sr8hvo.ws/%F0%9F%95%90%F0%9F%89%91%F0%9F%88%B6/previous">←</a>
An IndieWeb Webring 🕸💍
<a href="https://xn--sr8hvo.ws/%F0%9F%95%90%F0%9F%89%91%F0%9F%88%B6/next">→</a>
</span>
  <link href="https://github.com/eindex" rel="me">
  <span>@2022 EINDEX</span>
</footer>

    </div>
  </body>
  
<script async defer data-website-id="692d9153-7341-4370-b652-60df196f2b31" data-host-url="https://u.eindex.me" data-domains="eindex.me" src="/js/umami.js"></script>
<script>window.twttr = (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0],
      t = window.twttr || {};
    if (d.getElementById(id)) return t;
    js = d.createElement(s);
    js.id = id;
    js.src = "https://platform.twitter.com/widgets.js?omit_script=true";
    fjs.parentNode.insertBefore(js, fjs);
  
    t._e = [];
    t.ready = function(f) {
      t._e.push(f);
    };
  
    return t;
  }(document, "script", "twitter-wjs"));</script>
<script src="https://cdn.jsdelivr.net/npm/docs-searchbar.js@2.4.1/dist/cdn/docs-searchbar.min.js"></script>
<script>
  docsSearchBar({
    hostUrl: "https://meili.eindex.me",
    apiKey: "a39cff5442b90bb926f6408b0b08671eee444599e6d9c44c29bd0adae09a4b86",
    indexUid: "blog",
    inputSelector: '#search-bar-input',
    debug: true, // Set debug to true if you want to inspect the dropdown
  })
</script>

<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>

</body>
  
    <script src="/js/pv-counter.js" async defer></script>

</html>