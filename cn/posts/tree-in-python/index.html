<!doctype html><html charset=utf-8 lang=en><head><script src="https://www.googletagmanager.com/gtag/js?id=G-SR36ZS0R52" async></script><script>window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }

  var page_link = new URL(window.location.href);
  gtag('js', new Date());
  gtag('config', 'G-SR36ZS0R52', {
    traffic_type: page_link.searchParams.get("traffic_type")
  });
  gtag('set', {
    traffic_type: page_link.searchParams.get("traffic_type")
  })</script><link href=https://eindex.me/cn/feed.xml rel=alternate title=RSS type=application/rss+xml><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="text/html; charset=utf-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1.0,maximum-scale=1" name=viewport><meta content=EINDEX itemprop=author name=author><title>Tree in Python â€¢ EINDEX's Blog</title><meta content="Tree in Python â€¢ EINDEX's Blog" property=og:title><meta charset=utf-8><link href="https://eindex.me/css/index.css?h=b4140d1b8e3196cffd2e47c68ff946d2e5312afa70cfe5c88add4caebf732a9e" rel=stylesheet><style>@-moz-document url-prefix() {
    .lazy:-moz-loading {
      visibility: hidden;
    }
  }

  .ieOnly {
    display: none;
  }

  @media all and (-ms-high-contrast: none),
  (-ms-high-contrast: active) {
    .ieOnly {
      display: block;
    }
  }</style><link href=https://webmention.io/eindex.me/webmention rel=webmention><link href=https://webmention.io/eindex.me/xmlrpc rel=pingback><script src=https://cdn.jsdelivr.net/npm/iconify-icon@1.0.1/dist/iconify-icon.min.js></script><link href=/favicon-512.png rel=apple-touch-icon sizes=512x512><link href=/favicon-512.png rel=icon sizes=512x512 type=image/png><link href=/favicon-192.png rel=icon sizes=192x192 type=image/png><link href=/manifest.json rel=manifest><meta content=on name=twitter:dnt><meta content=on name=twitter:widgets:csp><meta content=https://eindex.me/cn/posts/tree-in-python/ property=og:url><meta content="EINDEX's Blog" property=og:site_name><meta content=https://eindex.me/images/avatar.png property=og:image><meta content=summary name=twitter:card><meta content="Tree in Python" name=twitter:title><meta content=@eindex_li name=twitter:site><meta content=@eindex_li name=twitter:creator><meta content=https://eindex.me/images/avatar.png name=twitter:image><link href=https://twitter.com/eindex_li rel=me><script type=application/ld+json>
{
  "@context": "https://schema.org/",
  "@type": "BlogPosting",
  "headline": "Tree in Python",
  "image": "https://eindex.me/images/avatar.png",
  
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://eindex.me/cn/posts/tree-in-python/"
  },
  
  "datePublished": "2018-04-08",
  
  
  "author": {
    "@type": "Person",
    "name": "EINDEX",
    "url": "https://eindex.me/about"
  },
  "publisher": {
    "@type": "Organization",
    "name": "EINDEX's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://eindex.me/images/avatar.png"
    }
  },
  "keywords": ["Python","algorithm"]
}
</script><link href=https://cdn.jsdelivr.net/npm/docs-searchbar.js@2.4.1/dist/cdn/docs-searchbar.min.css rel=stylesheet><script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1265138627025369" async crossorigin=anonymous></script><body><div class=all><header><nav class=navbar><div class=avatar><a class=site-link href=https://eindex.me/cn/><img alt=Workflow class=avatar src=https://eindex.me/processed_images/e75389feba7c019600.png></a></div><div class=menus><a href=https://eindex.me/cn/gallery/>ç›¸å†Œ</a><a href=https://eindex.me/cn/archive/>å½’æ¡£</a></div><div class=switcher><a class="language switch" href=https://eindex.me/><iconify-icon icon=ri:english-input></iconify-icon></a></div></nav></header><div class=content><main><article class=h-entry data-clarity-region=article><section class=header><section class=title-area><a class="series p-category" href=https://eindex.me/cn/series/algorithm/>ç®—æ³•</a><h1 class="title p-name"><a class=u-url href=https://eindex.me/cn/posts/tree-in-python/>Tree in Python</a></h1></section><section class=meta-area><p style="display: none;" class=p-summary>&LTp>æ ‘æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­å¸¸ç”¨çš„æ•°æ®ç»“æ„ä¹‹ä¸€,å¸¸è§çš„åœ°æ–¹æœ‰ï¼ŒJava çš„ç»§æ‰¿æ ‘ç­‰ã€‚ è¿˜æœ‰ä¸€äº›åŸºäºæ ‘çš„ç‰¹æ®Šæ•°æ®ç»“æ„ï¼Œæ¯”å¦‚äºŒå‰æ ‘ï¼ŒB æ ‘ï¼Œç­‰ç­‰ã€‚&LT/p> &LTp>æœ¬ç¯‡ä¼šè®²è¿°ä¸€äº›å…³äºç®€å•å…³äºæ ‘çš„æ“ä½œã€‚&LT/p></p><span><iconify-icon icon=ant-design:calendar-outlined></iconify-icon>Â <time class=dt-published>2018-04-08</time>Â </span><span><iconify-icon icon=bx:time-five></iconify-icon>Â 7 mins</span><span style=display:none><iconify-icon icon=mdi:eye-outline></iconify-icon>Â <span id=pv></span>Â views</span></section></section><div class="p-author h-card" style="display: none;"><img class="u-logo u-photo" src=https://eindex.me/images/avatar.png><a class="p-nickname p-name u-url" href=https://eindex.me>EINDEX</a><p class=p-note>My goal is make happy.</div><section class="main e-content"><p>æ ‘æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­å¸¸ç”¨çš„æ•°æ®ç»“æ„ä¹‹ä¸€,å¸¸è§çš„åœ°æ–¹æœ‰ï¼ŒJava çš„ç»§æ‰¿æ ‘ç­‰ã€‚ è¿˜æœ‰ä¸€äº›åŸºäºæ ‘çš„ç‰¹æ®Šæ•°æ®ç»“æ„ï¼Œæ¯”å¦‚äºŒå‰æ ‘ï¼ŒB æ ‘ï¼Œç­‰ç­‰ã€‚<p>æœ¬ç¯‡ä¼šè®²è¿°ä¸€äº›å…³äºç®€å•å…³äºæ ‘çš„æ“ä½œã€‚</p><span id=continue-reading></span><h2 id=shu-de-ding-yi>æ ‘çš„å®šä¹‰</h2><blockquote><p>æ ‘ï¼ˆè‹±è¯­ï¼štreeï¼‰æ˜¯ä¸€ç§æŠ½è±¡æ•°æ®ç±»å‹ï¼ˆADTï¼‰æˆ–æ˜¯å®ä½œè¿™ç§æŠ½è±¡æ•°æ®ç±»å‹çš„æ•°æ®ç»“æ„ï¼Œç”¨æ¥æ¨¡æ‹Ÿå…·æœ‰æ ‘çŠ¶ç»“æ„æ€§è´¨çš„æ•°æ®é›†åˆã€‚å®ƒæ˜¯ç”±nï¼ˆn>0ï¼‰ä¸ªæœ‰é™èŠ‚ç‚¹ç»„æˆä¸€ä¸ªå…·æœ‰å±‚æ¬¡å…³ç³»çš„é›†åˆã€‚æŠŠå®ƒå«åšâ€œæ ‘â€æ˜¯å› ä¸ºå®ƒçœ‹èµ·æ¥åƒä¸€æ£µå€’æŒ‚çš„æ ‘ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒæ˜¯æ ¹æœä¸Šï¼Œè€Œå¶æœä¸‹çš„ã€‚å®ƒå…·æœ‰ä»¥ä¸‹çš„ç‰¹ç‚¹ï¼š</blockquote><blockquote><ul><li>æ¯ä¸ªèŠ‚ç‚¹æœ‰é›¶ä¸ªæˆ–å¤šä¸ªå­èŠ‚ç‚¹<li>æ²¡æœ‰çˆ¶èŠ‚ç‚¹çš„èŠ‚ç‚¹ç§°ä¸ºæ ¹èŠ‚ç‚¹<li>æ¯ä¸€ä¸ªéæ ¹èŠ‚ç‚¹æœ‰ä¸”åªæœ‰ä¸€ä¸ªçˆ¶èŠ‚ç‚¹<li>é™¤äº†æ ¹èŠ‚ç‚¹å¤–ï¼Œæ¯ä¸ªå­èŠ‚ç‚¹å¯ä»¥åˆ†ä¸ºå¤šä¸ªä¸ç›¸äº¤çš„å­æ ‘</ul></blockquote><p>èŠ‚é€‰è‡ª <a href=https://zh.wikipedia.org/wiki/%E6%A0%91_(%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84) rel=nofollow>æ ‘(æ•°æ®ç»“æ„)</a><h2 id=ding-yi-shu-ju-jie-gou>å®šä¹‰æ•°æ®ç»“æ„</h2><pre class=language-python data-lang=python style=background-color:#272822;color:#f8f8f2;><code class=language-python data-lang=python><span style=font-style:italic;color:#f92672;>class </span><span style=text-decoration:underline;color:#a6e22e;>TreeNode</span><span>(</span><span style=text-decoration:underline;font-style:italic;color:#a6e22e;>object</span><span>):
</span><span>    </span><span style=color:#75715e;>"""
</span><span style=color:#75715e;>    ä¸€ä¸ªæ ‘èŠ‚ç‚¹
</span><span style=color:#75715e;>    """
</span><span>
</span><span>    </span><span style=font-style:italic;color:#f92672;>def </span><span style=color:#66d9ef;>__init__</span><span>(</span><span style=font-style:italic;color:#fd971f;>self</span><span>, </span><span style=font-style:italic;color:#fd971f;>value</span><span>, </span><span style=font-style:italic;color:#fd971f;>children</span><span>: </span><span style=font-style:italic;color:#66d9ef;>list </span><span style=color:#f92672;>= </span><span style=color:#ae81ff;>None</span><span>):
</span><span>        </span><span style=color:#75715e;>"""
</span><span style=color:#75715e;>
</span><span style=color:#75715e;>        :param value: èŠ‚ç‚¹çš„å€¼
</span><span style=color:#75715e;>        :param children: èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼Œä¸€ä¸ª TreeNode çš„åˆ—è¡¨
</span><span style=color:#75715e;>        """
</span><span>
</span><span>        self.value </span><span style=color:#f92672;>= </span><span>value
</span><span>
</span><span>        </span><span style=color:#f92672;>if not </span><span>children:
</span><span>            self.children </span><span style=color:#f92672;>= </span><span>[]
</span><span>        </span><span style=color:#f92672;>elif not </span><span>self.value:
</span><span>            self.children </span><span style=color:#f92672;>= </span><span>[]
</span><span>        </span><span style=color:#f92672;>else</span><span>:
</span><span>            self.children </span><span style=color:#f92672;>= </span><span>children
</span><span>
</span><span style=font-style:italic;color:#f92672;>class </span><span style=text-decoration:underline;color:#a6e22e;>Tree</span><span>(</span><span style=text-decoration:underline;font-style:italic;color:#a6e22e;>object</span><span>):
</span><span>    </span><span style=color:#75715e;>"""
</span><span style=color:#75715e;>    æ ‘ï¼šåŸºæœ¬æ ‘çš„æ•°æ®ç»“æ„
</span><span style=color:#75715e;>    """
</span><span>
</span><span>    </span><span style=font-style:italic;color:#f92672;>def </span><span style=color:#66d9ef;>__init__</span><span>(</span><span style=font-style:italic;color:#fd971f;>self</span><span>, </span><span style=font-style:italic;color:#fd971f;>root</span><span>: TreeNode </span><span style=color:#f92672;>or </span><span style=color:#ae81ff;>None</span><span>):
</span><span>        </span><span style=color:#75715e;>"""
</span><span style=color:#75715e;>        ä¼ å…¥æ ¹èŠ‚ç‚¹
</span><span style=color:#75715e;>        :param root: å¦‚æœä¸º TreeNode ä¸ºæ ¹èŠ‚ç‚¹ï¼Œ å¦‚æœä¸º None ä¸ºç©ºä¹¦
</span><span style=color:#75715e;>        """
</span><span>        </span><span style=color:#f92672;>if not </span><span>(root </span><span style=color:#f92672;>is </span><span style=color:#ae81ff;>None </span><span style=color:#f92672;>or </span><span style=color:#66d9ef;>isinstance</span><span>(root, TreeNode)):
</span><span>            </span><span style=color:#f92672;>raise </span><span style=font-style:italic;color:#66d9ef;>AttributeError</span><span>(</span><span style=color:#e6db74;>'illegal root'</span><span>)
</span><span>        self.root </span><span style=color:#f92672;>= </span><span>root
</span></code></pre><h2 id=qian-xu-bian-li>å‰åºéå†</h2><p>å…ˆéå†æ ¹èŠ‚ç‚¹ã€‚åœ¨éå†å­©å­èŠ‚ç‚¹ã€‚ <img alt=å‰åºéå† src=https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E5%89%8D%E5%BA%8F%E9%81%8D%E5%8E%86.jpg><h3 id=xun-huan-ban>å¾ªç¯ç‰ˆ</h3><pre class=language-python data-lang=python style=background-color:#272822;color:#f8f8f2;><code class=language-python data-lang=python><span>    </span><span style=font-style:italic;color:#f92672;>def </span><span style=color:#a6e22e;>preorder_traversal_while</span><span>(</span><span style=font-style:italic;color:#fd971f;>self</span><span>):
</span><span>        </span><span style=color:#75715e;>"""
</span><span style=color:#75715e;>        æ ‘çš„å‰åºéå†
</span><span style=color:#75715e;>        :return: list of tree node value
</span><span style=color:#75715e;>        """
</span><span>        res </span><span style=color:#f92672;>= </span><span>[]
</span><span>        </span><span style=color:#f92672;>if not </span><span>self.root:
</span><span>            </span><span style=color:#f92672;>return </span><span>res
</span><span>        stack </span><span style=color:#f92672;>= </span><span>[self.root]
</span><span>
</span><span>        </span><span style=color:#f92672;>while </span><span style=color:#66d9ef;>len</span><span>(stack):
</span><span>            node </span><span style=color:#f92672;>= </span><span>stack.pop()
</span><span>            </span><span style=color:#f92672;>if not </span><span>node.value:
</span><span>                </span><span style=color:#f92672;>continue
</span><span>            </span><span style=color:#f92672;>for </span><span>sub_node </span><span style=color:#f92672;>in </span><span>node.children[::</span><span style=color:#f92672;>-</span><span style=color:#ae81ff;>1</span><span>]:
</span><span>                stack.append(sub_node)
</span><span>            res.append(node.value)
</span><span>
</span><span>        </span><span style=color:#f92672;>return </span><span>res
</span></code></pre><h3 id=di-gui-ban>é€’å½’ç‰ˆ</h3><pre class=language-python data-lang=python style=background-color:#272822;color:#f8f8f2;><code class=language-python data-lang=python><span style=font-style:italic;color:#f92672;>def </span><span style=color:#a6e22e;>preorder_traversal_recursion</span><span>(</span><span style=font-style:italic;color:#fd971f;>self</span><span>):
</span><span>        </span><span style=color:#75715e;>"""
</span><span style=color:#75715e;>        æ ‘çš„å‰åºéå†
</span><span style=color:#75715e;>        :return: list of tree node value
</span><span style=color:#75715e;>        """
</span><span>        res </span><span style=color:#f92672;>= </span><span>[]
</span><span>        </span><span style=color:#f92672;>if not </span><span>self.root:
</span><span>            </span><span style=color:#f92672;>return </span><span>res
</span><span>
</span><span>        </span><span style=font-style:italic;color:#f92672;>def </span><span style=color:#a6e22e;>_inner</span><span>(</span><span style=font-style:italic;color:#fd971f;>root</span><span>):
</span><span>            inner_res </span><span style=color:#f92672;>= </span><span>[]
</span><span>            </span><span style=color:#f92672;>if </span><span>root.value:
</span><span>                inner_res.append(root.value)
</span><span>                </span><span style=color:#f92672;>for </span><span>sub_node </span><span style=color:#f92672;>in </span><span>root.children:
</span><span>                    inner_res </span><span style=color:#f92672;>+= </span><span>_inner(sub_node)
</span><span>            </span><span style=color:#f92672;>return </span><span>inner_res
</span><span>        </span><span style=color:#f92672;>return </span><span>_inner(self.root)
</span></code></pre><h2 id=hou-xu-bian-li>ååºéå†</h2><p>å…ˆéå†å­©å­èŠ‚ç‚¹ï¼Œæœ€åéå†æ ¹èŠ‚ç‚¹ã€‚<p><img alt=ååºéå† src=https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86.jpg><h3 id=xun-huan-ban-1>å¾ªç¯ç‰ˆ</h3><pre class=language-python data-lang=python style=background-color:#272822;color:#f8f8f2;><code class=language-python data-lang=python><span style=font-style:italic;color:#f92672;>def </span><span style=color:#a6e22e;>postorder_traversal_while</span><span>(</span><span style=font-style:italic;color:#fd971f;>self</span><span>):
</span><span>        </span><span style=color:#75715e;>"""
</span><span style=color:#75715e;>        æ ‘çš„ååºéå†
</span><span style=color:#75715e;>        :return: list of tree node value
</span><span style=color:#75715e;>        """
</span><span>        res </span><span style=color:#f92672;>= </span><span>[]
</span><span>
</span><span>        </span><span style=color:#f92672;>if not </span><span>self.root:
</span><span>            </span><span style=color:#f92672;>return </span><span>res
</span><span>
</span><span>        stack </span><span style=color:#f92672;>= </span><span>[self.root]
</span><span>
</span><span>        </span><span style=color:#f92672;>while </span><span style=color:#66d9ef;>len</span><span>(stack):
</span><span>            node </span><span style=color:#f92672;>= </span><span>stack.pop()
</span><span>            </span><span style=color:#f92672;>if not </span><span>node.value:
</span><span>                </span><span style=color:#f92672;>continue
</span><span>            </span><span style=color:#f92672;>for </span><span>sub_node </span><span style=color:#f92672;>in </span><span>node.children:
</span><span>                stack.append(sub_node)
</span><span>            res.append(node.value)
</span><span>
</span><span>        </span><span style=color:#f92672;>return </span><span>res[::</span><span style=color:#f92672;>-</span><span style=color:#ae81ff;>1</span><span>]
</span></code></pre><h3 id=di-gui-ban-1>é€’å½’ç‰ˆ</h3><pre class=language-python data-lang=python style=background-color:#272822;color:#f8f8f2;><code class=language-python data-lang=python><span>   </span><span style=font-style:italic;color:#f92672;>def </span><span style=color:#a6e22e;>postorder_traversal_recursion</span><span>(</span><span style=font-style:italic;color:#fd971f;>self</span><span>):
</span><span>        </span><span style=color:#75715e;>"""
</span><span style=color:#75715e;>        æ ‘çš„ååºéå†
</span><span style=color:#75715e;>        :return: list of tree node value
</span><span style=color:#75715e;>        """
</span><span>        res </span><span style=color:#f92672;>= </span><span>[]
</span><span>        </span><span style=color:#f92672;>if not </span><span>self.root:
</span><span>            </span><span style=color:#f92672;>return </span><span>res
</span><span>
</span><span>        </span><span style=font-style:italic;color:#f92672;>def </span><span style=color:#a6e22e;>_inner</span><span>(</span><span style=font-style:italic;color:#fd971f;>root</span><span>):
</span><span>            inner_res </span><span style=color:#f92672;>= </span><span>[]
</span><span>            </span><span style=color:#f92672;>if </span><span>root.value:
</span><span>                </span><span style=color:#f92672;>for </span><span>sub_node </span><span style=color:#f92672;>in </span><span>root.children:
</span><span>                    inner_res </span><span style=color:#f92672;>+= </span><span>_inner(sub_node)
</span><span>                inner_res.append(root.value)
</span><span>            </span><span style=color:#f92672;>return </span><span>inner_res
</span><span>
</span><span>        </span><span style=color:#f92672;>return </span><span>_inner(self.root)
</span><span>
</span></code></pre><h2 id=ceng-ci-bian-li>å±‚æ¬¡éå†</h2><p>æŒ‰å±‚éå†èŠ‚ç‚¹ã€‚ <img alt=å±‚åºéå† src=https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E5%B1%82%E5%BA%8F%E9%81%8D%E5%8E%86.jpg><h3 id=xun-huan-ban-2>å¾ªç¯ç‰ˆ</h3><pre class=language-python data-lang=python style=background-color:#272822;color:#f8f8f2;><code class=language-python data-lang=python><span style=font-style:italic;color:#f92672;>def </span><span style=color:#a6e22e;>layer_while</span><span>(</span><span style=font-style:italic;color:#fd971f;>self</span><span>):
</span><span>        </span><span style=color:#75715e;>"""
</span><span style=color:#75715e;>        æ ‘çš„å±‚åºéå†
</span><span style=color:#75715e;>        :return: list of tree node value
</span><span style=color:#75715e;>        """
</span><span>        res </span><span style=color:#f92672;>= </span><span>[]
</span><span>        </span><span style=color:#f92672;>if not </span><span>self.root:
</span><span>            </span><span style=color:#f92672;>return </span><span>res
</span><span>
</span><span>        queue </span><span style=color:#f92672;>= </span><span>Queue()
</span><span>        queue.put(self.root)
</span><span>
</span><span>        </span><span style=color:#f92672;>while </span><span>queue.qsize():
</span><span>            node </span><span style=color:#f92672;>= </span><span>queue.get()
</span><span>            </span><span style=color:#f92672;>if not </span><span>node.value:
</span><span>                </span><span style=color:#f92672;>continue
</span><span>            res.append(node.value)
</span><span>            </span><span style=color:#f92672;>for </span><span>sub_node </span><span style=color:#f92672;>in </span><span>node.children:
</span><span>                queue.put(sub_node)
</span><span>        </span><span style=color:#f92672;>return </span><span>res
</span></code></pre><h2 id=qiu-shu-de-shen-du>æ±‚æ ‘çš„æ·±åº¦</h2><p>è®¡ç®—æ ‘çš„æœ€å¤§æ·±åº¦ã€‚<pre class=language-python data-lang=python style=background-color:#272822;color:#f8f8f2;><code class=language-python data-lang=python><span> </span><span style=font-style:italic;color:#f92672;>def </span><span style=color:#a6e22e;>depth_recursion</span><span>(</span><span style=font-style:italic;color:#fd971f;>self</span><span>):
</span><span>
</span><span>        </span><span style=font-style:italic;color:#f92672;>def </span><span style=color:#a6e22e;>_inner</span><span>(</span><span style=font-style:italic;color:#fd971f;>root</span><span>, </span><span style=font-style:italic;color:#fd971f;>depth</span><span style=color:#f92672;>=</span><span style=color:#ae81ff;>1</span><span>):
</span><span>            </span><span style=color:#f92672;>if not </span><span>root.children:
</span><span>                </span><span style=color:#f92672;>return </span><span>depth
</span><span>            </span><span style=color:#f92672;>return </span><span style=color:#66d9ef;>max</span><span>([_inner(sub_node, depth</span><span style=color:#f92672;>+</span><span style=color:#ae81ff;>1</span><span>) </span><span style=color:#f92672;>for </span><span>sub_node </span><span style=color:#f92672;>in </span><span>root.children])
</span><span>
</span><span>        </span><span style=color:#f92672;>return </span><span>_inner(self.root)
</span></code></pre><h2 id=qiu-shu-de-jie-dian-shu>æ±‚æ ‘çš„ç»“ç‚¹æ•°</h2><p>è®¡ç®—æ ‘ä¸€å…±æœ‰å¤šå°‘èŠ‚ç‚¹ã€‚<pre class=language-python data-lang=python style=background-color:#272822;color:#f8f8f2;><code class=language-python data-lang=python><span> </span><span style=font-style:italic;color:#f92672;>def </span><span style=color:#a6e22e;>node_count</span><span>(</span><span style=font-style:italic;color:#fd971f;>self</span><span>):
</span><span>        </span><span style=font-style:italic;color:#f92672;>def </span><span style=color:#a6e22e;>_inner</span><span>(</span><span style=font-style:italic;color:#fd971f;>root</span><span>):
</span><span>            </span><span style=color:#f92672;>if not </span><span>root.children:
</span><span>                </span><span style=color:#f92672;>return </span><span style=color:#ae81ff;>1
</span><span>            </span><span style=color:#f92672;>return </span><span style=color:#ae81ff;>1 </span><span style=color:#f92672;>+ </span><span style=color:#66d9ef;>sum</span><span>([_inner(sub_node) </span><span style=color:#f92672;>for </span><span>sub_node </span><span style=color:#f92672;>in </span><span>root.children])
</span><span>        </span><span style=color:#f92672;>return </span><span>_inner(self.root)
</span></code></pre><h2 id=qiu-shu-de-xie-zi-shu>æ±‚æ ‘çš„å¶å­æ•°</h2><p>è®¡ç®—ä¹¦ä¸­æœ‰å¤šå°‘æ²¡æœ‰å­©å­çš„èŠ‚ç‚¹ã€‚<pre class=language-python data-lang=python style=background-color:#272822;color:#f8f8f2;><code class=language-python data-lang=python><span style=font-style:italic;color:#f92672;>def </span><span style=color:#a6e22e;>leaf_count</span><span>(</span><span style=font-style:italic;color:#fd971f;>self</span><span>):
</span><span>        </span><span style=font-style:italic;color:#f92672;>def </span><span style=color:#a6e22e;>_inner</span><span>(</span><span style=font-style:italic;color:#fd971f;>root</span><span>):
</span><span>            </span><span style=color:#f92672;>if not </span><span>root.children:
</span><span>                </span><span style=color:#f92672;>return </span><span style=color:#ae81ff;>1
</span><span>            </span><span style=color:#f92672;>return </span><span style=color:#66d9ef;>sum</span><span>([_inner(sub_node) </span><span style=color:#f92672;>for </span><span>sub_node </span><span style=color:#f92672;>in </span><span>root.children])
</span><span>        </span><span style=color:#f92672;>return </span><span>_inner(self.root)
</span></code></pre><h2 id=qiu-liang-ge-jie-dian-de-zui-di-gong-gong-zu-xian-jie-dian>æ±‚ä¸¤ä¸ªç»“ç‚¹çš„æœ€ä½å…¬å…±ç¥–å…ˆç»“ç‚¹</h2><p>é¦–å…ˆéœ€è¦åœ¨æ ‘ä¸­æ‰¾åˆ°ä¸¤ä¸ªç»“ç‚¹ã€‚ ä¿å­˜æ‰¾åˆ°ä¸¤ä¸ªèŠ‚ç‚¹çš„é“¾è¡¨ã€‚ éå†ä¸¤ä¸ªé“¾è¡¨çš„æœ€é•¿å…¬å…±èŠ‚ç‚¹ï¼Œå°±èƒ½æ‰¾åˆ°æœ€ä½çš„å…¬å…±ç¥–å…ˆèŠ‚ç‚¹ã€‚ <img alt=æœ€ä½å…¬å…±ç¥–å…ˆèŠ‚ç‚¹ src=https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E6%9C%80%E4%BD%8E%E5%85%AC%E5%85%B1%E7%A5%96%E5%85%88%E8%8A%82%E7%82%B9.jpg><pre class=language-python data-lang=python style=background-color:#272822;color:#f8f8f2;><code class=language-python data-lang=python><span style=font-style:italic;color:#f92672;>def </span><span style=color:#a6e22e;>lowest_ancestor_node</span><span>(</span><span style=font-style:italic;color:#fd971f;>self</span><span>, </span><span style=font-style:italic;color:#fd971f;>node1</span><span>, </span><span style=font-style:italic;color:#fd971f;>node2</span><span>):
</span><span>        stack </span><span style=color:#f92672;>= </span><span>[self.root]
</span><span>        stack1 </span><span style=color:#f92672;>= </span><span style=color:#ae81ff;>None
</span><span>        stack2 </span><span style=color:#f92672;>= </span><span style=color:#ae81ff;>None
</span><span>
</span><span>        </span><span style=color:#f92672;>while </span><span style=color:#66d9ef;>len</span><span>(stack) </span><span style=color:#f92672;>and not </span><span>(stack1 </span><span style=color:#f92672;>and </span><span>stack2):
</span><span>            node </span><span style=color:#f92672;>= </span><span>stack.pop()
</span><span>
</span><span>            </span><span style=color:#f92672;>if </span><span>node </span><span style=color:#f92672;>is </span><span>node1:
</span><span>                stack1 </span><span style=color:#f92672;>= </span><span>stack[:]
</span><span>            </span><span style=color:#f92672;>if </span><span>node </span><span style=color:#f92672;>is </span><span>node2:
</span><span>                stack2 </span><span style=color:#f92672;>= </span><span>stack[:]
</span><span>            </span><span style=color:#f92672;>if not </span><span>node.value:
</span><span>                </span><span style=color:#f92672;>continue
</span><span>            </span><span style=color:#f92672;>for </span><span>sub_node </span><span style=color:#f92672;>in </span><span>node.children:
</span><span>                stack.append(sub_node)
</span><span>
</span><span>        res </span><span style=color:#f92672;>= </span><span>self.root
</span><span>        </span><span style=color:#f92672;>for </span><span>i </span><span style=color:#f92672;>in </span><span style=color:#66d9ef;>range</span><span>(</span><span style=color:#66d9ef;>len</span><span>(stack1)):
</span><span>            </span><span style=color:#f92672;>if </span><span>stack1[i] </span><span style=color:#f92672;>== </span><span>stack2[i]:
</span><span>                res </span><span style=color:#f92672;>= </span><span>stack1[i]
</span><span>            </span><span style=color:#f92672;>else</span><span>:
</span><span>                </span><span style=color:#f92672;>return </span><span>res.value
</span><span>
</span><span>        </span><span style=color:#f92672;>return </span><span>res.value
</span></code></pre><h2 id=qiu-ren-yi-liang-jie-dian-ju-chi>æ±‚ä»»æ„ä¸¤ç»“ç‚¹è·ç¦»</h2><p>é¦–å…ˆéœ€è¦åœ¨æ ‘ä¸­æ‰¾åˆ°ä¸¤ä¸ªç»“ç‚¹ã€‚ ä¿å­˜æ‰¾åˆ°ä¸¤ä¸ªèŠ‚ç‚¹çš„é“¾è¡¨ã€‚ åœ¨åˆ¤æ–­å‰©ä½™çš„é•¿åº¦ <img alt=ä»»æ„ä¸¤èŠ‚ç‚¹è·ç¦» src=https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E4%BB%BB%E6%84%8F%E4%B8%A4%E8%8A%82%E7%82%B9%E8%B7%9D%E7%A6%BB.jpg><pre class=language-python data-lang=python style=background-color:#272822;color:#f8f8f2;><code class=language-python data-lang=python><span style=font-style:italic;color:#f92672;>def </span><span style=color:#a6e22e;>two_node_distence</span><span>(</span><span style=font-style:italic;color:#fd971f;>self</span><span>, </span><span style=font-style:italic;color:#fd971f;>node1</span><span>, </span><span style=font-style:italic;color:#fd971f;>node2</span><span>):
</span><span>        stack </span><span style=color:#f92672;>= </span><span>[self.root]
</span><span>        stack1 </span><span style=color:#f92672;>= </span><span style=color:#ae81ff;>None
</span><span>        stack2 </span><span style=color:#f92672;>= </span><span style=color:#ae81ff;>None
</span><span>
</span><span>        </span><span style=color:#f92672;>while </span><span style=color:#66d9ef;>len</span><span>(stack) </span><span style=color:#f92672;>and not </span><span>(stack1 </span><span style=color:#f92672;>and </span><span>stack2):
</span><span>            node </span><span style=color:#f92672;>= </span><span>stack.pop()
</span><span>
</span><span>            </span><span style=color:#f92672;>if </span><span>node </span><span style=color:#f92672;>is </span><span>node1:
</span><span>                stack1 </span><span style=color:#f92672;>= </span><span>stack[:]
</span><span>            </span><span style=color:#f92672;>if </span><span>node </span><span style=color:#f92672;>is </span><span>node2:
</span><span>                stack2 </span><span style=color:#f92672;>= </span><span>stack[:]
</span><span>            </span><span style=color:#f92672;>if not </span><span>node.value:
</span><span>                </span><span style=color:#f92672;>continue
</span><span>            </span><span style=color:#f92672;>for </span><span>sub_node </span><span style=color:#f92672;>in </span><span>node.children:
</span><span>                stack.append(sub_node)
</span><span>
</span><span>        res </span><span style=color:#f92672;>= </span><span>self.root
</span><span>        </span><span style=color:#f92672;>for </span><span>i </span><span style=color:#f92672;>in </span><span style=color:#66d9ef;>range</span><span>(</span><span style=color:#66d9ef;>len</span><span>(stack1)):
</span><span>            </span><span style=color:#f92672;>if </span><span>stack1[i] </span><span style=color:#f92672;>== </span><span>stack2[i]:
</span><span>                res </span><span style=color:#f92672;>= </span><span>stack1[i]
</span><span>            </span><span style=color:#f92672;>else</span><span>:
</span><span>                </span><span style=color:#f92672;>return </span><span style=color:#66d9ef;>len</span><span>(stack1) </span><span style=color:#f92672;>+ </span><span style=color:#66d9ef;>len</span><span>(stack2) </span><span style=color:#f92672;>- </span><span style=color:#ae81ff;>2</span><span style=color:#f92672;>*</span><span>i
</span><span>
</span><span>        </span><span style=color:#f92672;>return </span><span style=color:#66d9ef;>len</span><span>(stack1) </span><span style=color:#f92672;>+ </span><span style=color:#66d9ef;>len</span><span>(stack2) </span><span style=color:#f92672;>- </span><span style=color:#ae81ff;>2</span><span style=color:#f92672;>*</span><span>i
</span><span>
</span></code></pre><h2 id=zong-shu>ç»¼è¿°</h2><p>ä»¥ä¸Šå°±æ˜¯å’Œæ ‘æœ‰å…³è”çš„ç®€å•ä»£ç ã€‚ ä»¥ä¸Šä»£ç ä¹Ÿåœ¨ Github ä¸Šå‘å¸ƒ <a href=https://github.com/EINDEX/Python-algorithm/blob/master/data_structure/tree/tree.py rel=nofollow>tree</a>ï¼Œ å¦‚æœ‰å·®é”™ï¼Œæ¬¢è¿æäº¤ Issue æˆ– PRã€‚<h2 id=geng-xin>æ›´æ–°</h2><ul><li>ä¿®å¤å›¾ç‰‡çš„ Bug</ul></section><section class=post-footer><div class=tags><span class=tag><a href=https://eindex.me/cn/tags/python/>Python</a></span></div></section><hr><section class=webmentions><h2>Response</h2><p class=how-to-send-webmention>Have you written any responses to this article? If so, please send your article or tweet link below. (Making sure to include the link of this article in the content, learn more about webmentions from <a href=https://indieweb.org/Webmention>here</a>.)<form action=https://webmention.io/eindex.me/webmention class=webmention-form method=post><input name=target type=hidden value=https://eindex.me/cn/posts/tree-in-python/><input placeholder="Your webmention link" name=source><button>Send Webmention</button></form><p class="flex flex-row how-to-send-webmention"><a class=twitter-share-button href=https://twitter.com/intent/tweet>Tweet</a>Â  and send response.</section></article></main><aside><section class=search><input id=search-bar-input placeholder=Searching... type=search></section><section><h3 class=section-title>Series</h3><p><a href=https://eindex.me/cn/series/algorithm/>ç®—æ³• (5)</a><p><a href=https://eindex.me/cn/series/review/>å¹´ç»ˆæ€»ç»“ (2)</a><p><a href=https://eindex.me/cn/series/blog-enhance-plan/>åšå®¢æ¼”è¿›è®¡åˆ’ (1)</a></section><section><h3 class=section-title>Links</h3><p><a href=https://github.com/EINDEX rel=me>Github</a><p><a href=https://eindex.me/toolkit/> My Toolkit</a><p><a href=/feed.xml>RSS Feed</a><p><a href=/cn/links>å‹æƒ…é“¾æ¥</a></section><section class=advertisement><h3 class=section-title>Advertisements</h3><ins class="adsbygoogle aside" style="display:inline-block;width: 100%;height:500px" data-ad-client=ca-pub-1265138627025369 data-ad-slot=3472732805></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></section><section class=tags><h3 class=section-title>Tags</h3><div class=tags><a href=https://eindex.me/cn/tags/python/>Python (7)</a>, <a href=https://eindex.me/cn/tags/ending/>Ending (2)</a>, <a href=https://eindex.me/cn/tags/annual-summary/>Annual Summary (2)</a>, <a href=https://eindex.me/cn/tags/webmentions/>Webmentions (1)</a>, <a href=https://eindex.me/cn/tags/umami/>umami (1)</a>, <a href=https://eindex.me/cn/tags/thoughtworks/>Thoughtworks (1)</a>, <a href=https://eindex.me/cn/tags/sort/>Sort (1)</a>, <a href=https://eindex.me/cn/tags/self-hosted/>Self-Hosted (1)</a>, <a href=https://eindex.me/cn/tags/search-engine/>Search Engine (1)</a>, <a href=https://eindex.me/cn/tags/proxmox-ve/>Proxmox VE (1)</a>, <a href=https://eindex.me/cn/tags/pipenv/>Pipenv (1)</a>, <a href=https://eindex.me/cn/tags/microformats2/>Microformats2 (1)</a>, <a href=https://eindex.me/cn/tags/meilisearch/>meilisearch (1)</a>, <a href=https://eindex.me/cn/tags/linear/>Linear (1)</a>, <a href=https://eindex.me/cn/tags/kmp/>KMP (1)</a>, <a href=https://eindex.me/cn/tags/k3s/>K3S (1)</a>, <a href=https://eindex.me/cn/tags/javascript/>JavaScript (1)</a>, <a href=https://eindex.me/cn/tags/introspection/>Introspection (1)</a>, <a href=https://eindex.me/cn/tags/indie-web/>Indie Web (1)</a>, <a href=https://eindex.me/cn/tags/index/>Index (1)</a>, <a href=https://eindex.me/cn/tags/github-actions/>Github Actions (1)</a>, <a href=https://eindex.me/cn/tags/flyio/>flyio (1)</a>, <a href=https://eindex.me/cn/tags/financial-management/>financial-management (1)</a>, <a href=https://eindex.me/cn/tags/financial-independence/>financial-independence (1)</a>, <a href=https://eindex.me/cn/tags/financial/>financial (1)</a>, <a href=https://eindex.me/cn/tags/etag/>ETag (1)</a>, <a href=https://eindex.me/cn/tags/environment/>Environment (1)</a>, <a href=https://eindex.me/cn/tags/engagement/>Engagement (1)</a>, <a href=https://eindex.me/cn/tags/docker/>Docker (1)</a>, <a href=https://eindex.me/cn/tags/data-structure/>Data structure (1)</a>, <a href=https://eindex.me/cn/tags/crawler/>Crawler (1)</a>, <a href=https://eindex.me/cn/tags/connectivity/>Connectivity (1)</a>, <a href=https://eindex.me/cn/tags/community/>Community (1)</a>, <a href=https://eindex.me/cn/tags/chatgpt/>ChatGPT (1)</a>, <a href=https://eindex.me/cn/tags/cache/>Cache (1)</a>, <a href=https://eindex.me/cn/tags/beginner-s-guide/>Beginner's Guide (1)</a>, <a href=https://eindex.me/cn/tags/beancount/>Beancount (1)</a>, <a href=https://eindex.me/cn/tags/autoenv/>Autoenv (1)</a>, <a href=https://eindex.me/cn/tags/async/>Async (1)</a>, <a href=https://eindex.me/cn/tags/archlinux/>ArchLinux (1)</a>, <a href=https://eindex.me/cn/tags/after-reading/>After Reading (1)</a></div></section></aside></div><footer class=footer><span class=webring> <a href=https://xn--sr8hvo.ws/%F0%9F%95%90%F0%9F%89%91%F0%9F%88%B6/previous>â†</a> An IndieWeb Webring ğŸ•¸ğŸ’ <a href=https://xn--sr8hvo.ws/%F0%9F%95%90%F0%9F%89%91%F0%9F%88%B6/next>â†’</a> </span><span>EINDEX @ 2023</span></footer></div></body><script async data-domains=eindex.me data-host-url=https://u.eindex.me data-website-id=692d9153-7341-4370-b652-60df196f2b31 defer src=/js/umami.js></script><script>window.twttr = (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0],
      t = window.twttr || {};
    if (d.getElementById(id)) return t;
    js = d.createElement(s);
    js.id = id;
    js.src = "https://platform.twitter.com/widgets.js?omit_script=true";
    fjs.parentNode.insertBefore(js, fjs);
  
    t._e = [];
    t.ready = function(f) {
      t._e.push(f);
    };
  
    return t;
  }(document, "script", "twitter-wjs"));</script><script src=https://cdn.jsdelivr.net/npm/docs-searchbar.js@2.4.1/dist/cdn/docs-searchbar.min.js></script><script>docsSearchBar({
    hostUrl: "https://meili.eindex.me",
    apiKey: "a39cff5442b90bb926f6408b0b08671eee444599e6d9c44c29bd0adae09a4b86",
    indexUid: "blog",
    inputSelector: '#search-bar-input',
    debug: true, // Set debug to true if you want to inspect the dropdown
  })</script><script async defer src=/js/pv-counter.js></script>