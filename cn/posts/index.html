<!doctype html><html charset=utf-8 lang=en><head><script src="https://www.googletagmanager.com/gtag/js?id=G-SR36ZS0R52" async></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  
  var page_link = new URL(window.location.href);
  gtag('js', new Date());
  gtag('config', 'G-SR36ZS0R52', {
    traffic_type: page_link.searchParams.get("traffic_type")
  });
  gtag('set', {
    traffic_type: page_link.searchParams.get("traffic_type")
  })</script><link href=https://eindex.me/cn/feed.xml rel=alternate title=RSS type=application/rss+xml><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="text/html; charset=utf-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1.0,maximum-scale=1" name=viewport><meta content=EINDEX itemprop=author name=author><title>Posts • EINDEX's Blog</title><meta content="Posts • EINDEX's Blog" property=og:title><meta charset=utf-8><link href="https://eindex.me/css/index.css?h=88c08404b1cd92dd4bcad8159536da194662baa74ba813d10705f15277878149" rel=stylesheet><style>@-moz-document url-prefix() {.lazy:-moz-loading {visibility:hidden;}}.ieOnly {display: none;}@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {.ieOnly {display: block;}}</style><link href=https://webmention.io/eindex.me/webmention rel=webmention><link href=https://webmention.io/eindex.me/xmlrpc rel=pingback><script src=https://cdn.jsdelivr.net/npm/iconify-icon@1.0.1/dist/iconify-icon.min.js></script><link href=/favicon-512.png rel=apple-touch-icon sizes=512x512><link href=/favicon-512.png rel=icon sizes=512x512 type=image/png><link href=/favicon-192.png rel=icon sizes=192x192 type=image/png><link href=/manifest.json rel=manifest><meta content=on name=twitter:dnt><meta content=on name=twitter:widgets:csp><meta content=https://eindex.me property=og:url><meta content="EINDEX's Blog" property=og:site_name><meta content=https://eindex.me/images/avatar.png property=og:image><meta content=summary name=twitter:card><meta content=Posts name=twitter:title><meta content=@eindex_li name=twitter:site><meta content=@eindex_li name=twitter:creator><meta content=https://eindex.me/images/avatar.png name=twitter:image><link href=https://twitter.com/eindex_li rel=me><script type=application/ld+json>
{
  "@context": "https://schema.org/",
  "@type": "BlogPosting",
  
  "image": "https://eindex.me/images/avatar.png",
  
  
  
  
  "author": {
    "@type": "Person",
    "name": "EINDEX",
    "url": "https://eindex.me/about"
  },
  "publisher": {
    "@type": "Organization",
    "name": "EINDEX's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://eindex.me/images/avatar.png"
    }
  },
  "keywords": []
}
</script><script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1265138627025369" async crossorigin=anonymous></script><body><div class=all><header><nav class=navbar><div class=avatar><a class=site-link href=https://eindex.me/cn/><img alt=Workflow class=avatar src=https://eindex.me/processed_images/e75389feba7c019600.png></a></div><div class=menus><a href=https://eindex.me/cn/gallery/>相册</a><a href=https://eindex.me/cn/archive/>归档</a></div><div class=switcher><a class="language switch" href=https://eindex.me/><iconify-icon icon=ri:english-input></iconify-icon></a></div></nav></header><div class=content><main>{"relative_path":"posts/_index.cn.md","content":"","permalink":"https://eindex.me/cn/posts/","draft":false,"ancestors":["_index.cn.md"],"title":"Posts","description":null,"extra":{},"path":"/cn/posts/","components":["cn","posts"],"toc":[],"word_count":0,"reading_time":0,"lang":"cn","assets":[],"pages":[{"relative_path":"posts/webmentions.cn.md","content":"&LTblockquote>\n&LTp>本文通过 DeepL 翻译自 &LTa href=\"https://eindex.me/posts/webmentions/\">Joining the Webmentions Community: A Beginner's Guide&LT/a>&LT/p>\n&LT/blockquote>\n&LTp>最近我看到了&LTa rel=\"nofollow\" href=\"https://www.owenyoung.com/en/blog/indieweb/\">Now, I'm in IndieWeb?&LT/a>，了解到了 Webmentions。我发现这个概念非常有趣，于是决定加入我的博客的 Webmentions 社区。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"shi-yao-shi-webmentions\">什么是 Webmentions&LT/h2>\n&LTp>Webmentions 是一种网站相互交流的方式，当它们链接到对方的内容时，可以通知对方。这使得网络社区的互动性更强，联系更紧密，网站可以与对方和用户实时互动。&LT/p>\n&LTh2 id=\"wo-ru-he-jia-ru-webmentions-she-qu\">我如何加入 Webmentions 社区？&LT/h2>\n&LTp>要加入 Webmentions 社区，并开始接收其他网站链接到你的内容时的通知，你需要采取以下步骤。&LT/p>\n&LTol>\n&LTli>\n&LTp>在 Webmentions 服务中注册你的网站，比如 webmention.io。这将使你的网站能够接收来自其他网站的网络提示，也使你能够在链接到其他网站时向它们发送网络提示。要做到这一点，你可以在你的网站上添加以下 HTML 代码。&LT/p>\n&LTpre data-lang=\"HTML\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-HTML \">&LTcode class=\"language-HTML\" data-lang=\"HTML\">&LTspan>&amplt;&LT/span>&LTspan style=\"color:#f92672;\">link &LT/span>&LTspan style=\"color:#a6e22e;\">rel&LT/span>&LTspan>=&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;webmention&ampquot; &LT/span>&LTspan style=\"color:#a6e22e;\">href&LT/span>&LTspan>=&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;https://webmention.io/eindex.me/webmention&ampquot; &LT/span>&LTspan>/&ampgt;\n&LT/span>&LTspan>&amplt;&LT/span>&LTspan style=\"color:#f92672;\">link &LT/span>&LTspan style=\"color:#a6e22e;\">rel&LT/span>&LTspan>=&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;pingback&ampquot; &LT/span>&LTspan style=\"color:#a6e22e;\">href&LT/span>&LTspan>=&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;https://webmention.io/eindex.me/xmlrpc&ampquot; &LT/span>&LTspan>/&ampgt;\n&LT/span>&LT/code>&LT/pre>\n&LT/li>\n&LTli>\n&LTp>确保你的网站遵循&LTa rel=\"nofollow\" href=\"https://microformats.org/\">microformats2&LT/a>标准。这可能需要一些努力，但这对于确保你的网站能够正确地发送和接收 Webmentions 是很重要的。你可以使用&LTa rel=\"nofollow\" href=\"https://indiewebify.me/\">IndieWebify.Me&LT/a>这样的工具来检查你的网站是否正确使用 microformats2。你也可以使用像&LTcode>ngrok&LT/code>或&LTcode>cloudflare tunnel&LT/code>这样的工具，在本地调试你的网站，这样可以节省时间。&LT/p>\n&LT/li>\n&LTli>\n&LTp>开始在你的网站上发送和接收 Webmentions。一旦你的网站在 Webmentions 服务中注册，并且你已经测试了你的实施，你就可以开始在你的网站上使用 Webmentions 来通知他们你的链接。而每当别人链接到你的网站时，你可以收到 webmention 通知，并在你的网站上显示该链接。&LT/p>\n&LT/li>\n&LTli>\n&LTp>考虑使用 Github 行动和 JavaScript 脚本等工具来自动发送和接收 Webmentions 的过程。这对静态网站特别有用。例如，你可以在 Github 上的&LTcode>webmentions&LT/code>分支中存储你的 Webmentions，并使用像这样的工作流文件来获取 Webmentions 和发送你的 Webmentions，你也可以查看我的&LTa rel=\"nofollow\" href=\"https://github.com/EINDEX/blog/blob/main/.github/workflows/fetch-webmentions.yaml\">实现&LT/a>这个博客的。&LT/p>\n&LTpre data-lang=\"yaml\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-yaml \">&LTcode class=\"language-yaml\" data-lang=\"yaml\">&LTspan style=\"color:#f92672;\">name&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#e6db74;\">Fetch Webmentions\n&LT/span>&LTspan style=\"color:#ae81ff;\">on&LT/span>&LTspan>:\n&LT/span>&LTspan style=\"color:#f92672;\">schedule&LT/span>&LTspan>:\n&LT/span>&LTspan> - &LT/span>&LTspan style=\"color:#f92672;\">cron&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;0 0 * * *&ampquot;\n&LT/span>&LTspan style=\"color:#f92672;\">jobs&LT/span>&LTspan>:\n&LT/span>&LTspan style=\"color:#f92672;\">fetch_webmentions&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">runs-on&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#e6db74;\">ubuntu-latest\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">steps&LT/span>&LTspan>:\n&LT/span>&LTspan> - &LT/span>&LTspan style=\"color:#f92672;\">uses&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#e6db74;\">actions/checkout@v2\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">with&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">ref&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#e6db74;\">webmentions\n&LT/span>&LTspan> - &LT/span>&LTspan style=\"color:#f92672;\">name&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#e6db74;\">Fetch Webmentions\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">run&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#e6db74;\">node pipeline/webmentions.js\n&LT/span>&LTspan> - &LT/span>&LTspan style=\"color:#f92672;\">name&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#e6db74;\">Send Webmetnions\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">run&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#e6db74;\">node pipeline/send-webmentions.js\n&LT/span>&LT/code>&LT/pre>\n&LT/li>\n&LT/ol>\n&LTp>按照这些步骤，你可以加入 Webmentions 社区，并开始享受与其他网站及其用户进行更多互动和参与性交流的好处。&LT/p>\n&LTh2 id=\"wei-shi-yao-yao-jia-ru-webmentions-she-qu\">为什么要加入 Webmentions 社区？&LT/h2>\n&LTp>加入 Webmentions 社区并在您的网站上实施 Webmentions 有许多潜在的好处。一些潜在的好处包括。&LT/p>\n&LTul>\n&LTli>\n&LTp>增加与其他网站及其用户的接触和联系。通过在其他网站链接到你的内容时收到通知，并在你链接到其他网站时能够通知其他网站，你可以培养一个更加互动和连接的在线社区。这可以带来更多的流量，甚至有可能带来更多的合作和参与机会。&LT/p>\n&LT/li>\n&LTli>\n&LTp>改善与其他网站的沟通和协作。 Webmentions 允许网站之间进行实时沟通，这对协调工作和保持 Webmentions 社区的最新发展很有帮助。&LT/p>\n&LT/li>\n&LTli>\n&LTp>参与不断发展的网络生态系统的能力。 Webmentions 是 &ampquot;Web 3.0 &ampquot;的一种形式，与过去相比，网站之间的相互联系和互动更多。通过加入 Webmentions 社区，你可以成为这个不断发展的网络生态系统的一部分，并有可能从出现的新机会和联系中受益。&LT/p>\n&LT/li>\n&LT/ul>\n&LTp>当然，加入 Webmentions 社区确实需要一些努力和资源，所以它不一定是每个人的正确决定。但对许多网站所有者来说，加入 Webmentions 社区的潜在好处可能会超过挑战，使其成为一项值得的投资。&LT/p>\n&LTh2 id=\"zong-jie\">总结&LT/h2>\n&LTp>在这个初学者指南中，我们已经介绍了加入 Webmentions 社区和在网站上实施 Webmentions 的步骤。按照这些步骤，你可以加入 Webmentions 社区，并开始享受与其他网站及其用户进行更多互动和参与性交流的好处。虽然加入 Webmentions 社区需要一些挑战和资源，但对许多网站所有者来说，潜在的好处可能超过了挑战。&LT/p>\n","permalink":"https://eindex.me/cn/posts/webmentions/","slug":"webmentions","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"加入 Webmentions 社区: 新手指导","description":"了解如何加入 Webmentions 社区，提高你的博客与其他网站及其用户的互动性和参与度。","updated":"2022-12-05T23:48:50+08:00","date":"2022-11-06T17:44:50+08:00","year":2022,"month":11,"day":6,"taxonomies":{"series":["blog-enhance-plan"],"tags":["Webmentions","Community","Beginner's Guide","Indie Web","Microformats2","Engagement","Connectivity","Github Actions","JavaScript"]},"extra":{},"path":"/cn/posts/webmentions/","components":["cn","posts","webmentions"],"summary":"&LTblockquote>\n&LTp>本文通过 DeepL 翻译自 &LTa href=\"https://eindex.me/posts/webmentions/\">Joining the Webmentions Community: A Beginner's Guide&LT/a>&LT/p>\n&LT/blockquote>\n&LTp>最近我看到了&LTa rel=\"nofollow\" href=\"https://www.owenyoung.com/en/blog/indieweb/\">Now, I'm in IndieWeb?&LT/a>，了解到了 Webmentions。我发现这个概念非常有趣，于是决定加入我的博客的 Webmentions 社区。&LT/p>\n","toc":[{"level":2,"id":"shi-yao-shi-webmentions","permalink":"https://eindex.me/cn/posts/webmentions/#shi-yao-shi-webmentions","title":"什么是 Webmentions","children":[]},{"level":2,"id":"wo-ru-he-jia-ru-webmentions-she-qu","permalink":"https://eindex.me/cn/posts/webmentions/#wo-ru-he-jia-ru-webmentions-she-qu","title":"我如何加入 Webmentions 社区？","children":[]},{"level":2,"id":"wei-shi-yao-yao-jia-ru-webmentions-she-qu","permalink":"https://eindex.me/cn/posts/webmentions/#wei-shi-yao-yao-jia-ru-webmentions-she-qu","title":"为什么要加入 Webmentions 社区？","children":[]},{"level":2,"id":"zong-jie","permalink":"https://eindex.me/cn/posts/webmentions/#zong-jie","title":"总结","children":[]}],"word_count":1128,"reading_time":6,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":{"relative_path":"posts/my-homelab-introduce/index.cn.md","content":"&LTp>这篇文章将会介绍一下我的 HomeLab。&LT/p>\n&LTp>为什么会建设 HomeLab，它给我带来了什么价值？以及为什么是现在的结构，解决了什么问题。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"jie-yuan\">结缘&LT/h2>\n&LTp>在 2017 年末，我遇到一个艰难的问题，我有很多设备，小米手机，iPad，MacBook Pro，之前用的 Resilio Sync(原 BTSync)，也需要翻墙才能同步文件。 Google Photos 在墙内的使用体验也日渐下降。&LT/p>\n&LTp>机缘巧合之下，Synology 出现在我的面前。一拍脑袋，搞了一个 Synology 218+。&LT/p>\n&LTp>单纯的我当时只是想同步一下文件，给 MacBook 加上 Time Machine，并没想道这是我和 HomeLab 缘分的开始。&LT/p>\n&LTh2 id=\"shi-jian-xian\">时间线&LT/h2>\n&LTh3 id=\"zao-qi\">早期&LT/h3>\n&LTp>主要是使用一些 Synology 原生功能，如 Moments，Video，Drive，Note 等，然后在 Docker 里跑了一两个简单的服务。单纯就用来备份照片，数据，剪裁网页啥的。&LT/p>\n&LTp>维护成本也很低。直到某一天我发现 &LTa rel=\"nofollow\" href=\"https://synocommunity.com/\">Synology Community&LT/a>，这里面有很多奇奇怪怪的 package，稍微研究了一下，就打开了新世界的大门。&LT/p>\n&LTp>这里面有各种各样的 Self-hosted 服务，多媒体自动化，下载的，书籍管理，文件同步，RSS 和一些 DSM 并不自带的系统命令。&LT/p>\n&LTp>迫于追剧的需求，我当在群晖里增加了多媒体自动化没，当时用的 Jackett，Sonarr，Radarr，Emby 一套，用来自动下载，刮削，看视频，看电影。同时将服务管理到 docker-compose 里。&LT/p>\n&LTh3 id=\"geng-duo-xu-qiu\">更多需求&LT/h3>\n&LTp>由于换到新公司，工作压力没有之前那么大。有更多的时间去折腾 HomeLab，先是用了个电脑搭建了 OMV，直到某天 U 盘系统崩了，于是心一横买了稳定且性能更强的 Synology 920+。&LT/p>\n&LTp>这个阶段开始使用 Traefik 做为 Ingress，所有服务有一个中心化的入口，再也不用背各种端口号了。&LT/p>\n&LTp>还引入了一些新服务，Organizr 当作 application dashboard，Home Assistant 作为家庭自动化中枢，Bitwarden 作为密码管理器，qBittorrent 用来下载，Bazarr 用来寻找字幕，Miniflux 作为 RSS 阅读器。&LT/p>\n&LTh3 id=\"xu-ni-hua-yu-k3s\">虚拟化 与 K3S&LT/h3>\n&LTp>在折腾的过程中，服务越来越多，可维护性与可见性快速下降，同时性能也快接触到 D920+ 的瓶颈。&LT/p>\n&LTp>为了一口气解决这些问题，我希望找到一种把程序和数据分开，计算和控制分开，写的配置最好是可以方便的代码化，可以快速恢复。&LT/p>\n&LTp>在一些调研之后，采用 K3S in Proxmox VE 的模式去运行。即是在 PVE 里运行一个或多个 K3S 的虚拟机。组成一个 K3S 集群。这个方案其实很接近 &LTcode>TrueNAS SCALE&LT/code> 想法，奈何我想让我可以在 PVE 里可以快速的启动一个 X86-64 的 linux lxc 环境，进行快速的测试，而那是 TrueNAS SCALE 还在测试阶段，唉～&LT/p>\n&LTh2 id=\"homelab-de-xian-zhuang\">HomeLab 的 现状&LT/h2>\n&LTp>现在所有的服务都 PVE 服务器的 K3S 里，数据通过 nfs 存放在群晖中。&LT/p>\n&LTp>现在运行了更多的服务，媒体自动化方面增加了 Overseerr，Servrr 新出的 Prowlarr，EMBY 替换成了 Plex；阅读方面增加了 Rsshub，Miniflux 替换成了 FreshRSS。&LT/p>\n&LTp>关于可见性方面，增加了 Graylog 作为日志中心（有点重，还在寻找替代品或者给服务器增加点性能），HealthChecks 用来查看定时任务的更新情况。&LT/p>\n&LTp>可维护性方面，增加了 Keel 自动化更新服务，增加了 RocketChat 作为 ChatOps 的入口。&LT/p>\n&LTp>安全方面 Authentik 做了集中的认证中心，虽然各个服务对 SSO 的支持并不完善，如果不支持 SSO 会在放在 SSO 后面要求再次登录。&LT/p>\n&LTp>增加了开发相关的服务 Gitea + Drone CI + SonarQube，做了一套简单的 DevSecOps 工具链。&LT/p>\n&LTp>整了一个新的工控机做为软路由。&LT/p>\n&LTp>下面是现在的简单截图。&LT/p>\n&LTp>&LTimg src=\"https://eindex.me/cn/posts/my-homelab-introduce/./authentik.png\" alt=\"\" />&LT/p>\n&LTp>当然还有一些服务是在命令行中运行的，就没有在此展示了。&LT/p>\n&LTh3 id=\"wei-lai\">未来&LT/h3>\n&LTp>设备方面，想采购一个更加正规的设备如 HPE MicroServer Gen10 Plus 或其他小型的服务器，来提供更多的性能，满足我对安静且占地小的需求。增加一些 AP，提高上网体验。&LT/p>\n&LTp>服务方面，现在正在研究如何合理的托管 Beancount 的 webui Fava，如果不知道啥事 Beancount 可以看这篇&LTa href=\"https://eindex.me/cn/posts/beancount-introduce/\">《复式记账工具 Beancount》&LT/a>。\n考虑增加一个 8n8,来做服务建的桥梁，减少自己写代码实现的工作量。还期望弄个 code-server，可以随时随地有个可用的开发环境。\n增加一个 Clash 服务在 HomeLab 中，能快速的调整整个局域网中的上网规则。&LT/p>\n&LTh2 id=\"homelab-dui-wo-de-jie-zhi\">HomeLab 对我的价值&LT/h2>\n&LTh3 id=\"well\">Well&LT/h3>\n&LTp>HomeLab 的存在首先是解决了我数据存储方面的问题，现在可用的存储空间大约有 8 ～ 10TB 左右，用来存储我的照片，追剧，电影，备份，代码库等，还是有一些余量的。在购买数码产品的时候，可以放心大胆的使用最小的存储空间。&LT/p>\n&LTp>其次，如果我需要写代码，我可以在自己家里运行 CI/CD，反正设备已经是花了电费了，就不需要花时间研究如何白嫖，Github Action 或者是 Circle CI 了。&LTdel>当然现在还嫖着。&LT/del>&LT/p>\n&LTp>再是可以进行快速的实验，可以用来实践 Kubernetes，terraform 等 CNCF 相关服务，对我考 CKA 应该也是有所帮助的。&LT/p>\n&LTp>最后是节约了时间，在有很多自动化服务的加持之下，我可以集中更多时间和精力去做自己想做的事情。&LT/p>\n&LTh3 id=\"less-well\">Less Well&LT/h3>\n&LTp>性能拉胯，毕竟是在家跑服务，也做不到网上那些大佬，动不动整个机柜啥的，所以为了省电，性能优点拉胯。好在可以靠时间来拉平。&LT/p>\n&LTp>搭建 HomeLab 里的各种服务，还是挺花时间的，好不容易节约的那些时间，都投入回去了 🥹。&LT/p>\n&LTh2 id=\"jie-yu\">结语&LT/h2>\n&LTp>这个东西真的很有趣，如果对 Self-Hosted 服务或者家庭实验室有兴趣，非常推荐整一个玩玩，当然最好是迭代着来，也许可以从树莓派开始？&LT/p>\n&LTp>如果有对本文内容相关问题，欢迎在评论区与我探讨。&LT/p>\n","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/","slug":"my-homelab-introduce","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"My HomeLab","description":null,"updated":null,"date":"2022-05-15T23:39:46+08:00","year":2022,"month":5,"day":15,"taxonomies":{"tags":["K3S","Proxmox VE","Self-Hosted","Docker"]},"extra":{},"path":"/cn/posts/my-homelab-introduce/","components":["cn","posts","my-homelab-introduce"],"summary":"&LTp>这篇文章将会介绍一下我的 HomeLab。&LT/p>\n&LTp>为什么会建设 HomeLab，它给我带来了什么价值？以及为什么是现在的结构，解决了什么问题。&LT/p>\n","toc":[{"level":2,"id":"jie-yuan","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#jie-yuan","title":"结缘","children":[]},{"level":2,"id":"shi-jian-xian","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#shi-jian-xian","title":"时间线","children":[{"level":3,"id":"zao-qi","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#zao-qi","title":"早期","children":[]},{"level":3,"id":"geng-duo-xu-qiu","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#geng-duo-xu-qiu","title":"更多需求","children":[]},{"level":3,"id":"xu-ni-hua-yu-k3s","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#xu-ni-hua-yu-k3s","title":"虚拟化 与 K3S","children":[]}]},{"level":2,"id":"homelab-de-xian-zhuang","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#homelab-de-xian-zhuang","title":"HomeLab 的 现状","children":[{"level":3,"id":"wei-lai","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#wei-lai","title":"未来","children":[]}]},{"level":2,"id":"homelab-dui-wo-de-jie-zhi","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#homelab-dui-wo-de-jie-zhi","title":"HomeLab 对我的价值","children":[{"level":3,"id":"well","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#well","title":"Well","children":[]},{"level":3,"id":"less-well","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#less-well","title":"Less Well","children":[]}]},{"level":2,"id":"jie-yu","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#jie-yu","title":"结语","children":[]}],"word_count":1600,"reading_time":8,"assets":["/posts/my-homelab-introduce/authentik.png"],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/","title":"My HomeLab","path":"/home/runner/work/blog/blog/content/posts/my-homelab-introduce/index.cn.md"}],"backlinks":[]},"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/webmentions/","title":"加入 Webmentions 社区: 新手指导","path":"/home/runner/work/blog/blog/content/posts/webmentions.cn.md"},{"lang":"en","permalink":"https://eindex.me/posts/webmentions/","title":"Joining the Webmentions Community: A Beginner's Guide","path":"/home/runner/work/blog/blog/content/posts/webmentions.md"}],"backlinks":[]},{"relative_path":"posts/my-homelab-introduce/index.cn.md","content":"&LTp>这篇文章将会介绍一下我的 HomeLab。&LT/p>\n&LTp>为什么会建设 HomeLab，它给我带来了什么价值？以及为什么是现在的结构，解决了什么问题。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"jie-yuan\">结缘&LT/h2>\n&LTp>在 2017 年末，我遇到一个艰难的问题，我有很多设备，小米手机，iPad，MacBook Pro，之前用的 Resilio Sync(原 BTSync)，也需要翻墙才能同步文件。 Google Photos 在墙内的使用体验也日渐下降。&LT/p>\n&LTp>机缘巧合之下，Synology 出现在我的面前。一拍脑袋，搞了一个 Synology 218+。&LT/p>\n&LTp>单纯的我当时只是想同步一下文件，给 MacBook 加上 Time Machine，并没想道这是我和 HomeLab 缘分的开始。&LT/p>\n&LTh2 id=\"shi-jian-xian\">时间线&LT/h2>\n&LTh3 id=\"zao-qi\">早期&LT/h3>\n&LTp>主要是使用一些 Synology 原生功能，如 Moments，Video，Drive，Note 等，然后在 Docker 里跑了一两个简单的服务。单纯就用来备份照片，数据，剪裁网页啥的。&LT/p>\n&LTp>维护成本也很低。直到某一天我发现 &LTa rel=\"nofollow\" href=\"https://synocommunity.com/\">Synology Community&LT/a>，这里面有很多奇奇怪怪的 package，稍微研究了一下，就打开了新世界的大门。&LT/p>\n&LTp>这里面有各种各样的 Self-hosted 服务，多媒体自动化，下载的，书籍管理，文件同步，RSS 和一些 DSM 并不自带的系统命令。&LT/p>\n&LTp>迫于追剧的需求，我当在群晖里增加了多媒体自动化没，当时用的 Jackett，Sonarr，Radarr，Emby 一套，用来自动下载，刮削，看视频，看电影。同时将服务管理到 docker-compose 里。&LT/p>\n&LTh3 id=\"geng-duo-xu-qiu\">更多需求&LT/h3>\n&LTp>由于换到新公司，工作压力没有之前那么大。有更多的时间去折腾 HomeLab，先是用了个电脑搭建了 OMV，直到某天 U 盘系统崩了，于是心一横买了稳定且性能更强的 Synology 920+。&LT/p>\n&LTp>这个阶段开始使用 Traefik 做为 Ingress，所有服务有一个中心化的入口，再也不用背各种端口号了。&LT/p>\n&LTp>还引入了一些新服务，Organizr 当作 application dashboard，Home Assistant 作为家庭自动化中枢，Bitwarden 作为密码管理器，qBittorrent 用来下载，Bazarr 用来寻找字幕，Miniflux 作为 RSS 阅读器。&LT/p>\n&LTh3 id=\"xu-ni-hua-yu-k3s\">虚拟化 与 K3S&LT/h3>\n&LTp>在折腾的过程中，服务越来越多，可维护性与可见性快速下降，同时性能也快接触到 D920+ 的瓶颈。&LT/p>\n&LTp>为了一口气解决这些问题，我希望找到一种把程序和数据分开，计算和控制分开，写的配置最好是可以方便的代码化，可以快速恢复。&LT/p>\n&LTp>在一些调研之后，采用 K3S in Proxmox VE 的模式去运行。即是在 PVE 里运行一个或多个 K3S 的虚拟机。组成一个 K3S 集群。这个方案其实很接近 &LTcode>TrueNAS SCALE&LT/code> 想法，奈何我想让我可以在 PVE 里可以快速的启动一个 X86-64 的 linux lxc 环境，进行快速的测试，而那是 TrueNAS SCALE 还在测试阶段，唉～&LT/p>\n&LTh2 id=\"homelab-de-xian-zhuang\">HomeLab 的 现状&LT/h2>\n&LTp>现在所有的服务都 PVE 服务器的 K3S 里，数据通过 nfs 存放在群晖中。&LT/p>\n&LTp>现在运行了更多的服务，媒体自动化方面增加了 Overseerr，Servrr 新出的 Prowlarr，EMBY 替换成了 Plex；阅读方面增加了 Rsshub，Miniflux 替换成了 FreshRSS。&LT/p>\n&LTp>关于可见性方面，增加了 Graylog 作为日志中心（有点重，还在寻找替代品或者给服务器增加点性能），HealthChecks 用来查看定时任务的更新情况。&LT/p>\n&LTp>可维护性方面，增加了 Keel 自动化更新服务，增加了 RocketChat 作为 ChatOps 的入口。&LT/p>\n&LTp>安全方面 Authentik 做了集中的认证中心，虽然各个服务对 SSO 的支持并不完善，如果不支持 SSO 会在放在 SSO 后面要求再次登录。&LT/p>\n&LTp>增加了开发相关的服务 Gitea + Drone CI + SonarQube，做了一套简单的 DevSecOps 工具链。&LT/p>\n&LTp>整了一个新的工控机做为软路由。&LT/p>\n&LTp>下面是现在的简单截图。&LT/p>\n&LTp>&LTimg src=\"https://eindex.me/cn/posts/my-homelab-introduce/./authentik.png\" alt=\"\" />&LT/p>\n&LTp>当然还有一些服务是在命令行中运行的，就没有在此展示了。&LT/p>\n&LTh3 id=\"wei-lai\">未来&LT/h3>\n&LTp>设备方面，想采购一个更加正规的设备如 HPE MicroServer Gen10 Plus 或其他小型的服务器，来提供更多的性能，满足我对安静且占地小的需求。增加一些 AP，提高上网体验。&LT/p>\n&LTp>服务方面，现在正在研究如何合理的托管 Beancount 的 webui Fava，如果不知道啥事 Beancount 可以看这篇&LTa href=\"https://eindex.me/cn/posts/beancount-introduce/\">《复式记账工具 Beancount》&LT/a>。\n考虑增加一个 8n8,来做服务建的桥梁，减少自己写代码实现的工作量。还期望弄个 code-server，可以随时随地有个可用的开发环境。\n增加一个 Clash 服务在 HomeLab 中，能快速的调整整个局域网中的上网规则。&LT/p>\n&LTh2 id=\"homelab-dui-wo-de-jie-zhi\">HomeLab 对我的价值&LT/h2>\n&LTh3 id=\"well\">Well&LT/h3>\n&LTp>HomeLab 的存在首先是解决了我数据存储方面的问题，现在可用的存储空间大约有 8 ～ 10TB 左右，用来存储我的照片，追剧，电影，备份，代码库等，还是有一些余量的。在购买数码产品的时候，可以放心大胆的使用最小的存储空间。&LT/p>\n&LTp>其次，如果我需要写代码，我可以在自己家里运行 CI/CD，反正设备已经是花了电费了，就不需要花时间研究如何白嫖，Github Action 或者是 Circle CI 了。&LTdel>当然现在还嫖着。&LT/del>&LT/p>\n&LTp>再是可以进行快速的实验，可以用来实践 Kubernetes，terraform 等 CNCF 相关服务，对我考 CKA 应该也是有所帮助的。&LT/p>\n&LTp>最后是节约了时间，在有很多自动化服务的加持之下，我可以集中更多时间和精力去做自己想做的事情。&LT/p>\n&LTh3 id=\"less-well\">Less Well&LT/h3>\n&LTp>性能拉胯，毕竟是在家跑服务，也做不到网上那些大佬，动不动整个机柜啥的，所以为了省电，性能优点拉胯。好在可以靠时间来拉平。&LT/p>\n&LTp>搭建 HomeLab 里的各种服务，还是挺花时间的，好不容易节约的那些时间，都投入回去了 🥹。&LT/p>\n&LTh2 id=\"jie-yu\">结语&LT/h2>\n&LTp>这个东西真的很有趣，如果对 Self-Hosted 服务或者家庭实验室有兴趣，非常推荐整一个玩玩，当然最好是迭代着来，也许可以从树莓派开始？&LT/p>\n&LTp>如果有对本文内容相关问题，欢迎在评论区与我探讨。&LT/p>\n","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/","slug":"my-homelab-introduce","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"My HomeLab","description":null,"updated":null,"date":"2022-05-15T23:39:46+08:00","year":2022,"month":5,"day":15,"taxonomies":{"tags":["K3S","Proxmox VE","Self-Hosted","Docker"]},"extra":{},"path":"/cn/posts/my-homelab-introduce/","components":["cn","posts","my-homelab-introduce"],"summary":"&LTp>这篇文章将会介绍一下我的 HomeLab。&LT/p>\n&LTp>为什么会建设 HomeLab，它给我带来了什么价值？以及为什么是现在的结构，解决了什么问题。&LT/p>\n","toc":[{"level":2,"id":"jie-yuan","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#jie-yuan","title":"结缘","children":[]},{"level":2,"id":"shi-jian-xian","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#shi-jian-xian","title":"时间线","children":[{"level":3,"id":"zao-qi","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#zao-qi","title":"早期","children":[]},{"level":3,"id":"geng-duo-xu-qiu","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#geng-duo-xu-qiu","title":"更多需求","children":[]},{"level":3,"id":"xu-ni-hua-yu-k3s","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#xu-ni-hua-yu-k3s","title":"虚拟化 与 K3S","children":[]}]},{"level":2,"id":"homelab-de-xian-zhuang","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#homelab-de-xian-zhuang","title":"HomeLab 的 现状","children":[{"level":3,"id":"wei-lai","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#wei-lai","title":"未来","children":[]}]},{"level":2,"id":"homelab-dui-wo-de-jie-zhi","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#homelab-dui-wo-de-jie-zhi","title":"HomeLab 对我的价值","children":[{"level":3,"id":"well","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#well","title":"Well","children":[]},{"level":3,"id":"less-well","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#less-well","title":"Less Well","children":[]}]},{"level":2,"id":"jie-yu","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#jie-yu","title":"结语","children":[]}],"word_count":1600,"reading_time":8,"assets":["/posts/my-homelab-introduce/authentik.png"],"draft":false,"lang":"cn","lower":{"relative_path":"posts/webmentions.cn.md","content":"&LTblockquote>\n&LTp>本文通过 DeepL 翻译自 &LTa href=\"https://eindex.me/posts/webmentions/\">Joining the Webmentions Community: A Beginner's Guide&LT/a>&LT/p>\n&LT/blockquote>\n&LTp>最近我看到了&LTa rel=\"nofollow\" href=\"https://www.owenyoung.com/en/blog/indieweb/\">Now, I'm in IndieWeb?&LT/a>，了解到了 Webmentions。我发现这个概念非常有趣，于是决定加入我的博客的 Webmentions 社区。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"shi-yao-shi-webmentions\">什么是 Webmentions&LT/h2>\n&LTp>Webmentions 是一种网站相互交流的方式，当它们链接到对方的内容时，可以通知对方。这使得网络社区的互动性更强，联系更紧密，网站可以与对方和用户实时互动。&LT/p>\n&LTh2 id=\"wo-ru-he-jia-ru-webmentions-she-qu\">我如何加入 Webmentions 社区？&LT/h2>\n&LTp>要加入 Webmentions 社区，并开始接收其他网站链接到你的内容时的通知，你需要采取以下步骤。&LT/p>\n&LTol>\n&LTli>\n&LTp>在 Webmentions 服务中注册你的网站，比如 webmention.io。这将使你的网站能够接收来自其他网站的网络提示，也使你能够在链接到其他网站时向它们发送网络提示。要做到这一点，你可以在你的网站上添加以下 HTML 代码。&LT/p>\n&LTpre data-lang=\"HTML\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-HTML \">&LTcode class=\"language-HTML\" data-lang=\"HTML\">&LTspan>&amplt;&LT/span>&LTspan style=\"color:#f92672;\">link &LT/span>&LTspan style=\"color:#a6e22e;\">rel&LT/span>&LTspan>=&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;webmention&ampquot; &LT/span>&LTspan style=\"color:#a6e22e;\">href&LT/span>&LTspan>=&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;https://webmention.io/eindex.me/webmention&ampquot; &LT/span>&LTspan>/&ampgt;\n&LT/span>&LTspan>&amplt;&LT/span>&LTspan style=\"color:#f92672;\">link &LT/span>&LTspan style=\"color:#a6e22e;\">rel&LT/span>&LTspan>=&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;pingback&ampquot; &LT/span>&LTspan style=\"color:#a6e22e;\">href&LT/span>&LTspan>=&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;https://webmention.io/eindex.me/xmlrpc&ampquot; &LT/span>&LTspan>/&ampgt;\n&LT/span>&LT/code>&LT/pre>\n&LT/li>\n&LTli>\n&LTp>确保你的网站遵循&LTa rel=\"nofollow\" href=\"https://microformats.org/\">microformats2&LT/a>标准。这可能需要一些努力，但这对于确保你的网站能够正确地发送和接收 Webmentions 是很重要的。你可以使用&LTa rel=\"nofollow\" href=\"https://indiewebify.me/\">IndieWebify.Me&LT/a>这样的工具来检查你的网站是否正确使用 microformats2。你也可以使用像&LTcode>ngrok&LT/code>或&LTcode>cloudflare tunnel&LT/code>这样的工具，在本地调试你的网站，这样可以节省时间。&LT/p>\n&LT/li>\n&LTli>\n&LTp>开始在你的网站上发送和接收 Webmentions。一旦你的网站在 Webmentions 服务中注册，并且你已经测试了你的实施，你就可以开始在你的网站上使用 Webmentions 来通知他们你的链接。而每当别人链接到你的网站时，你可以收到 webmention 通知，并在你的网站上显示该链接。&LT/p>\n&LT/li>\n&LTli>\n&LTp>考虑使用 Github 行动和 JavaScript 脚本等工具来自动发送和接收 Webmentions 的过程。这对静态网站特别有用。例如，你可以在 Github 上的&LTcode>webmentions&LT/code>分支中存储你的 Webmentions，并使用像这样的工作流文件来获取 Webmentions 和发送你的 Webmentions，你也可以查看我的&LTa rel=\"nofollow\" href=\"https://github.com/EINDEX/blog/blob/main/.github/workflows/fetch-webmentions.yaml\">实现&LT/a>这个博客的。&LT/p>\n&LTpre data-lang=\"yaml\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-yaml \">&LTcode class=\"language-yaml\" data-lang=\"yaml\">&LTspan style=\"color:#f92672;\">name&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#e6db74;\">Fetch Webmentions\n&LT/span>&LTspan style=\"color:#ae81ff;\">on&LT/span>&LTspan>:\n&LT/span>&LTspan style=\"color:#f92672;\">schedule&LT/span>&LTspan>:\n&LT/span>&LTspan> - &LT/span>&LTspan style=\"color:#f92672;\">cron&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;0 0 * * *&ampquot;\n&LT/span>&LTspan style=\"color:#f92672;\">jobs&LT/span>&LTspan>:\n&LT/span>&LTspan style=\"color:#f92672;\">fetch_webmentions&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">runs-on&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#e6db74;\">ubuntu-latest\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">steps&LT/span>&LTspan>:\n&LT/span>&LTspan> - &LT/span>&LTspan style=\"color:#f92672;\">uses&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#e6db74;\">actions/checkout@v2\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">with&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">ref&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#e6db74;\">webmentions\n&LT/span>&LTspan> - &LT/span>&LTspan style=\"color:#f92672;\">name&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#e6db74;\">Fetch Webmentions\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">run&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#e6db74;\">node pipeline/webmentions.js\n&LT/span>&LTspan> - &LT/span>&LTspan style=\"color:#f92672;\">name&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#e6db74;\">Send Webmetnions\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">run&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#e6db74;\">node pipeline/send-webmentions.js\n&LT/span>&LT/code>&LT/pre>\n&LT/li>\n&LT/ol>\n&LTp>按照这些步骤，你可以加入 Webmentions 社区，并开始享受与其他网站及其用户进行更多互动和参与性交流的好处。&LT/p>\n&LTh2 id=\"wei-shi-yao-yao-jia-ru-webmentions-she-qu\">为什么要加入 Webmentions 社区？&LT/h2>\n&LTp>加入 Webmentions 社区并在您的网站上实施 Webmentions 有许多潜在的好处。一些潜在的好处包括。&LT/p>\n&LTul>\n&LTli>\n&LTp>增加与其他网站及其用户的接触和联系。通过在其他网站链接到你的内容时收到通知，并在你链接到其他网站时能够通知其他网站，你可以培养一个更加互动和连接的在线社区。这可以带来更多的流量，甚至有可能带来更多的合作和参与机会。&LT/p>\n&LT/li>\n&LTli>\n&LTp>改善与其他网站的沟通和协作。 Webmentions 允许网站之间进行实时沟通，这对协调工作和保持 Webmentions 社区的最新发展很有帮助。&LT/p>\n&LT/li>\n&LTli>\n&LTp>参与不断发展的网络生态系统的能力。 Webmentions 是 &ampquot;Web 3.0 &ampquot;的一种形式，与过去相比，网站之间的相互联系和互动更多。通过加入 Webmentions 社区，你可以成为这个不断发展的网络生态系统的一部分，并有可能从出现的新机会和联系中受益。&LT/p>\n&LT/li>\n&LT/ul>\n&LTp>当然，加入 Webmentions 社区确实需要一些努力和资源，所以它不一定是每个人的正确决定。但对许多网站所有者来说，加入 Webmentions 社区的潜在好处可能会超过挑战，使其成为一项值得的投资。&LT/p>\n&LTh2 id=\"zong-jie\">总结&LT/h2>\n&LTp>在这个初学者指南中，我们已经介绍了加入 Webmentions 社区和在网站上实施 Webmentions 的步骤。按照这些步骤，你可以加入 Webmentions 社区，并开始享受与其他网站及其用户进行更多互动和参与性交流的好处。虽然加入 Webmentions 社区需要一些挑战和资源，但对许多网站所有者来说，潜在的好处可能超过了挑战。&LT/p>\n","permalink":"https://eindex.me/cn/posts/webmentions/","slug":"webmentions","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"加入 Webmentions 社区: 新手指导","description":"了解如何加入 Webmentions 社区，提高你的博客与其他网站及其用户的互动性和参与度。","updated":"2022-12-05T23:48:50+08:00","date":"2022-11-06T17:44:50+08:00","year":2022,"month":11,"day":6,"taxonomies":{"series":["blog-enhance-plan"],"tags":["Webmentions","Community","Beginner's Guide","Indie Web","Microformats2","Engagement","Connectivity","Github Actions","JavaScript"]},"extra":{},"path":"/cn/posts/webmentions/","components":["cn","posts","webmentions"],"summary":"&LTblockquote>\n&LTp>本文通过 DeepL 翻译自 &LTa href=\"https://eindex.me/posts/webmentions/\">Joining the Webmentions Community: A Beginner's Guide&LT/a>&LT/p>\n&LT/blockquote>\n&LTp>最近我看到了&LTa rel=\"nofollow\" href=\"https://www.owenyoung.com/en/blog/indieweb/\">Now, I'm in IndieWeb?&LT/a>，了解到了 Webmentions。我发现这个概念非常有趣，于是决定加入我的博客的 Webmentions 社区。&LT/p>\n","toc":[{"level":2,"id":"shi-yao-shi-webmentions","permalink":"https://eindex.me/cn/posts/webmentions/#shi-yao-shi-webmentions","title":"什么是 Webmentions","children":[]},{"level":2,"id":"wo-ru-he-jia-ru-webmentions-she-qu","permalink":"https://eindex.me/cn/posts/webmentions/#wo-ru-he-jia-ru-webmentions-she-qu","title":"我如何加入 Webmentions 社区？","children":[]},{"level":2,"id":"wei-shi-yao-yao-jia-ru-webmentions-she-qu","permalink":"https://eindex.me/cn/posts/webmentions/#wei-shi-yao-yao-jia-ru-webmentions-she-qu","title":"为什么要加入 Webmentions 社区？","children":[]},{"level":2,"id":"zong-jie","permalink":"https://eindex.me/cn/posts/webmentions/#zong-jie","title":"总结","children":[]}],"word_count":1128,"reading_time":6,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/webmentions/","title":"加入 Webmentions 社区: 新手指导","path":"/home/runner/work/blog/blog/content/posts/webmentions.cn.md"},{"lang":"en","permalink":"https://eindex.me/posts/webmentions/","title":"Joining the Webmentions Community: A Beginner's Guide","path":"/home/runner/work/blog/blog/content/posts/webmentions.md"}],"backlinks":[]},"higher":{"relative_path":"posts/introspection.cn.md","content":"&LTh2 id=\"yuan-qi\">缘起&LT/h2>\n&LTp>事情还得从一次因防疫政策变化导致的“特殊”出差说起。&LT/p>\n&LTp>人在远离舒适圈的时候，总会经历种种困难与不适，噪音、拥挤、打卡、隔离、被缩短的工期、不合理的政策……都让“出差”成为了一项挑战，而“疫情”和“三年第一次出差”，这两重因素的叠加，更让我对这次出差中将面临的未知感到恐惧，这种恐惧甚至大于好奇。&LT/p>\n&LTp>下面我会尝试用“自我问答”的方式，记录这次出差的体验与感想。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"zi-wen\">自问&LT/h2>\n&LTh3 id=\"yi-shi-zhu-xing-shang-you-shi-yao-ti-yan\">衣食住行上有什么体验？&LT/h3>\n&LTp>衣：没啥好说的，我在出发前带了一些换洗衣服，还在当地“程序员服装供应商”之一的优衣库那的采购了一点新的。&LT/p>\n&LTp>食：我吃不惯，太辣，成都人的口味真的好重。&LT/p>\n&LTp>住：我隔离的时候住在宿舍里，嗯，怎么说呢。除了床之外，其他都挺好，床就是块板子，让腰疼的我“疼上加疼”😭。后几天的隔离时间里，我都睡沙发了，让我惊讶的是，沙发居然比床睡着舒服。再后面就住进酒店了，成都这边水质不好，我洗澡的时候有很严重地过敏反应。&LT/p>\n&LTp>行：我几十年都没坐过飞机了，这次坐飞机突然发现，原来坐飞机这么挤，这么吵。安检的时候，安检小哥恨不得要把你“扒光”。我很讨厌这种感觉，但谁让飞机飞得快呢。之后会再和坐高铁需要的时间做比较，以后可能会倾向于总时长更短的。出门在外，“失去了”家里的“小破车”，只能选公共交通或者的士，这让我的行动范围变小了。&LT/p>\n&LTp>更新: 返程时乘坐的是&LTcode>空客321&LT/code>,去程坐的是&LTcode>波音737-800&LT/code>，都是经济舱，空客体验完爆波音。&LT/p>\n&LTp>成都街上绿化做得特别好，到处都有鸟叫声，而且大多数马路中间都有树，有的人行道上也种了很多树，空气质量也挺好的，就连在其他城市横冲直闯的外卖小哥，在这边也是走路送餐。我住在成都腾讯附近，在住处周围看见了很多互联网公司，相比我的城市来说，成都确实更适合“互联网人”的发展。&LT/p>\n&LTh3 id=\"dao-jin-tian-wei-zhi-dui-zhe-ci-de-chu-chai-you-shi-yao-gan-shou-ma\">到今天为止，对这次的出差有什么感受吗？&LT/h3>\n&LTp>我原来觉得我对很多事情没啥特别的要求，但经过这次出差，我发现我屁事还挺多的。&LT/p>\n&LTp>喝上，要有净水器，还有随时能喝上的新鲜咖啡；工作/学习上需要好的办公椅和升降办公桌；玩上要有4k高色准大彩电和音响系统；吃上得有厨房和不错的厨具，要能做饭，最好能有洗碗机。另外，窗外要有不错的风景，洗衣机要可以烘干，出门要开车，需要很好的隔音与遮光来保证睡眠，最重要的是，床要有中高档床垫。&LT/p>\n&LTp>我当然理解不是所有人都需要这些所谓的“舒适条件”，但它们对我来说是不可缺少的。尤其是对于第一次出差、第一次乘飞机、第一次被隔离的我来说，我并没有做好失去它们的准备，但现实总是让人猝不及防，而离开了家的我，也只能接受这个现实。&LT/p>\n&LTp>这些经历使得我更加理解和认可一个广告理念：卖给你的不是东西，而是一种生活方式。&LT/p>\n&LTh3 id=\"you-cai-qu-shi-yao-cuo-shi-huan-jie-tong-ku-huo-zhe-gai-shan-xian-zhuang-ma\">有采取什么措施缓解“痛苦”或者改善现状吗？&LT/h3>\n&LTp>当然是有的，对于舒适度上的需求，其实是可以通过一定程度上的锻炼来缓解的，毕竟身体好一点的话，对不同环境的适应能力也要强一点，至少腰不会那么疼。&LT/p>\n&LTp>情绪上，我选择自己烹饪，同时还把大量的精力放在家里的 HomeLab 上，来转移被隔离影响的心情。另外，我也在看电影、上网吐槽，包括我写这篇博客的动机也是为了缓解情绪上的压力。&LT/p>\n&LTp>为了老腰，隔离结束的第一天我就搬到酒店去住了，还去报复性消费了一波。哦，还剪了一个生平最丑（没有之一）的发型。&LT/p>\n&LTh3 id=\"zhi-hou-you-shi-yao-da-suan\">之后有什么打算？&LT/h3>\n&LTp>以后出差前还是得多考虑一下，不能随便答应。一个是因为自己的身体也不太行，另一个是女朋友也不是吃素的，最好还是不要长时间出差了。一个月就很长了。如果是出国，可以另外考虑考虑。&LT/p>\n&LTp>身体上还是要坚持锻炼啊，先减肥再练核心，帮老腰过过难关呀，不能被身体限制住了发展。&LT/p>\n&LTp>工作上还是要找到自己的价值所在，毕竟是我司中国里最年轻（菜）的应用安全专（砖）家，以后怎么发展，是不是应该专注更多的去做自己擅长的事情……都是要思考的&LT/p>\n&LTp>对于我的财务自由计划，现在完成了差不多 1/20，感觉上勉勉强强吧。我之后会用更多的时间去发展一些兴趣爱好，可能也会花更多的精力去开展一下副业吧，公司里的平台还是比较有限。还是得多自力更生啊。&LT/p>\n&LTh2 id=\"hou-ji\">后记&LT/h2>\n&LTp>对我来说，这次出差是一次很坏却也很好的事情，好的方面是，和从前相比，我能更清晰、更坚定地说出我要什么，我想要做什么，能更快地采取行动去实践自己的想法、能在逆境中调整心情、能抗压、能想办法给自己获取资源、能主动和自己的 stakeholders 保持不错的联系。有了更成熟的思维体系，对在控制范围内和不在控制范围内的事情，能更加自如地应对。&LT/p>\n&LTp>不知道心理测量量表还会不会把我放到轻度抑郁症患者范围里。不管如何，有一个成熟的适合自己的思维体系，确实对我的发展有很大助益。&LT/p>\n&LTp>希望以后每年都能有一次类似的经历或者体会，谁又会不渴望变得更高更快更强呢。&LT/p>\n","permalink":"https://eindex.me/cn/posts/introspection/","slug":"introspection","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"反躬自问","description":null,"updated":null,"date":"2022-05-02T17:13:36+08:00","year":2022,"month":5,"day":2,"taxonomies":{"tags":["Introspection"]},"extra":{},"path":"/cn/posts/introspection/","components":["cn","posts","introspection"],"summary":"&LTh2 id=\"yuan-qi\">缘起&LT/h2>\n&LTp>事情还得从一次因防疫政策变化导致的“特殊”出差说起。&LT/p>\n&LTp>人在远离舒适圈的时候，总会经历种种困难与不适，噪音、拥挤、打卡、隔离、被缩短的工期、不合理的政策……都让“出差”成为了一项挑战，而“疫情”和“三年第一次出差”，这两重因素的叠加，更让我对这次出差中将面临的未知感到恐惧，这种恐惧甚至大于好奇。&LT/p>\n&LTp>下面我会尝试用“自我问答”的方式，记录这次出差的体验与感想。&LT/p>\n","toc":[{"level":2,"id":"yuan-qi","permalink":"https://eindex.me/cn/posts/introspection/#yuan-qi","title":"缘起","children":[]},{"level":2,"id":"zi-wen","permalink":"https://eindex.me/cn/posts/introspection/#zi-wen","title":"自问","children":[{"level":3,"id":"yi-shi-zhu-xing-shang-you-shi-yao-ti-yan","permalink":"https://eindex.me/cn/posts/introspection/#yi-shi-zhu-xing-shang-you-shi-yao-ti-yan","title":"衣食住行上有什么体验？","children":[]},{"level":3,"id":"dao-jin-tian-wei-zhi-dui-zhe-ci-de-chu-chai-you-shi-yao-gan-shou-ma","permalink":"https://eindex.me/cn/posts/introspection/#dao-jin-tian-wei-zhi-dui-zhe-ci-de-chu-chai-you-shi-yao-gan-shou-ma","title":"到今天为止，对这次的出差有什么感受吗？","children":[]},{"level":3,"id":"you-cai-qu-shi-yao-cuo-shi-huan-jie-tong-ku-huo-zhe-gai-shan-xian-zhuang-ma","permalink":"https://eindex.me/cn/posts/introspection/#you-cai-qu-shi-yao-cuo-shi-huan-jie-tong-ku-huo-zhe-gai-shan-xian-zhuang-ma","title":"有采取什么措施缓解“痛苦”或者改善现状吗？","children":[]},{"level":3,"id":"zhi-hou-you-shi-yao-da-suan","permalink":"https://eindex.me/cn/posts/introspection/#zhi-hou-you-shi-yao-da-suan","title":"之后有什么打算？","children":[]}]},{"level":2,"id":"hou-ji","permalink":"https://eindex.me/cn/posts/introspection/#hou-ji","title":"后记","children":[]}],"word_count":1648,"reading_time":9,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/introspection/","title":"反躬自问","path":"/home/runner/work/blog/blog/content/posts/introspection.cn.md"}],"backlinks":[]},"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/","title":"My HomeLab","path":"/home/runner/work/blog/blog/content/posts/my-homelab-introduce/index.cn.md"}],"backlinks":[]},{"relative_path":"posts/introspection.cn.md","content":"&LTh2 id=\"yuan-qi\">缘起&LT/h2>\n&LTp>事情还得从一次因防疫政策变化导致的“特殊”出差说起。&LT/p>\n&LTp>人在远离舒适圈的时候，总会经历种种困难与不适，噪音、拥挤、打卡、隔离、被缩短的工期、不合理的政策……都让“出差”成为了一项挑战，而“疫情”和“三年第一次出差”，这两重因素的叠加，更让我对这次出差中将面临的未知感到恐惧，这种恐惧甚至大于好奇。&LT/p>\n&LTp>下面我会尝试用“自我问答”的方式，记录这次出差的体验与感想。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"zi-wen\">自问&LT/h2>\n&LTh3 id=\"yi-shi-zhu-xing-shang-you-shi-yao-ti-yan\">衣食住行上有什么体验？&LT/h3>\n&LTp>衣：没啥好说的，我在出发前带了一些换洗衣服，还在当地“程序员服装供应商”之一的优衣库那的采购了一点新的。&LT/p>\n&LTp>食：我吃不惯，太辣，成都人的口味真的好重。&LT/p>\n&LTp>住：我隔离的时候住在宿舍里，嗯，怎么说呢。除了床之外，其他都挺好，床就是块板子，让腰疼的我“疼上加疼”😭。后几天的隔离时间里，我都睡沙发了，让我惊讶的是，沙发居然比床睡着舒服。再后面就住进酒店了，成都这边水质不好，我洗澡的时候有很严重地过敏反应。&LT/p>\n&LTp>行：我几十年都没坐过飞机了，这次坐飞机突然发现，原来坐飞机这么挤，这么吵。安检的时候，安检小哥恨不得要把你“扒光”。我很讨厌这种感觉，但谁让飞机飞得快呢。之后会再和坐高铁需要的时间做比较，以后可能会倾向于总时长更短的。出门在外，“失去了”家里的“小破车”，只能选公共交通或者的士，这让我的行动范围变小了。&LT/p>\n&LTp>更新: 返程时乘坐的是&LTcode>空客321&LT/code>,去程坐的是&LTcode>波音737-800&LT/code>，都是经济舱，空客体验完爆波音。&LT/p>\n&LTp>成都街上绿化做得特别好，到处都有鸟叫声，而且大多数马路中间都有树，有的人行道上也种了很多树，空气质量也挺好的，就连在其他城市横冲直闯的外卖小哥，在这边也是走路送餐。我住在成都腾讯附近，在住处周围看见了很多互联网公司，相比我的城市来说，成都确实更适合“互联网人”的发展。&LT/p>\n&LTh3 id=\"dao-jin-tian-wei-zhi-dui-zhe-ci-de-chu-chai-you-shi-yao-gan-shou-ma\">到今天为止，对这次的出差有什么感受吗？&LT/h3>\n&LTp>我原来觉得我对很多事情没啥特别的要求，但经过这次出差，我发现我屁事还挺多的。&LT/p>\n&LTp>喝上，要有净水器，还有随时能喝上的新鲜咖啡；工作/学习上需要好的办公椅和升降办公桌；玩上要有4k高色准大彩电和音响系统；吃上得有厨房和不错的厨具，要能做饭，最好能有洗碗机。另外，窗外要有不错的风景，洗衣机要可以烘干，出门要开车，需要很好的隔音与遮光来保证睡眠，最重要的是，床要有中高档床垫。&LT/p>\n&LTp>我当然理解不是所有人都需要这些所谓的“舒适条件”，但它们对我来说是不可缺少的。尤其是对于第一次出差、第一次乘飞机、第一次被隔离的我来说，我并没有做好失去它们的准备，但现实总是让人猝不及防，而离开了家的我，也只能接受这个现实。&LT/p>\n&LTp>这些经历使得我更加理解和认可一个广告理念：卖给你的不是东西，而是一种生活方式。&LT/p>\n&LTh3 id=\"you-cai-qu-shi-yao-cuo-shi-huan-jie-tong-ku-huo-zhe-gai-shan-xian-zhuang-ma\">有采取什么措施缓解“痛苦”或者改善现状吗？&LT/h3>\n&LTp>当然是有的，对于舒适度上的需求，其实是可以通过一定程度上的锻炼来缓解的，毕竟身体好一点的话，对不同环境的适应能力也要强一点，至少腰不会那么疼。&LT/p>\n&LTp>情绪上，我选择自己烹饪，同时还把大量的精力放在家里的 HomeLab 上，来转移被隔离影响的心情。另外，我也在看电影、上网吐槽，包括我写这篇博客的动机也是为了缓解情绪上的压力。&LT/p>\n&LTp>为了老腰，隔离结束的第一天我就搬到酒店去住了，还去报复性消费了一波。哦，还剪了一个生平最丑（没有之一）的发型。&LT/p>\n&LTh3 id=\"zhi-hou-you-shi-yao-da-suan\">之后有什么打算？&LT/h3>\n&LTp>以后出差前还是得多考虑一下，不能随便答应。一个是因为自己的身体也不太行，另一个是女朋友也不是吃素的，最好还是不要长时间出差了。一个月就很长了。如果是出国，可以另外考虑考虑。&LT/p>\n&LTp>身体上还是要坚持锻炼啊，先减肥再练核心，帮老腰过过难关呀，不能被身体限制住了发展。&LT/p>\n&LTp>工作上还是要找到自己的价值所在，毕竟是我司中国里最年轻（菜）的应用安全专（砖）家，以后怎么发展，是不是应该专注更多的去做自己擅长的事情……都是要思考的&LT/p>\n&LTp>对于我的财务自由计划，现在完成了差不多 1/20，感觉上勉勉强强吧。我之后会用更多的时间去发展一些兴趣爱好，可能也会花更多的精力去开展一下副业吧，公司里的平台还是比较有限。还是得多自力更生啊。&LT/p>\n&LTh2 id=\"hou-ji\">后记&LT/h2>\n&LTp>对我来说，这次出差是一次很坏却也很好的事情，好的方面是，和从前相比，我能更清晰、更坚定地说出我要什么，我想要做什么，能更快地采取行动去实践自己的想法、能在逆境中调整心情、能抗压、能想办法给自己获取资源、能主动和自己的 stakeholders 保持不错的联系。有了更成熟的思维体系，对在控制范围内和不在控制范围内的事情，能更加自如地应对。&LT/p>\n&LTp>不知道心理测量量表还会不会把我放到轻度抑郁症患者范围里。不管如何，有一个成熟的适合自己的思维体系，确实对我的发展有很大助益。&LT/p>\n&LTp>希望以后每年都能有一次类似的经历或者体会，谁又会不渴望变得更高更快更强呢。&LT/p>\n","permalink":"https://eindex.me/cn/posts/introspection/","slug":"introspection","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"反躬自问","description":null,"updated":null,"date":"2022-05-02T17:13:36+08:00","year":2022,"month":5,"day":2,"taxonomies":{"tags":["Introspection"]},"extra":{},"path":"/cn/posts/introspection/","components":["cn","posts","introspection"],"summary":"&LTh2 id=\"yuan-qi\">缘起&LT/h2>\n&LTp>事情还得从一次因防疫政策变化导致的“特殊”出差说起。&LT/p>\n&LTp>人在远离舒适圈的时候，总会经历种种困难与不适，噪音、拥挤、打卡、隔离、被缩短的工期、不合理的政策……都让“出差”成为了一项挑战，而“疫情”和“三年第一次出差”，这两重因素的叠加，更让我对这次出差中将面临的未知感到恐惧，这种恐惧甚至大于好奇。&LT/p>\n&LTp>下面我会尝试用“自我问答”的方式，记录这次出差的体验与感想。&LT/p>\n","toc":[{"level":2,"id":"yuan-qi","permalink":"https://eindex.me/cn/posts/introspection/#yuan-qi","title":"缘起","children":[]},{"level":2,"id":"zi-wen","permalink":"https://eindex.me/cn/posts/introspection/#zi-wen","title":"自问","children":[{"level":3,"id":"yi-shi-zhu-xing-shang-you-shi-yao-ti-yan","permalink":"https://eindex.me/cn/posts/introspection/#yi-shi-zhu-xing-shang-you-shi-yao-ti-yan","title":"衣食住行上有什么体验？","children":[]},{"level":3,"id":"dao-jin-tian-wei-zhi-dui-zhe-ci-de-chu-chai-you-shi-yao-gan-shou-ma","permalink":"https://eindex.me/cn/posts/introspection/#dao-jin-tian-wei-zhi-dui-zhe-ci-de-chu-chai-you-shi-yao-gan-shou-ma","title":"到今天为止，对这次的出差有什么感受吗？","children":[]},{"level":3,"id":"you-cai-qu-shi-yao-cuo-shi-huan-jie-tong-ku-huo-zhe-gai-shan-xian-zhuang-ma","permalink":"https://eindex.me/cn/posts/introspection/#you-cai-qu-shi-yao-cuo-shi-huan-jie-tong-ku-huo-zhe-gai-shan-xian-zhuang-ma","title":"有采取什么措施缓解“痛苦”或者改善现状吗？","children":[]},{"level":3,"id":"zhi-hou-you-shi-yao-da-suan","permalink":"https://eindex.me/cn/posts/introspection/#zhi-hou-you-shi-yao-da-suan","title":"之后有什么打算？","children":[]}]},{"level":2,"id":"hou-ji","permalink":"https://eindex.me/cn/posts/introspection/#hou-ji","title":"后记","children":[]}],"word_count":1648,"reading_time":9,"assets":[],"draft":false,"lang":"cn","lower":{"relative_path":"posts/my-homelab-introduce/index.cn.md","content":"&LTp>这篇文章将会介绍一下我的 HomeLab。&LT/p>\n&LTp>为什么会建设 HomeLab，它给我带来了什么价值？以及为什么是现在的结构，解决了什么问题。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"jie-yuan\">结缘&LT/h2>\n&LTp>在 2017 年末，我遇到一个艰难的问题，我有很多设备，小米手机，iPad，MacBook Pro，之前用的 Resilio Sync(原 BTSync)，也需要翻墙才能同步文件。 Google Photos 在墙内的使用体验也日渐下降。&LT/p>\n&LTp>机缘巧合之下，Synology 出现在我的面前。一拍脑袋，搞了一个 Synology 218+。&LT/p>\n&LTp>单纯的我当时只是想同步一下文件，给 MacBook 加上 Time Machine，并没想道这是我和 HomeLab 缘分的开始。&LT/p>\n&LTh2 id=\"shi-jian-xian\">时间线&LT/h2>\n&LTh3 id=\"zao-qi\">早期&LT/h3>\n&LTp>主要是使用一些 Synology 原生功能，如 Moments，Video，Drive，Note 等，然后在 Docker 里跑了一两个简单的服务。单纯就用来备份照片，数据，剪裁网页啥的。&LT/p>\n&LTp>维护成本也很低。直到某一天我发现 &LTa rel=\"nofollow\" href=\"https://synocommunity.com/\">Synology Community&LT/a>，这里面有很多奇奇怪怪的 package，稍微研究了一下，就打开了新世界的大门。&LT/p>\n&LTp>这里面有各种各样的 Self-hosted 服务，多媒体自动化，下载的，书籍管理，文件同步，RSS 和一些 DSM 并不自带的系统命令。&LT/p>\n&LTp>迫于追剧的需求，我当在群晖里增加了多媒体自动化没，当时用的 Jackett，Sonarr，Radarr，Emby 一套，用来自动下载，刮削，看视频，看电影。同时将服务管理到 docker-compose 里。&LT/p>\n&LTh3 id=\"geng-duo-xu-qiu\">更多需求&LT/h3>\n&LTp>由于换到新公司，工作压力没有之前那么大。有更多的时间去折腾 HomeLab，先是用了个电脑搭建了 OMV，直到某天 U 盘系统崩了，于是心一横买了稳定且性能更强的 Synology 920+。&LT/p>\n&LTp>这个阶段开始使用 Traefik 做为 Ingress，所有服务有一个中心化的入口，再也不用背各种端口号了。&LT/p>\n&LTp>还引入了一些新服务，Organizr 当作 application dashboard，Home Assistant 作为家庭自动化中枢，Bitwarden 作为密码管理器，qBittorrent 用来下载，Bazarr 用来寻找字幕，Miniflux 作为 RSS 阅读器。&LT/p>\n&LTh3 id=\"xu-ni-hua-yu-k3s\">虚拟化 与 K3S&LT/h3>\n&LTp>在折腾的过程中，服务越来越多，可维护性与可见性快速下降，同时性能也快接触到 D920+ 的瓶颈。&LT/p>\n&LTp>为了一口气解决这些问题，我希望找到一种把程序和数据分开，计算和控制分开，写的配置最好是可以方便的代码化，可以快速恢复。&LT/p>\n&LTp>在一些调研之后，采用 K3S in Proxmox VE 的模式去运行。即是在 PVE 里运行一个或多个 K3S 的虚拟机。组成一个 K3S 集群。这个方案其实很接近 &LTcode>TrueNAS SCALE&LT/code> 想法，奈何我想让我可以在 PVE 里可以快速的启动一个 X86-64 的 linux lxc 环境，进行快速的测试，而那是 TrueNAS SCALE 还在测试阶段，唉～&LT/p>\n&LTh2 id=\"homelab-de-xian-zhuang\">HomeLab 的 现状&LT/h2>\n&LTp>现在所有的服务都 PVE 服务器的 K3S 里，数据通过 nfs 存放在群晖中。&LT/p>\n&LTp>现在运行了更多的服务，媒体自动化方面增加了 Overseerr，Servrr 新出的 Prowlarr，EMBY 替换成了 Plex；阅读方面增加了 Rsshub，Miniflux 替换成了 FreshRSS。&LT/p>\n&LTp>关于可见性方面，增加了 Graylog 作为日志中心（有点重，还在寻找替代品或者给服务器增加点性能），HealthChecks 用来查看定时任务的更新情况。&LT/p>\n&LTp>可维护性方面，增加了 Keel 自动化更新服务，增加了 RocketChat 作为 ChatOps 的入口。&LT/p>\n&LTp>安全方面 Authentik 做了集中的认证中心，虽然各个服务对 SSO 的支持并不完善，如果不支持 SSO 会在放在 SSO 后面要求再次登录。&LT/p>\n&LTp>增加了开发相关的服务 Gitea + Drone CI + SonarQube，做了一套简单的 DevSecOps 工具链。&LT/p>\n&LTp>整了一个新的工控机做为软路由。&LT/p>\n&LTp>下面是现在的简单截图。&LT/p>\n&LTp>&LTimg src=\"https://eindex.me/cn/posts/my-homelab-introduce/./authentik.png\" alt=\"\" />&LT/p>\n&LTp>当然还有一些服务是在命令行中运行的，就没有在此展示了。&LT/p>\n&LTh3 id=\"wei-lai\">未来&LT/h3>\n&LTp>设备方面，想采购一个更加正规的设备如 HPE MicroServer Gen10 Plus 或其他小型的服务器，来提供更多的性能，满足我对安静且占地小的需求。增加一些 AP，提高上网体验。&LT/p>\n&LTp>服务方面，现在正在研究如何合理的托管 Beancount 的 webui Fava，如果不知道啥事 Beancount 可以看这篇&LTa href=\"https://eindex.me/cn/posts/beancount-introduce/\">《复式记账工具 Beancount》&LT/a>。\n考虑增加一个 8n8,来做服务建的桥梁，减少自己写代码实现的工作量。还期望弄个 code-server，可以随时随地有个可用的开发环境。\n增加一个 Clash 服务在 HomeLab 中，能快速的调整整个局域网中的上网规则。&LT/p>\n&LTh2 id=\"homelab-dui-wo-de-jie-zhi\">HomeLab 对我的价值&LT/h2>\n&LTh3 id=\"well\">Well&LT/h3>\n&LTp>HomeLab 的存在首先是解决了我数据存储方面的问题，现在可用的存储空间大约有 8 ～ 10TB 左右，用来存储我的照片，追剧，电影，备份，代码库等，还是有一些余量的。在购买数码产品的时候，可以放心大胆的使用最小的存储空间。&LT/p>\n&LTp>其次，如果我需要写代码，我可以在自己家里运行 CI/CD，反正设备已经是花了电费了，就不需要花时间研究如何白嫖，Github Action 或者是 Circle CI 了。&LTdel>当然现在还嫖着。&LT/del>&LT/p>\n&LTp>再是可以进行快速的实验，可以用来实践 Kubernetes，terraform 等 CNCF 相关服务，对我考 CKA 应该也是有所帮助的。&LT/p>\n&LTp>最后是节约了时间，在有很多自动化服务的加持之下，我可以集中更多时间和精力去做自己想做的事情。&LT/p>\n&LTh3 id=\"less-well\">Less Well&LT/h3>\n&LTp>性能拉胯，毕竟是在家跑服务，也做不到网上那些大佬，动不动整个机柜啥的，所以为了省电，性能优点拉胯。好在可以靠时间来拉平。&LT/p>\n&LTp>搭建 HomeLab 里的各种服务，还是挺花时间的，好不容易节约的那些时间，都投入回去了 🥹。&LT/p>\n&LTh2 id=\"jie-yu\">结语&LT/h2>\n&LTp>这个东西真的很有趣，如果对 Self-Hosted 服务或者家庭实验室有兴趣，非常推荐整一个玩玩，当然最好是迭代着来，也许可以从树莓派开始？&LT/p>\n&LTp>如果有对本文内容相关问题，欢迎在评论区与我探讨。&LT/p>\n","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/","slug":"my-homelab-introduce","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"My HomeLab","description":null,"updated":null,"date":"2022-05-15T23:39:46+08:00","year":2022,"month":5,"day":15,"taxonomies":{"tags":["K3S","Proxmox VE","Self-Hosted","Docker"]},"extra":{},"path":"/cn/posts/my-homelab-introduce/","components":["cn","posts","my-homelab-introduce"],"summary":"&LTp>这篇文章将会介绍一下我的 HomeLab。&LT/p>\n&LTp>为什么会建设 HomeLab，它给我带来了什么价值？以及为什么是现在的结构，解决了什么问题。&LT/p>\n","toc":[{"level":2,"id":"jie-yuan","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#jie-yuan","title":"结缘","children":[]},{"level":2,"id":"shi-jian-xian","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#shi-jian-xian","title":"时间线","children":[{"level":3,"id":"zao-qi","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#zao-qi","title":"早期","children":[]},{"level":3,"id":"geng-duo-xu-qiu","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#geng-duo-xu-qiu","title":"更多需求","children":[]},{"level":3,"id":"xu-ni-hua-yu-k3s","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#xu-ni-hua-yu-k3s","title":"虚拟化 与 K3S","children":[]}]},{"level":2,"id":"homelab-de-xian-zhuang","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#homelab-de-xian-zhuang","title":"HomeLab 的 现状","children":[{"level":3,"id":"wei-lai","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#wei-lai","title":"未来","children":[]}]},{"level":2,"id":"homelab-dui-wo-de-jie-zhi","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#homelab-dui-wo-de-jie-zhi","title":"HomeLab 对我的价值","children":[{"level":3,"id":"well","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#well","title":"Well","children":[]},{"level":3,"id":"less-well","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#less-well","title":"Less Well","children":[]}]},{"level":2,"id":"jie-yu","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/#jie-yu","title":"结语","children":[]}],"word_count":1600,"reading_time":8,"assets":["/posts/my-homelab-introduce/authentik.png"],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/my-homelab-introduce/","title":"My HomeLab","path":"/home/runner/work/blog/blog/content/posts/my-homelab-introduce/index.cn.md"}],"backlinks":[]},"higher":{"relative_path":"posts/2021-ending.cn.md","content":"&LTp>2021年就要过去了，分享一下我今年都干了些什么事请。\n下面会分为几个维度来说。&LT/p>\n&LTh2 id=\"zhi-ye\">职业&LT/h2>\n&LTp>今年无缝转职成了安全从业人员，学习到了很多 DevSecOps 的知识，同时了解到安全不仅仅是技术开发，有时候流程安全能比应用安全起到更多更大的作用。这里也要感谢一下我的领导们。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>\n&LTp>也更了解如何去和其他人和团队沟通，如何去推动其他人或团队做事情。更高效的完成事情，同时也让双方都觉得比较舒服。以及知道如何去和 stakeholder 沟通，让大家的利益趋向一致。&LT/p>\n&LTp>在内部处理了 Log4J 这个史诗级的漏洞，不仅快速排查/修复问题可能出现的点，而且从多个角度重新审视了整个内部安全流程与 DevSecOps 的设计，收获颇丰。&LT/p>\n&LTh2 id=\"ge-ren\">个人&LT/h2>\n&LTp>今年在自己这边，提升最大的可能是英语了，了解我的人知道我英语很差（高考五十几分）也没过四级，现在可以用英文与外国同事交流，能写长邮件文档。&LT/p>\n&LTp>在光顾了心理医生和自己研究学习之后，知道如何排解内心的情绪，也更了解什么时候需要做什么事情，应该大大降低了我自身的跳楼风险，虽然我不是毛星云那样的天才。&LT/p>\n&LTp>19 年交付的房子，21 年总算是简单搞了一搞，开始住了。&LT/p>\n&LTp>和女朋友分手一次，复合了，应该/也许以后感情会更加稳固。&LT/p>\n&LTp>从不敢/懒得开车变得喜欢开车，虽然会花掉一些精力但确实能节省很多时间。大约开了 1000-2000 公里？一共开车出游两次，装修搬家 N 次，以后再也不是不愿意开车的人了。&LT/p>\n&LTp>交了几个知心朋友。有痛苦有人分担，有快乐可以分享。&LTdel>[doge] 可谓是分布式 EINDEX 支持系统。&LT/del>&LT/p>\n&LTh2 id=\"ji-zhu\">技术&LT/h2>\n&LTp>今年一直打算把 blog 重新弄起来，本来是想用 go 做后端的，前后端展示界面都写好了，后来太懒（管理界面太难做，引入了太多安全与成本问题，收益太低），就做了一个 hugo 的主题，还是半成品之后会继续更新的。&LT/p>\n&LTp>开源方面：参与了一些简单的开源项目，给 homebrew-cask 维护了一些软件包，自己也学习了 Github Action，还写了一个 leetcode-report，主要都是工具方面的。哦，还有现在这个 hugo 主题也是开源的。虽然还没有人用，哈哈。&LT/p>\n&LTp>安全方面：学了一些渗透测试的知识，主要在 PentestLab 上，刷了一百五十多题。&LT/p>\n&LTp>编码方面：前端写的更好了 doge，给自己写了一些 Golang/Python 的代码，写了一些脚本自动化的做安全检测（为了摸鱼，结果都开会去了）。&LT/p>\n&LTp>除此之外，还做了一个自用的 docker-compose 合集，包括密码管理软件 vaultwarden，观影套装 Plex + Sonarr + Radarr + Lidarr + Prowlarr + bazarr + qBT + Trakt 涵盖下载，字母，刮削，播放，观影记录同步。&LT/p>\n&LTh2 id=\"she-ying\">摄影&LT/h2>\n&LTp>出去玩了几次，拍了几张自己非常满意的风景照片，车果然是摄影最重要的外设，没有之一。&LT/p>\n&LTh2 id=\"cai-wu\">财务&LT/h2>\n&LTp>今年没怎么攒钱，反而还变少了（装修、车、瞎折腾），离我 500 万的财务自由目标越来越远了。&LT/p>\n&LTp>唯一的成果可能就是利用 beancount 和自动化脚本来导入微信和支付宝的账单数据，并还可以做一些简单的自动分类。极大的减少了我的记账工作量，虽然也浪费不少钱折腾了Moze等记账软件。&LT/p>\n&LTh2 id=\"bai-bi\">败笔&LT/h2>\n&LTp>上面说的都是好的，现在说点不好的。&LT/p>\n&LTp>一方面是自己对感情还有沟通上面的处理很不成熟，以及对技术的渴望，加上一个爱折腾的心，今年多少有些乱。有时候我分不清我自己的决策是不是混杂了很多情感因素，我觉得这样是很不好的。&LT/p>\n&LTp>在一个是现在的岗位给我过大的心理压力，我总是把自己放分别到开发团队和安全团队中，导致很多时候做事非常割裂，一方面的强硬需求以及另一方面没有配合，让我非常焦虑，我总觉得是我传达的不到位，或者是工作没有做到位，导致开发团队并不理解安全团队的想法是什么。闹了很多乌龙。我认为我就是想太多，两边都想要个好结果。&LT/p>\n&LTp>反而到年尾来看，确实今年做的这些事情取得了很大的成功，领导们对我负责的团队信任度有很大的提升，团队之间的沟通也变得更加和谐。但是这不符合我现在对自己的职业目标，也许大个一轮，我就很乐意做这份工作了。&LT/p>\n&LTh2 id=\"ending\">Ending&LT/h2>\n&LTp>今年大致便是如此，希望 2022 年更好，7 年目标里除了财务都在有序的推进。明年多多开源节流，把财务的短板补上来。&LT/p>\n","permalink":"https://eindex.me/cn/posts/2021-ending/","slug":"2021-ending","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"2021 Ending","description":null,"updated":null,"date":"2021-12-29T14:08:01+08:00","year":2021,"month":12,"day":29,"taxonomies":{"tags":["Ending","Annual Summary"]},"extra":{},"path":"/cn/posts/2021-ending/","components":["cn","posts","2021-ending"],"summary":"&LTp>2021年就要过去了，分享一下我今年都干了些什么事请。\n下面会分为几个维度来说。&LT/p>\n&LTh2 id=\"zhi-ye\">职业&LT/h2>\n&LTp>今年无缝转职成了安全从业人员，学习到了很多 DevSecOps 的知识，同时了解到安全不仅仅是技术开发，有时候流程安全能比应用安全起到更多更大的作用。这里也要感谢一下我的领导们。&LT/p>\n","toc":[{"level":2,"id":"zhi-ye","permalink":"https://eindex.me/cn/posts/2021-ending/#zhi-ye","title":"职业","children":[]},{"level":2,"id":"ge-ren","permalink":"https://eindex.me/cn/posts/2021-ending/#ge-ren","title":"个人","children":[]},{"level":2,"id":"ji-zhu","permalink":"https://eindex.me/cn/posts/2021-ending/#ji-zhu","title":"技术","children":[]},{"level":2,"id":"she-ying","permalink":"https://eindex.me/cn/posts/2021-ending/#she-ying","title":"摄影","children":[]},{"level":2,"id":"cai-wu","permalink":"https://eindex.me/cn/posts/2021-ending/#cai-wu","title":"财务","children":[]},{"level":2,"id":"bai-bi","permalink":"https://eindex.me/cn/posts/2021-ending/#bai-bi","title":"败笔","children":[]},{"level":2,"id":"ending","permalink":"https://eindex.me/cn/posts/2021-ending/#ending","title":"Ending","children":[]}],"word_count":1346,"reading_time":7,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/2021-ending/","title":"2021 Ending","path":"/home/runner/work/blog/blog/content/posts/2021-ending.cn.md"}],"backlinks":[]},"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/introspection/","title":"反躬自问","path":"/home/runner/work/blog/blog/content/posts/introspection.cn.md"}],"backlinks":[]},{"relative_path":"posts/2021-ending.cn.md","content":"&LTp>2021年就要过去了，分享一下我今年都干了些什么事请。\n下面会分为几个维度来说。&LT/p>\n&LTh2 id=\"zhi-ye\">职业&LT/h2>\n&LTp>今年无缝转职成了安全从业人员，学习到了很多 DevSecOps 的知识，同时了解到安全不仅仅是技术开发，有时候流程安全能比应用安全起到更多更大的作用。这里也要感谢一下我的领导们。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>\n&LTp>也更了解如何去和其他人和团队沟通，如何去推动其他人或团队做事情。更高效的完成事情，同时也让双方都觉得比较舒服。以及知道如何去和 stakeholder 沟通，让大家的利益趋向一致。&LT/p>\n&LTp>在内部处理了 Log4J 这个史诗级的漏洞，不仅快速排查/修复问题可能出现的点，而且从多个角度重新审视了整个内部安全流程与 DevSecOps 的设计，收获颇丰。&LT/p>\n&LTh2 id=\"ge-ren\">个人&LT/h2>\n&LTp>今年在自己这边，提升最大的可能是英语了，了解我的人知道我英语很差（高考五十几分）也没过四级，现在可以用英文与外国同事交流，能写长邮件文档。&LT/p>\n&LTp>在光顾了心理医生和自己研究学习之后，知道如何排解内心的情绪，也更了解什么时候需要做什么事情，应该大大降低了我自身的跳楼风险，虽然我不是毛星云那样的天才。&LT/p>\n&LTp>19 年交付的房子，21 年总算是简单搞了一搞，开始住了。&LT/p>\n&LTp>和女朋友分手一次，复合了，应该/也许以后感情会更加稳固。&LT/p>\n&LTp>从不敢/懒得开车变得喜欢开车，虽然会花掉一些精力但确实能节省很多时间。大约开了 1000-2000 公里？一共开车出游两次，装修搬家 N 次，以后再也不是不愿意开车的人了。&LT/p>\n&LTp>交了几个知心朋友。有痛苦有人分担，有快乐可以分享。&LTdel>[doge] 可谓是分布式 EINDEX 支持系统。&LT/del>&LT/p>\n&LTh2 id=\"ji-zhu\">技术&LT/h2>\n&LTp>今年一直打算把 blog 重新弄起来，本来是想用 go 做后端的，前后端展示界面都写好了，后来太懒（管理界面太难做，引入了太多安全与成本问题，收益太低），就做了一个 hugo 的主题，还是半成品之后会继续更新的。&LT/p>\n&LTp>开源方面：参与了一些简单的开源项目，给 homebrew-cask 维护了一些软件包，自己也学习了 Github Action，还写了一个 leetcode-report，主要都是工具方面的。哦，还有现在这个 hugo 主题也是开源的。虽然还没有人用，哈哈。&LT/p>\n&LTp>安全方面：学了一些渗透测试的知识，主要在 PentestLab 上，刷了一百五十多题。&LT/p>\n&LTp>编码方面：前端写的更好了 doge，给自己写了一些 Golang/Python 的代码，写了一些脚本自动化的做安全检测（为了摸鱼，结果都开会去了）。&LT/p>\n&LTp>除此之外，还做了一个自用的 docker-compose 合集，包括密码管理软件 vaultwarden，观影套装 Plex + Sonarr + Radarr + Lidarr + Prowlarr + bazarr + qBT + Trakt 涵盖下载，字母，刮削，播放，观影记录同步。&LT/p>\n&LTh2 id=\"she-ying\">摄影&LT/h2>\n&LTp>出去玩了几次，拍了几张自己非常满意的风景照片，车果然是摄影最重要的外设，没有之一。&LT/p>\n&LTh2 id=\"cai-wu\">财务&LT/h2>\n&LTp>今年没怎么攒钱，反而还变少了（装修、车、瞎折腾），离我 500 万的财务自由目标越来越远了。&LT/p>\n&LTp>唯一的成果可能就是利用 beancount 和自动化脚本来导入微信和支付宝的账单数据，并还可以做一些简单的自动分类。极大的减少了我的记账工作量，虽然也浪费不少钱折腾了Moze等记账软件。&LT/p>\n&LTh2 id=\"bai-bi\">败笔&LT/h2>\n&LTp>上面说的都是好的，现在说点不好的。&LT/p>\n&LTp>一方面是自己对感情还有沟通上面的处理很不成熟，以及对技术的渴望，加上一个爱折腾的心，今年多少有些乱。有时候我分不清我自己的决策是不是混杂了很多情感因素，我觉得这样是很不好的。&LT/p>\n&LTp>在一个是现在的岗位给我过大的心理压力，我总是把自己放分别到开发团队和安全团队中，导致很多时候做事非常割裂，一方面的强硬需求以及另一方面没有配合，让我非常焦虑，我总觉得是我传达的不到位，或者是工作没有做到位，导致开发团队并不理解安全团队的想法是什么。闹了很多乌龙。我认为我就是想太多，两边都想要个好结果。&LT/p>\n&LTp>反而到年尾来看，确实今年做的这些事情取得了很大的成功，领导们对我负责的团队信任度有很大的提升，团队之间的沟通也变得更加和谐。但是这不符合我现在对自己的职业目标，也许大个一轮，我就很乐意做这份工作了。&LT/p>\n&LTh2 id=\"ending\">Ending&LT/h2>\n&LTp>今年大致便是如此，希望 2022 年更好，7 年目标里除了财务都在有序的推进。明年多多开源节流，把财务的短板补上来。&LT/p>\n","permalink":"https://eindex.me/cn/posts/2021-ending/","slug":"2021-ending","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"2021 Ending","description":null,"updated":null,"date":"2021-12-29T14:08:01+08:00","year":2021,"month":12,"day":29,"taxonomies":{"tags":["Ending","Annual Summary"]},"extra":{},"path":"/cn/posts/2021-ending/","components":["cn","posts","2021-ending"],"summary":"&LTp>2021年就要过去了，分享一下我今年都干了些什么事请。\n下面会分为几个维度来说。&LT/p>\n&LTh2 id=\"zhi-ye\">职业&LT/h2>\n&LTp>今年无缝转职成了安全从业人员，学习到了很多 DevSecOps 的知识，同时了解到安全不仅仅是技术开发，有时候流程安全能比应用安全起到更多更大的作用。这里也要感谢一下我的领导们。&LT/p>\n","toc":[{"level":2,"id":"zhi-ye","permalink":"https://eindex.me/cn/posts/2021-ending/#zhi-ye","title":"职业","children":[]},{"level":2,"id":"ge-ren","permalink":"https://eindex.me/cn/posts/2021-ending/#ge-ren","title":"个人","children":[]},{"level":2,"id":"ji-zhu","permalink":"https://eindex.me/cn/posts/2021-ending/#ji-zhu","title":"技术","children":[]},{"level":2,"id":"she-ying","permalink":"https://eindex.me/cn/posts/2021-ending/#she-ying","title":"摄影","children":[]},{"level":2,"id":"cai-wu","permalink":"https://eindex.me/cn/posts/2021-ending/#cai-wu","title":"财务","children":[]},{"level":2,"id":"bai-bi","permalink":"https://eindex.me/cn/posts/2021-ending/#bai-bi","title":"败笔","children":[]},{"level":2,"id":"ending","permalink":"https://eindex.me/cn/posts/2021-ending/#ending","title":"Ending","children":[]}],"word_count":1346,"reading_time":7,"assets":[],"draft":false,"lang":"cn","lower":{"relative_path":"posts/introspection.cn.md","content":"&LTh2 id=\"yuan-qi\">缘起&LT/h2>\n&LTp>事情还得从一次因防疫政策变化导致的“特殊”出差说起。&LT/p>\n&LTp>人在远离舒适圈的时候，总会经历种种困难与不适，噪音、拥挤、打卡、隔离、被缩短的工期、不合理的政策……都让“出差”成为了一项挑战，而“疫情”和“三年第一次出差”，这两重因素的叠加，更让我对这次出差中将面临的未知感到恐惧，这种恐惧甚至大于好奇。&LT/p>\n&LTp>下面我会尝试用“自我问答”的方式，记录这次出差的体验与感想。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"zi-wen\">自问&LT/h2>\n&LTh3 id=\"yi-shi-zhu-xing-shang-you-shi-yao-ti-yan\">衣食住行上有什么体验？&LT/h3>\n&LTp>衣：没啥好说的，我在出发前带了一些换洗衣服，还在当地“程序员服装供应商”之一的优衣库那的采购了一点新的。&LT/p>\n&LTp>食：我吃不惯，太辣，成都人的口味真的好重。&LT/p>\n&LTp>住：我隔离的时候住在宿舍里，嗯，怎么说呢。除了床之外，其他都挺好，床就是块板子，让腰疼的我“疼上加疼”😭。后几天的隔离时间里，我都睡沙发了，让我惊讶的是，沙发居然比床睡着舒服。再后面就住进酒店了，成都这边水质不好，我洗澡的时候有很严重地过敏反应。&LT/p>\n&LTp>行：我几十年都没坐过飞机了，这次坐飞机突然发现，原来坐飞机这么挤，这么吵。安检的时候，安检小哥恨不得要把你“扒光”。我很讨厌这种感觉，但谁让飞机飞得快呢。之后会再和坐高铁需要的时间做比较，以后可能会倾向于总时长更短的。出门在外，“失去了”家里的“小破车”，只能选公共交通或者的士，这让我的行动范围变小了。&LT/p>\n&LTp>更新: 返程时乘坐的是&LTcode>空客321&LT/code>,去程坐的是&LTcode>波音737-800&LT/code>，都是经济舱，空客体验完爆波音。&LT/p>\n&LTp>成都街上绿化做得特别好，到处都有鸟叫声，而且大多数马路中间都有树，有的人行道上也种了很多树，空气质量也挺好的，就连在其他城市横冲直闯的外卖小哥，在这边也是走路送餐。我住在成都腾讯附近，在住处周围看见了很多互联网公司，相比我的城市来说，成都确实更适合“互联网人”的发展。&LT/p>\n&LTh3 id=\"dao-jin-tian-wei-zhi-dui-zhe-ci-de-chu-chai-you-shi-yao-gan-shou-ma\">到今天为止，对这次的出差有什么感受吗？&LT/h3>\n&LTp>我原来觉得我对很多事情没啥特别的要求，但经过这次出差，我发现我屁事还挺多的。&LT/p>\n&LTp>喝上，要有净水器，还有随时能喝上的新鲜咖啡；工作/学习上需要好的办公椅和升降办公桌；玩上要有4k高色准大彩电和音响系统；吃上得有厨房和不错的厨具，要能做饭，最好能有洗碗机。另外，窗外要有不错的风景，洗衣机要可以烘干，出门要开车，需要很好的隔音与遮光来保证睡眠，最重要的是，床要有中高档床垫。&LT/p>\n&LTp>我当然理解不是所有人都需要这些所谓的“舒适条件”，但它们对我来说是不可缺少的。尤其是对于第一次出差、第一次乘飞机、第一次被隔离的我来说，我并没有做好失去它们的准备，但现实总是让人猝不及防，而离开了家的我，也只能接受这个现实。&LT/p>\n&LTp>这些经历使得我更加理解和认可一个广告理念：卖给你的不是东西，而是一种生活方式。&LT/p>\n&LTh3 id=\"you-cai-qu-shi-yao-cuo-shi-huan-jie-tong-ku-huo-zhe-gai-shan-xian-zhuang-ma\">有采取什么措施缓解“痛苦”或者改善现状吗？&LT/h3>\n&LTp>当然是有的，对于舒适度上的需求，其实是可以通过一定程度上的锻炼来缓解的，毕竟身体好一点的话，对不同环境的适应能力也要强一点，至少腰不会那么疼。&LT/p>\n&LTp>情绪上，我选择自己烹饪，同时还把大量的精力放在家里的 HomeLab 上，来转移被隔离影响的心情。另外，我也在看电影、上网吐槽，包括我写这篇博客的动机也是为了缓解情绪上的压力。&LT/p>\n&LTp>为了老腰，隔离结束的第一天我就搬到酒店去住了，还去报复性消费了一波。哦，还剪了一个生平最丑（没有之一）的发型。&LT/p>\n&LTh3 id=\"zhi-hou-you-shi-yao-da-suan\">之后有什么打算？&LT/h3>\n&LTp>以后出差前还是得多考虑一下，不能随便答应。一个是因为自己的身体也不太行，另一个是女朋友也不是吃素的，最好还是不要长时间出差了。一个月就很长了。如果是出国，可以另外考虑考虑。&LT/p>\n&LTp>身体上还是要坚持锻炼啊，先减肥再练核心，帮老腰过过难关呀，不能被身体限制住了发展。&LT/p>\n&LTp>工作上还是要找到自己的价值所在，毕竟是我司中国里最年轻（菜）的应用安全专（砖）家，以后怎么发展，是不是应该专注更多的去做自己擅长的事情……都是要思考的&LT/p>\n&LTp>对于我的财务自由计划，现在完成了差不多 1/20，感觉上勉勉强强吧。我之后会用更多的时间去发展一些兴趣爱好，可能也会花更多的精力去开展一下副业吧，公司里的平台还是比较有限。还是得多自力更生啊。&LT/p>\n&LTh2 id=\"hou-ji\">后记&LT/h2>\n&LTp>对我来说，这次出差是一次很坏却也很好的事情，好的方面是，和从前相比，我能更清晰、更坚定地说出我要什么，我想要做什么，能更快地采取行动去实践自己的想法、能在逆境中调整心情、能抗压、能想办法给自己获取资源、能主动和自己的 stakeholders 保持不错的联系。有了更成熟的思维体系，对在控制范围内和不在控制范围内的事情，能更加自如地应对。&LT/p>\n&LTp>不知道心理测量量表还会不会把我放到轻度抑郁症患者范围里。不管如何，有一个成熟的适合自己的思维体系，确实对我的发展有很大助益。&LT/p>\n&LTp>希望以后每年都能有一次类似的经历或者体会，谁又会不渴望变得更高更快更强呢。&LT/p>\n","permalink":"https://eindex.me/cn/posts/introspection/","slug":"introspection","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"反躬自问","description":null,"updated":null,"date":"2022-05-02T17:13:36+08:00","year":2022,"month":5,"day":2,"taxonomies":{"tags":["Introspection"]},"extra":{},"path":"/cn/posts/introspection/","components":["cn","posts","introspection"],"summary":"&LTh2 id=\"yuan-qi\">缘起&LT/h2>\n&LTp>事情还得从一次因防疫政策变化导致的“特殊”出差说起。&LT/p>\n&LTp>人在远离舒适圈的时候，总会经历种种困难与不适，噪音、拥挤、打卡、隔离、被缩短的工期、不合理的政策……都让“出差”成为了一项挑战，而“疫情”和“三年第一次出差”，这两重因素的叠加，更让我对这次出差中将面临的未知感到恐惧，这种恐惧甚至大于好奇。&LT/p>\n&LTp>下面我会尝试用“自我问答”的方式，记录这次出差的体验与感想。&LT/p>\n","toc":[{"level":2,"id":"yuan-qi","permalink":"https://eindex.me/cn/posts/introspection/#yuan-qi","title":"缘起","children":[]},{"level":2,"id":"zi-wen","permalink":"https://eindex.me/cn/posts/introspection/#zi-wen","title":"自问","children":[{"level":3,"id":"yi-shi-zhu-xing-shang-you-shi-yao-ti-yan","permalink":"https://eindex.me/cn/posts/introspection/#yi-shi-zhu-xing-shang-you-shi-yao-ti-yan","title":"衣食住行上有什么体验？","children":[]},{"level":3,"id":"dao-jin-tian-wei-zhi-dui-zhe-ci-de-chu-chai-you-shi-yao-gan-shou-ma","permalink":"https://eindex.me/cn/posts/introspection/#dao-jin-tian-wei-zhi-dui-zhe-ci-de-chu-chai-you-shi-yao-gan-shou-ma","title":"到今天为止，对这次的出差有什么感受吗？","children":[]},{"level":3,"id":"you-cai-qu-shi-yao-cuo-shi-huan-jie-tong-ku-huo-zhe-gai-shan-xian-zhuang-ma","permalink":"https://eindex.me/cn/posts/introspection/#you-cai-qu-shi-yao-cuo-shi-huan-jie-tong-ku-huo-zhe-gai-shan-xian-zhuang-ma","title":"有采取什么措施缓解“痛苦”或者改善现状吗？","children":[]},{"level":3,"id":"zhi-hou-you-shi-yao-da-suan","permalink":"https://eindex.me/cn/posts/introspection/#zhi-hou-you-shi-yao-da-suan","title":"之后有什么打算？","children":[]}]},{"level":2,"id":"hou-ji","permalink":"https://eindex.me/cn/posts/introspection/#hou-ji","title":"后记","children":[]}],"word_count":1648,"reading_time":9,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/introspection/","title":"反躬自问","path":"/home/runner/work/blog/blog/content/posts/introspection.cn.md"}],"backlinks":[]},"higher":{"relative_path":"posts/beancount-introduce.cn.md","content":"&LTp>本文简单介绍一下复式记账和 Beancount 的使用方法。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"wei-shi-yao-yao-ji-zhang\">为什么要记账&LT/h2>\n&LTp>记账是理财的第一步，熟话说得好：”你不理财，才不理你。“&LT/p>\n&LTp>记账可以明确自己每一笔钱花在哪去了，这个月最大的开销是什么，以及对自己的冲动消费、不必要消费能有一个反思。&LT/p>\n&LTp>我曾使用过很多记账软件如：挖财、随手记、网易有钱、MoneyWiz、MOZE 等，其实记账最大的问题在于很难坚持下来，因为短期来看记账的收益并不高，而从长远来看，账本也能体现经济的健康状况。&LT/p>\n&LTh2 id=\"fu-shi-ji-zhang-shi-shi-yao\">复式记账是什么&LT/h2>\n&LTp>复式记账（Double Entry Bookkeeping）是以资产与权益平衡关系作为记账基础，对每一笔账单，都要以相等的金额在两个相互联系的账户中进行记录。&LT/p>\n&LTp>原理：\n&LTcode>资产 = 负债 + 所有者权益&LT/code>&LT/p>\n&LTp>复式记账的优点是：&LT/p>\n&LTul>\n&LTli>账户对应关系清楚，可以鲜明的表示各种经济活动的来龙去脉。&LT/li>\n&LTli>有借必有贷，借贷必相等的记账方式，对于检查账单是否记对非常有帮助。&LT/li>\n&LT/ul>\n&LTh2 id=\"he-wei-beancount\">何为 Beancount&LT/h2>\n&LTp>Beancount 是一个用 Python 实现的开源复式记账软件。&LT/p>\n&LTp>数据文件基于纯文本，所以不用担心程序出问题，数据没法看懂。&LT/p>\n&LTp>Beancount（fava）的界面大概是这个样子。\n&LTimg src=\"https://eindex.me/cn/posts/beancount-introduce/media/15676038764861/15676114899083.jpg\" alt=\"-w2638\" />\n&LTimg src=\"https://eindex.me/cn/posts/beancount-introduce/media/15676038764861/15676115071325.jpg\" alt=\"-w1319\" />&LT/p>\n&LTp>Beancount 的优点：&LT/p>\n&LTol>\n&LTli>开源，可以自己写功能。&LT/li>\n&LTli>数据基于纯文本，自己掌握所有数据，不担心隐私泄露。&LT/li>\n&LTli>支持各种图标，支持SQL查询生成报表。&LT/li>\n&LTli>支持预算（fava）。&LT/li>\n&LTli>支持无限账本、无限账户、无限币种。&LT/li>\n&LTli>可以导入各种账单文件（有些需要写代码支持）。&LT/li>\n&LTli>可以用 Git、iCloud 等工具来管理账本。&LT/li>\n&LT/ol>\n&LTp>不仅如此，Beancount 还可以量化年假，产假等等非标准金融标的。&LT/p>\n&LTp>例如讲公司年假记为一笔收入，从公司账户转入到个人账户，成为资产。使用掉年假，则把年假从个人资产转出到消费即可。这样就相当于把年假消费掉了。而年假的货币单位可以设置成 Day。&LT/p>\n&LTp>写在 Beancount 里大概是这个样子。&LT/p>\n&LTpre data-lang=\"beancount\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-beancount \">&LTcode class=\"language-beancount\" data-lang=\"beancount\">&LTspan>2019-04-24 * &ampquot;CompanyName&ampquot; &ampquot;请假一天休息&ampquot;\n&LT/span>&LTspan> Assets:Leave -1.00 DAY\n&LT/span>&LTspan> Expenses:Health\n&LT/span>&LTspan>\n&LT/span>&LTspan>2019-04-01 * &ampquot;CompanyName&ampquot; &ampquot;年假-初始化&ampquot;\n&LT/span>&LTspan> Income:Job:CompanyName:Leave\n&LT/span>&LTspan> Assets:Leave +7.00 DAY\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"ji-ben-yu-fa\">基本语法&LT/h2>\n&LTh3 id=\"ji-ben-ge-shi\">基本格式&LT/h3>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>YYYY-MM-DD &amplt;directive&ampgt; &amplt;arguments...&ampgt;\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"chuang-jian-huo-bi\">创建货币&LT/h3>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>option &ampquot;operating_currency&ampquot; &ampquot;CNY&ampquot;\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"zhang-hu-xiang-guan\">账户相关&LT/h3>\n&LTp>创建账户&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>1970-01-01 open Assets:Bank:ABC CNY\n&LT/span>&LT/code>&LT/pre>\n&LTp>备注账户&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>1970-01-01 note Assets:Bank:ABC &ampquot;农行卡&ampquot;\n&LT/span>&LT/code>&LT/pre>\n&LTp>关闭帐户，账户关闭后就可以在现实界面上过滤掉已经关闭的账户。&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>1970-01-02 close Assets:Bank:ABC\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"jiao-yi\">交易&LT/h3>\n&LTp>这是单笔简单交易的写法，表示我去美食风暴用微信支付吃了个盒饭。&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>2019-08-02 * &ampquot;美食风暴&ampquot; &ampquot;盒饭&ampquot;\n&LT/span>&LTspan> Assets:Wechat:EINDEX -18 CNY\n&LT/span>&LTspan> Expenses:Food:Restaurant:Lunch \n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"she-zhi-jie-ge\">设置价格&LT/h3>\n&LTp>可以这是各种“货币”之间的价格转换。如果用上程序员思维，我们就可以实现股票价格跟踪、汇率跟踪等等。来提高账本的准确度。&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>2019-10-01 price USD 7 CNY\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"yu-e-zi-dong-she-zhi\">余额自动设置&LT/h3>\n&LTp>这是一个偷懒必备功能，下面的 &LTcode>pad&LT/code>，我农行卡自动平账使用&LTcode>Equity:Opening-Balances&LT/code>，明天的 &LTcode>balance&LT/code> 表示在 2019年10月02日时这张卡的余额为4000CNY，如果旧的账单不平就会从&LTcode>Equity:Opening-Balances&LT/code>自动平账。&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>2019-10-01 pad Assets:Bank:ABC Equity:Opening-Balances\n&LT/span>&LTspan>\n&LT/span>&LTspan>2019-10-02 balance Assets:Bank:ABC 4000 CNY\n&LT/span>&LT/code>&LT/pre>\n&LTp>如果未来要在这个账户过去的账目上做删改，2019年10月1日的余额也会是4000元不变。&LT/p>\n&LTh2 id=\"shi-yong-beancount\">使用 Beancount&LT/h2>\n&LTp>首先需要安装 Python 3，然后安装 beancount、fava。&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>pip install beancount fava\n&LT/span>&LT/code>&LT/pre>\n&LTp>&LTcode>fava&LT/code> 是 beancount 的一个 WebUI 实现，可以可视化的看见自己的账本。&LT/p>\n&LTh3 id=\"example\">Example&LT/h3>\n&LTp>官方提供了一个 Beancount 的使用用例。&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>bean-example &ampgt; example.bean\n&LT/span>&LTspan>fava example.bean\n&LT/span>&LT/code>&LT/pre>\n&LTp>然后打开 &LTcode>localhost:5000&LT/code> 就可以在本地体验 Beancount 与 fava 了。&LT/p>\n&LTp>&LTimg src=\"https://eindex.me/cn/posts/beancount-introduce/media/15676038764861/15676114399432.jpg\" alt=\"-w1315\" />&LT/p>\n","permalink":"https://eindex.me/cn/posts/beancount-introduce/","slug":"beancount-introduce","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"复式记账工具 Beancount","description":null,"updated":null,"date":"2019-11-30T00:00:00+08:00","year":2019,"month":11,"day":30,"taxonomies":{"series":["algorithm"],"tags":["Beancount"]},"extra":{},"path":"/cn/posts/beancount-introduce/","components":["cn","posts","beancount-introduce"],"summary":"&LTp>本文简单介绍一下复式记账和 Beancount 的使用方法。&LT/p>\n","toc":[{"level":2,"id":"wei-shi-yao-yao-ji-zhang","permalink":"https://eindex.me/cn/posts/beancount-introduce/#wei-shi-yao-yao-ji-zhang","title":"为什么要记账","children":[]},{"level":2,"id":"fu-shi-ji-zhang-shi-shi-yao","permalink":"https://eindex.me/cn/posts/beancount-introduce/#fu-shi-ji-zhang-shi-shi-yao","title":"复式记账是什么","children":[]},{"level":2,"id":"he-wei-beancount","permalink":"https://eindex.me/cn/posts/beancount-introduce/#he-wei-beancount","title":"何为 Beancount","children":[]},{"level":2,"id":"ji-ben-yu-fa","permalink":"https://eindex.me/cn/posts/beancount-introduce/#ji-ben-yu-fa","title":"基本语法","children":[{"level":3,"id":"ji-ben-ge-shi","permalink":"https://eindex.me/cn/posts/beancount-introduce/#ji-ben-ge-shi","title":"基本格式","children":[]},{"level":3,"id":"chuang-jian-huo-bi","permalink":"https://eindex.me/cn/posts/beancount-introduce/#chuang-jian-huo-bi","title":"创建货币","children":[]},{"level":3,"id":"zhang-hu-xiang-guan","permalink":"https://eindex.me/cn/posts/beancount-introduce/#zhang-hu-xiang-guan","title":"账户相关","children":[]},{"level":3,"id":"jiao-yi","permalink":"https://eindex.me/cn/posts/beancount-introduce/#jiao-yi","title":"交易","children":[]},{"level":3,"id":"she-zhi-jie-ge","permalink":"https://eindex.me/cn/posts/beancount-introduce/#she-zhi-jie-ge","title":"设置价格","children":[]},{"level":3,"id":"yu-e-zi-dong-she-zhi","permalink":"https://eindex.me/cn/posts/beancount-introduce/#yu-e-zi-dong-she-zhi","title":"余额自动设置","children":[]}]},{"level":2,"id":"shi-yong-beancount","permalink":"https://eindex.me/cn/posts/beancount-introduce/#shi-yong-beancount","title":"使用 Beancount","children":[{"level":3,"id":"example","permalink":"https://eindex.me/cn/posts/beancount-introduce/#example","title":"Example","children":[]}]}],"word_count":1012,"reading_time":6,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/beancount-introduce/","title":"复式记账工具 Beancount","path":"/home/runner/work/blog/blog/content/posts/beancount-introduce.cn.md"}],"backlinks":[{"permalink":"https://eindex.me/cn/posts/my-homelab-introduce/","title":"My HomeLab"}]},"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/2021-ending/","title":"2021 Ending","path":"/home/runner/work/blog/blog/content/posts/2021-ending.cn.md"}],"backlinks":[]},{"relative_path":"posts/beancount-introduce.cn.md","content":"&LTp>本文简单介绍一下复式记账和 Beancount 的使用方法。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"wei-shi-yao-yao-ji-zhang\">为什么要记账&LT/h2>\n&LTp>记账是理财的第一步，熟话说得好：”你不理财，才不理你。“&LT/p>\n&LTp>记账可以明确自己每一笔钱花在哪去了，这个月最大的开销是什么，以及对自己的冲动消费、不必要消费能有一个反思。&LT/p>\n&LTp>我曾使用过很多记账软件如：挖财、随手记、网易有钱、MoneyWiz、MOZE 等，其实记账最大的问题在于很难坚持下来，因为短期来看记账的收益并不高，而从长远来看，账本也能体现经济的健康状况。&LT/p>\n&LTh2 id=\"fu-shi-ji-zhang-shi-shi-yao\">复式记账是什么&LT/h2>\n&LTp>复式记账（Double Entry Bookkeeping）是以资产与权益平衡关系作为记账基础，对每一笔账单，都要以相等的金额在两个相互联系的账户中进行记录。&LT/p>\n&LTp>原理：\n&LTcode>资产 = 负债 + 所有者权益&LT/code>&LT/p>\n&LTp>复式记账的优点是：&LT/p>\n&LTul>\n&LTli>账户对应关系清楚，可以鲜明的表示各种经济活动的来龙去脉。&LT/li>\n&LTli>有借必有贷，借贷必相等的记账方式，对于检查账单是否记对非常有帮助。&LT/li>\n&LT/ul>\n&LTh2 id=\"he-wei-beancount\">何为 Beancount&LT/h2>\n&LTp>Beancount 是一个用 Python 实现的开源复式记账软件。&LT/p>\n&LTp>数据文件基于纯文本，所以不用担心程序出问题，数据没法看懂。&LT/p>\n&LTp>Beancount（fava）的界面大概是这个样子。\n&LTimg src=\"https://eindex.me/cn/posts/beancount-introduce/media/15676038764861/15676114899083.jpg\" alt=\"-w2638\" />\n&LTimg src=\"https://eindex.me/cn/posts/beancount-introduce/media/15676038764861/15676115071325.jpg\" alt=\"-w1319\" />&LT/p>\n&LTp>Beancount 的优点：&LT/p>\n&LTol>\n&LTli>开源，可以自己写功能。&LT/li>\n&LTli>数据基于纯文本，自己掌握所有数据，不担心隐私泄露。&LT/li>\n&LTli>支持各种图标，支持SQL查询生成报表。&LT/li>\n&LTli>支持预算（fava）。&LT/li>\n&LTli>支持无限账本、无限账户、无限币种。&LT/li>\n&LTli>可以导入各种账单文件（有些需要写代码支持）。&LT/li>\n&LTli>可以用 Git、iCloud 等工具来管理账本。&LT/li>\n&LT/ol>\n&LTp>不仅如此，Beancount 还可以量化年假，产假等等非标准金融标的。&LT/p>\n&LTp>例如讲公司年假记为一笔收入，从公司账户转入到个人账户，成为资产。使用掉年假，则把年假从个人资产转出到消费即可。这样就相当于把年假消费掉了。而年假的货币单位可以设置成 Day。&LT/p>\n&LTp>写在 Beancount 里大概是这个样子。&LT/p>\n&LTpre data-lang=\"beancount\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-beancount \">&LTcode class=\"language-beancount\" data-lang=\"beancount\">&LTspan>2019-04-24 * &ampquot;CompanyName&ampquot; &ampquot;请假一天休息&ampquot;\n&LT/span>&LTspan> Assets:Leave -1.00 DAY\n&LT/span>&LTspan> Expenses:Health\n&LT/span>&LTspan>\n&LT/span>&LTspan>2019-04-01 * &ampquot;CompanyName&ampquot; &ampquot;年假-初始化&ampquot;\n&LT/span>&LTspan> Income:Job:CompanyName:Leave\n&LT/span>&LTspan> Assets:Leave +7.00 DAY\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"ji-ben-yu-fa\">基本语法&LT/h2>\n&LTh3 id=\"ji-ben-ge-shi\">基本格式&LT/h3>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>YYYY-MM-DD &amplt;directive&ampgt; &amplt;arguments...&ampgt;\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"chuang-jian-huo-bi\">创建货币&LT/h3>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>option &ampquot;operating_currency&ampquot; &ampquot;CNY&ampquot;\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"zhang-hu-xiang-guan\">账户相关&LT/h3>\n&LTp>创建账户&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>1970-01-01 open Assets:Bank:ABC CNY\n&LT/span>&LT/code>&LT/pre>\n&LTp>备注账户&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>1970-01-01 note Assets:Bank:ABC &ampquot;农行卡&ampquot;\n&LT/span>&LT/code>&LT/pre>\n&LTp>关闭帐户，账户关闭后就可以在现实界面上过滤掉已经关闭的账户。&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>1970-01-02 close Assets:Bank:ABC\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"jiao-yi\">交易&LT/h3>\n&LTp>这是单笔简单交易的写法，表示我去美食风暴用微信支付吃了个盒饭。&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>2019-08-02 * &ampquot;美食风暴&ampquot; &ampquot;盒饭&ampquot;\n&LT/span>&LTspan> Assets:Wechat:EINDEX -18 CNY\n&LT/span>&LTspan> Expenses:Food:Restaurant:Lunch \n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"she-zhi-jie-ge\">设置价格&LT/h3>\n&LTp>可以这是各种“货币”之间的价格转换。如果用上程序员思维，我们就可以实现股票价格跟踪、汇率跟踪等等。来提高账本的准确度。&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>2019-10-01 price USD 7 CNY\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"yu-e-zi-dong-she-zhi\">余额自动设置&LT/h3>\n&LTp>这是一个偷懒必备功能，下面的 &LTcode>pad&LT/code>，我农行卡自动平账使用&LTcode>Equity:Opening-Balances&LT/code>，明天的 &LTcode>balance&LT/code> 表示在 2019年10月02日时这张卡的余额为4000CNY，如果旧的账单不平就会从&LTcode>Equity:Opening-Balances&LT/code>自动平账。&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>2019-10-01 pad Assets:Bank:ABC Equity:Opening-Balances\n&LT/span>&LTspan>\n&LT/span>&LTspan>2019-10-02 balance Assets:Bank:ABC 4000 CNY\n&LT/span>&LT/code>&LT/pre>\n&LTp>如果未来要在这个账户过去的账目上做删改，2019年10月1日的余额也会是4000元不变。&LT/p>\n&LTh2 id=\"shi-yong-beancount\">使用 Beancount&LT/h2>\n&LTp>首先需要安装 Python 3，然后安装 beancount、fava。&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>pip install beancount fava\n&LT/span>&LT/code>&LT/pre>\n&LTp>&LTcode>fava&LT/code> 是 beancount 的一个 WebUI 实现，可以可视化的看见自己的账本。&LT/p>\n&LTh3 id=\"example\">Example&LT/h3>\n&LTp>官方提供了一个 Beancount 的使用用例。&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>bean-example &ampgt; example.bean\n&LT/span>&LTspan>fava example.bean\n&LT/span>&LT/code>&LT/pre>\n&LTp>然后打开 &LTcode>localhost:5000&LT/code> 就可以在本地体验 Beancount 与 fava 了。&LT/p>\n&LTp>&LTimg src=\"https://eindex.me/cn/posts/beancount-introduce/media/15676038764861/15676114399432.jpg\" alt=\"-w1315\" />&LT/p>\n","permalink":"https://eindex.me/cn/posts/beancount-introduce/","slug":"beancount-introduce","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"复式记账工具 Beancount","description":null,"updated":null,"date":"2019-11-30T00:00:00+08:00","year":2019,"month":11,"day":30,"taxonomies":{"series":["algorithm"],"tags":["Beancount"]},"extra":{},"path":"/cn/posts/beancount-introduce/","components":["cn","posts","beancount-introduce"],"summary":"&LTp>本文简单介绍一下复式记账和 Beancount 的使用方法。&LT/p>\n","toc":[{"level":2,"id":"wei-shi-yao-yao-ji-zhang","permalink":"https://eindex.me/cn/posts/beancount-introduce/#wei-shi-yao-yao-ji-zhang","title":"为什么要记账","children":[]},{"level":2,"id":"fu-shi-ji-zhang-shi-shi-yao","permalink":"https://eindex.me/cn/posts/beancount-introduce/#fu-shi-ji-zhang-shi-shi-yao","title":"复式记账是什么","children":[]},{"level":2,"id":"he-wei-beancount","permalink":"https://eindex.me/cn/posts/beancount-introduce/#he-wei-beancount","title":"何为 Beancount","children":[]},{"level":2,"id":"ji-ben-yu-fa","permalink":"https://eindex.me/cn/posts/beancount-introduce/#ji-ben-yu-fa","title":"基本语法","children":[{"level":3,"id":"ji-ben-ge-shi","permalink":"https://eindex.me/cn/posts/beancount-introduce/#ji-ben-ge-shi","title":"基本格式","children":[]},{"level":3,"id":"chuang-jian-huo-bi","permalink":"https://eindex.me/cn/posts/beancount-introduce/#chuang-jian-huo-bi","title":"创建货币","children":[]},{"level":3,"id":"zhang-hu-xiang-guan","permalink":"https://eindex.me/cn/posts/beancount-introduce/#zhang-hu-xiang-guan","title":"账户相关","children":[]},{"level":3,"id":"jiao-yi","permalink":"https://eindex.me/cn/posts/beancount-introduce/#jiao-yi","title":"交易","children":[]},{"level":3,"id":"she-zhi-jie-ge","permalink":"https://eindex.me/cn/posts/beancount-introduce/#she-zhi-jie-ge","title":"设置价格","children":[]},{"level":3,"id":"yu-e-zi-dong-she-zhi","permalink":"https://eindex.me/cn/posts/beancount-introduce/#yu-e-zi-dong-she-zhi","title":"余额自动设置","children":[]}]},{"level":2,"id":"shi-yong-beancount","permalink":"https://eindex.me/cn/posts/beancount-introduce/#shi-yong-beancount","title":"使用 Beancount","children":[{"level":3,"id":"example","permalink":"https://eindex.me/cn/posts/beancount-introduce/#example","title":"Example","children":[]}]}],"word_count":1012,"reading_time":6,"assets":[],"draft":false,"lang":"cn","lower":{"relative_path":"posts/2021-ending.cn.md","content":"&LTp>2021年就要过去了，分享一下我今年都干了些什么事请。\n下面会分为几个维度来说。&LT/p>\n&LTh2 id=\"zhi-ye\">职业&LT/h2>\n&LTp>今年无缝转职成了安全从业人员，学习到了很多 DevSecOps 的知识，同时了解到安全不仅仅是技术开发，有时候流程安全能比应用安全起到更多更大的作用。这里也要感谢一下我的领导们。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>\n&LTp>也更了解如何去和其他人和团队沟通，如何去推动其他人或团队做事情。更高效的完成事情，同时也让双方都觉得比较舒服。以及知道如何去和 stakeholder 沟通，让大家的利益趋向一致。&LT/p>\n&LTp>在内部处理了 Log4J 这个史诗级的漏洞，不仅快速排查/修复问题可能出现的点，而且从多个角度重新审视了整个内部安全流程与 DevSecOps 的设计，收获颇丰。&LT/p>\n&LTh2 id=\"ge-ren\">个人&LT/h2>\n&LTp>今年在自己这边，提升最大的可能是英语了，了解我的人知道我英语很差（高考五十几分）也没过四级，现在可以用英文与外国同事交流，能写长邮件文档。&LT/p>\n&LTp>在光顾了心理医生和自己研究学习之后，知道如何排解内心的情绪，也更了解什么时候需要做什么事情，应该大大降低了我自身的跳楼风险，虽然我不是毛星云那样的天才。&LT/p>\n&LTp>19 年交付的房子，21 年总算是简单搞了一搞，开始住了。&LT/p>\n&LTp>和女朋友分手一次，复合了，应该/也许以后感情会更加稳固。&LT/p>\n&LTp>从不敢/懒得开车变得喜欢开车，虽然会花掉一些精力但确实能节省很多时间。大约开了 1000-2000 公里？一共开车出游两次，装修搬家 N 次，以后再也不是不愿意开车的人了。&LT/p>\n&LTp>交了几个知心朋友。有痛苦有人分担，有快乐可以分享。&LTdel>[doge] 可谓是分布式 EINDEX 支持系统。&LT/del>&LT/p>\n&LTh2 id=\"ji-zhu\">技术&LT/h2>\n&LTp>今年一直打算把 blog 重新弄起来，本来是想用 go 做后端的，前后端展示界面都写好了，后来太懒（管理界面太难做，引入了太多安全与成本问题，收益太低），就做了一个 hugo 的主题，还是半成品之后会继续更新的。&LT/p>\n&LTp>开源方面：参与了一些简单的开源项目，给 homebrew-cask 维护了一些软件包，自己也学习了 Github Action，还写了一个 leetcode-report，主要都是工具方面的。哦，还有现在这个 hugo 主题也是开源的。虽然还没有人用，哈哈。&LT/p>\n&LTp>安全方面：学了一些渗透测试的知识，主要在 PentestLab 上，刷了一百五十多题。&LT/p>\n&LTp>编码方面：前端写的更好了 doge，给自己写了一些 Golang/Python 的代码，写了一些脚本自动化的做安全检测（为了摸鱼，结果都开会去了）。&LT/p>\n&LTp>除此之外，还做了一个自用的 docker-compose 合集，包括密码管理软件 vaultwarden，观影套装 Plex + Sonarr + Radarr + Lidarr + Prowlarr + bazarr + qBT + Trakt 涵盖下载，字母，刮削，播放，观影记录同步。&LT/p>\n&LTh2 id=\"she-ying\">摄影&LT/h2>\n&LTp>出去玩了几次，拍了几张自己非常满意的风景照片，车果然是摄影最重要的外设，没有之一。&LT/p>\n&LTh2 id=\"cai-wu\">财务&LT/h2>\n&LTp>今年没怎么攒钱，反而还变少了（装修、车、瞎折腾），离我 500 万的财务自由目标越来越远了。&LT/p>\n&LTp>唯一的成果可能就是利用 beancount 和自动化脚本来导入微信和支付宝的账单数据，并还可以做一些简单的自动分类。极大的减少了我的记账工作量，虽然也浪费不少钱折腾了Moze等记账软件。&LT/p>\n&LTh2 id=\"bai-bi\">败笔&LT/h2>\n&LTp>上面说的都是好的，现在说点不好的。&LT/p>\n&LTp>一方面是自己对感情还有沟通上面的处理很不成熟，以及对技术的渴望，加上一个爱折腾的心，今年多少有些乱。有时候我分不清我自己的决策是不是混杂了很多情感因素，我觉得这样是很不好的。&LT/p>\n&LTp>在一个是现在的岗位给我过大的心理压力，我总是把自己放分别到开发团队和安全团队中，导致很多时候做事非常割裂，一方面的强硬需求以及另一方面没有配合，让我非常焦虑，我总觉得是我传达的不到位，或者是工作没有做到位，导致开发团队并不理解安全团队的想法是什么。闹了很多乌龙。我认为我就是想太多，两边都想要个好结果。&LT/p>\n&LTp>反而到年尾来看，确实今年做的这些事情取得了很大的成功，领导们对我负责的团队信任度有很大的提升，团队之间的沟通也变得更加和谐。但是这不符合我现在对自己的职业目标，也许大个一轮，我就很乐意做这份工作了。&LT/p>\n&LTh2 id=\"ending\">Ending&LT/h2>\n&LTp>今年大致便是如此，希望 2022 年更好，7 年目标里除了财务都在有序的推进。明年多多开源节流，把财务的短板补上来。&LT/p>\n","permalink":"https://eindex.me/cn/posts/2021-ending/","slug":"2021-ending","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"2021 Ending","description":null,"updated":null,"date":"2021-12-29T14:08:01+08:00","year":2021,"month":12,"day":29,"taxonomies":{"tags":["Ending","Annual Summary"]},"extra":{},"path":"/cn/posts/2021-ending/","components":["cn","posts","2021-ending"],"summary":"&LTp>2021年就要过去了，分享一下我今年都干了些什么事请。\n下面会分为几个维度来说。&LT/p>\n&LTh2 id=\"zhi-ye\">职业&LT/h2>\n&LTp>今年无缝转职成了安全从业人员，学习到了很多 DevSecOps 的知识，同时了解到安全不仅仅是技术开发，有时候流程安全能比应用安全起到更多更大的作用。这里也要感谢一下我的领导们。&LT/p>\n","toc":[{"level":2,"id":"zhi-ye","permalink":"https://eindex.me/cn/posts/2021-ending/#zhi-ye","title":"职业","children":[]},{"level":2,"id":"ge-ren","permalink":"https://eindex.me/cn/posts/2021-ending/#ge-ren","title":"个人","children":[]},{"level":2,"id":"ji-zhu","permalink":"https://eindex.me/cn/posts/2021-ending/#ji-zhu","title":"技术","children":[]},{"level":2,"id":"she-ying","permalink":"https://eindex.me/cn/posts/2021-ending/#she-ying","title":"摄影","children":[]},{"level":2,"id":"cai-wu","permalink":"https://eindex.me/cn/posts/2021-ending/#cai-wu","title":"财务","children":[]},{"level":2,"id":"bai-bi","permalink":"https://eindex.me/cn/posts/2021-ending/#bai-bi","title":"败笔","children":[]},{"level":2,"id":"ending","permalink":"https://eindex.me/cn/posts/2021-ending/#ending","title":"Ending","children":[]}],"word_count":1346,"reading_time":7,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/2021-ending/","title":"2021 Ending","path":"/home/runner/work/blog/blog/content/posts/2021-ending.cn.md"}],"backlinks":[]},"higher":{"relative_path":"posts/one-hundred-line-async-crawler.cn.md","content":"&LTp>一个优雅的爬虫需要一下这些东西：&LT/p>\n&LTul>\n&LTli>请求器&LT/li>\n&LTli>页面解析器&LT/li>\n&LTli>链接生成器&LT/li>\n&LTli>调度器&LT/li>\n&LT/ul>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"qing-qiu-qi\">请求器&LT/h2>\n&LTp>负责发送请求。&LT/p>\n&LTh2 id=\"ye-mian-jie-xi-qi\">页面解析器&LT/h2>\n&LTp>负责从页面上解析出继续爬的链接。&LT/p>\n&LTh2 id=\"lian-jie-sheng-cheng-qi\">链接生成器&LT/h2>\n&LTp>负责处理继续爬虫的链接并放入队列。&LT/p>\n&LTh2 id=\"diao-du-qi\">调度器&LT/h2>\n&LTp>决定链接是否应该被爬去的核心部件。&LT/p>\n&LTh2 id=\"yi-bu\">异步&LT/h2>\n&LTp>同时有多个请求在发送，即时异步爬虫。&LT/p>\n&LTh2 id=\"dai-ma\">代码&LT/h2>\n&LTp>相关代码已上传到 &LTa rel=\"nofollow\" href=\"https://github.com/EINDEX/100-line-async-spider\">Github[https://github.com/EINDEX/100-line-async-spider]&LT/a>。&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"color:#f92672;\">import &LT/span>&LTspan>aiohttp, asyncio, aiofiles, lxml, pathlib, sys, re, lxml.html\n&LT/span>&LTspan style=\"color:#f92672;\">from &LT/span>&LTspan>urllib.parse &LT/span>&LTspan style=\"color:#f92672;\">import &LT/span>&LTspan>urlparse\n&LT/span>&LTspan style=\"color:#f92672;\">from &LT/span>&LTspan>pathlib &LT/span>&LTspan style=\"color:#f92672;\">import &LT/span>&LTspan>Path\n&LT/span>&LTspan style=\"color:#f92672;\">from &LT/span>&LTspan>hashlib &LT/span>&LTspan style=\"color:#f92672;\">import &LT/span>&LTspan>md5\n&LT/span>&LTspan>\n&LT/span>&LTspan>MAX_GET, MAX_QUEUE_SIZE, MAX_WORKER &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">10000&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#ae81ff;\">100&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#ae81ff;\">20\n&LT/span>&LTspan>spider_url_set, spider_content_set &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">set&LT/span>&LTspan>(), &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">set&LT/span>&LTspan>()\n&LT/span>&LTspan>status &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>{&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;success&ampquot;&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;all&ampquot;&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;same&ampquot;&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;same_content&ampquot;&LT/span>&LTspan>:&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>}\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"color:#f92672;\">async &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">fetch&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">url&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">global &LT/span>&LTspan>MAX_GET\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>MAX_GET &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">async with &LT/span>&LTspan>aiohttp.ClientSession(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">connector&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan>aiohttp.TCPConnector(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">ssl&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">False&LT/span>&LTspan>), &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">timeout&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan>aiohttp.ClientTimeout(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">total&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>)) &LT/span>&LTspan style=\"color:#f92672;\">as &LT/span>&LTspan>session:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">async with &LT/span>&LTspan>session.get(url) &LT/span>&LTspan style=\"color:#f92672;\">as &LT/span>&LTspan>response:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return await &LT/span>&LTspan>response.text()\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"color:#f92672;\">async &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">savefile&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">path&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">data&LT/span>&LTspan>):\n&LT/span>&LTspan> path &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>Path(path)\n&LT/span>&LTspan> path.parent.mkdir(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">parents&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">True&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">exist_ok&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">True&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">async with &LT/span>&LTspan>aiofiles.open(path, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">mode&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;w&amp#39;&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">as &LT/span>&LTspan>f:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">await &LT/span>&LTspan>f.write(data)\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">data_analysis&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">data&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">try&LT/span>&LTspan>:\n&LT/span>&LTspan> html &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>lxml.html.fromstring(data)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>html.xpath(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;//a/@href&amp#39;&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">except&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>[]\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">url_analysis&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">endpoint&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">urls&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>url &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>urls:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>url &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan>url &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;#&amp#39; &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;javascript&amp#39; &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>url:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">continue\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">elif &LT/span>&LTspan>url.startswith(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;/&amp#39;&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>endpoint.endswith(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;/&amp#39;&LT/span>&LTspan>):\n&LT/span>&LTspan> endpoint &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>endpoint[:&LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">yield &LT/span>&LTspan>endpoint &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan>url\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">elif &LT/span>&LTspan>url.endswith(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;.html&amp#39;&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan>url.endswith(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;.htm&amp#39;&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan>url.endswith(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;.shtml&amp#39;&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan>url.endswith(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;/&amp#39;&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;?&amp#39; &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>url:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">yield &LT/span>&LTspan>url\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">path_gene&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">endpoint&LT/span>&LTspan>):\n&LT/span>&LTspan> result &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>urlparse(endpoint)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">f&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;data/&LT/span>&LTspan>{&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;/&ampquot;&LT/span>&LTspan>.join(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">filter&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">lambda &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">x&LT/span>&LTspan>:x, result.hostname.split(&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;.&ampquot;&LT/span>&LTspan>)))[::&LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>])}{result.path&LT/span>&LTspan style=\"color:#f92672;\">+&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;/index.html&ampquot; &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>result.path&LT/span>&LTspan style=\"color:#f92672;\">!=&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;/&ampquot; &LT/span>&LTspan style=\"color:#f92672;\">else &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;/index.html&ampquot;&LT/span>&LTspan>}{result.query.replace(&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;/&ampquot;&LT/span>&LTspan>,&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;&ampquot;&LT/span>&LTspan>)}&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"color:#f92672;\">async &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">pushurl&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">url_iter&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">queue&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">global &LT/span>&LTspan>MAX_GET\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">try&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>url &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>url_iter:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>MAX_GET &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">await &LT/span>&LTspan>queue.put(url)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">except &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">Exception &LT/span>&LTspan style=\"color:#f92672;\">as &LT/span>&LTspan>e:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">pass\n&LT/span>&LTspan> \n&LT/span>&LTspan style=\"color:#f92672;\">async &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">spider&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">name&LT/span>&LTspan>,&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">queue&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">global &LT/span>&LTspan>MAX_GET, spider_content_set, spider_url_set\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>MAX_GET &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">try&LT/span>&LTspan>:\n&LT/span>&LTspan> endpoint &LT/span>&LTspan style=\"color:#f92672;\">= await &LT/span>&LTspan>queue.get()\n&LT/span>&LTspan> data &LT/span>&LTspan style=\"color:#f92672;\">= await &LT/span>&LTspan>fetch(endpoint)\n&LT/span>&LTspan> md5data &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>md5(data.encode()).hexdigest()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>md5data &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>spider_content_set:\n&LT/span>&LTspan> status[&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;same_content&amp#39;&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">continue\n&LT/span>&LTspan> MAX_GET &LT/span>&LTspan style=\"color:#f92672;\">-= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> status[&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;all&amp#39;&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> spider_content_set.add(md5data)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">await &LT/span>&LTspan>savefile(path_gene(endpoint), data)\n&LT/span>&LTspan> asyncio.gather(asyncio.create_task(pushurl(url_analysis(endpoint, data_analysis(data)), queue)), &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">return_exceptions&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">False&LT/span>&LTspan>)\n&LT/span>&LTspan> status[&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;success&amp#39;&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">except &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">Exception &LT/span>&LTspan style=\"color:#f92672;\">as &LT/span>&LTspan>e:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">pass\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">exit&LT/span>&LTspan>():\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">print&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;exit&amp#39;&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>task &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>asyncio.Task.all_tasks():\n&LT/span>&LTspan> task.cancel()\n&LT/span>&LTspan> sys.exit(&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>)\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"color:#f92672;\">async &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">main&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">first_endpoint&LT/span>&LTspan>):\n&LT/span>&LTspan> queue &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>asyncio.Queue(MAX_QUEUE_SIZE)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">await &LT/span>&LTspan>queue.put(first_endpoint)\n&LT/span>&LTspan> asyncio.gather(&LT/span>&LTspan style=\"color:#f92672;\">*&LT/span>&LTspan>[asyncio.create_task(spider(spider_id,queue)) &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>spider_id &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(MAX_WORKER)], &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">return_exceptions&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">False&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">try&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan style=\"color:#ae81ff;\">True&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">await &LT/span>&LTspan>asyncio.sleep(&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">print&LT/span>&LTspan>(queue.qsize(), MAX_GET, status)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>MAX_GET &LT/span>&LTspan style=\"color:#f92672;\">&amplt;= &LT/span>&LTspan style=\"color:#ae81ff;\">0 &LT/span>&LTspan style=\"color:#f92672;\">or not &LT/span>&LTspan>queue.qsize():\n&LT/span>&LTspan> exit()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">except&LT/span>&LTspan>:\n&LT/span>&LTspan> exit()\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>__name__ &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;__main__&ampquot;&LT/span>&LTspan>:\n&LT/span>&LTspan> asyncio.run(main(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;https://eindex.me/&amp#39;&LT/span>&LTspan>))\n&LT/span>&LTspan> asyncio.get_event_loop().close()\n&LT/span>&LT/code>&LT/pre>\n","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/","slug":"one-hundred-line-async-crawler","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"一百行代码实现异步爬虫","description":null,"updated":null,"date":"2019-09-07T12:17:25+08:00","year":2019,"month":9,"day":7,"taxonomies":{"tags":["Python","Crawler","Async"]},"extra":{},"path":"/cn/posts/one-hundred-line-async-crawler/","components":["cn","posts","one-hundred-line-async-crawler"],"summary":"&LTp>一个优雅的爬虫需要一下这些东西：&LT/p>\n&LTul>\n&LTli>请求器&LT/li>\n&LTli>页面解析器&LT/li>\n&LTli>链接生成器&LT/li>\n&LTli>调度器&LT/li>\n&LT/ul>\n","toc":[{"level":2,"id":"qing-qiu-qi","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/#qing-qiu-qi","title":"请求器","children":[]},{"level":2,"id":"ye-mian-jie-xi-qi","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/#ye-mian-jie-xi-qi","title":"页面解析器","children":[]},{"level":2,"id":"lian-jie-sheng-cheng-qi","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/#lian-jie-sheng-cheng-qi","title":"链接生成器","children":[]},{"level":2,"id":"diao-du-qi","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/#diao-du-qi","title":"调度器","children":[]},{"level":2,"id":"yi-bu","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/#yi-bu","title":"异步","children":[]},{"level":2,"id":"dai-ma","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/#dai-ma","title":"代码","children":[]}],"word_count":466,"reading_time":3,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/","title":"一百行代码实现异步爬虫","path":"/home/runner/work/blog/blog/content/posts/one-hundred-line-async-crawler.cn.md"}],"backlinks":[]},"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/beancount-introduce/","title":"复式记账工具 Beancount","path":"/home/runner/work/blog/blog/content/posts/beancount-introduce.cn.md"}],"backlinks":[{"permalink":"https://eindex.me/cn/posts/my-homelab-introduce/","title":"My HomeLab"}]},{"relative_path":"posts/one-hundred-line-async-crawler.cn.md","content":"&LTp>一个优雅的爬虫需要一下这些东西：&LT/p>\n&LTul>\n&LTli>请求器&LT/li>\n&LTli>页面解析器&LT/li>\n&LTli>链接生成器&LT/li>\n&LTli>调度器&LT/li>\n&LT/ul>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"qing-qiu-qi\">请求器&LT/h2>\n&LTp>负责发送请求。&LT/p>\n&LTh2 id=\"ye-mian-jie-xi-qi\">页面解析器&LT/h2>\n&LTp>负责从页面上解析出继续爬的链接。&LT/p>\n&LTh2 id=\"lian-jie-sheng-cheng-qi\">链接生成器&LT/h2>\n&LTp>负责处理继续爬虫的链接并放入队列。&LT/p>\n&LTh2 id=\"diao-du-qi\">调度器&LT/h2>\n&LTp>决定链接是否应该被爬去的核心部件。&LT/p>\n&LTh2 id=\"yi-bu\">异步&LT/h2>\n&LTp>同时有多个请求在发送，即时异步爬虫。&LT/p>\n&LTh2 id=\"dai-ma\">代码&LT/h2>\n&LTp>相关代码已上传到 &LTa rel=\"nofollow\" href=\"https://github.com/EINDEX/100-line-async-spider\">Github[https://github.com/EINDEX/100-line-async-spider]&LT/a>。&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"color:#f92672;\">import &LT/span>&LTspan>aiohttp, asyncio, aiofiles, lxml, pathlib, sys, re, lxml.html\n&LT/span>&LTspan style=\"color:#f92672;\">from &LT/span>&LTspan>urllib.parse &LT/span>&LTspan style=\"color:#f92672;\">import &LT/span>&LTspan>urlparse\n&LT/span>&LTspan style=\"color:#f92672;\">from &LT/span>&LTspan>pathlib &LT/span>&LTspan style=\"color:#f92672;\">import &LT/span>&LTspan>Path\n&LT/span>&LTspan style=\"color:#f92672;\">from &LT/span>&LTspan>hashlib &LT/span>&LTspan style=\"color:#f92672;\">import &LT/span>&LTspan>md5\n&LT/span>&LTspan>\n&LT/span>&LTspan>MAX_GET, MAX_QUEUE_SIZE, MAX_WORKER &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">10000&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#ae81ff;\">100&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#ae81ff;\">20\n&LT/span>&LTspan>spider_url_set, spider_content_set &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">set&LT/span>&LTspan>(), &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">set&LT/span>&LTspan>()\n&LT/span>&LTspan>status &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>{&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;success&ampquot;&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;all&ampquot;&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;same&ampquot;&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;same_content&ampquot;&LT/span>&LTspan>:&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>}\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"color:#f92672;\">async &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">fetch&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">url&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">global &LT/span>&LTspan>MAX_GET\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>MAX_GET &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">async with &LT/span>&LTspan>aiohttp.ClientSession(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">connector&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan>aiohttp.TCPConnector(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">ssl&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">False&LT/span>&LTspan>), &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">timeout&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan>aiohttp.ClientTimeout(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">total&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>)) &LT/span>&LTspan style=\"color:#f92672;\">as &LT/span>&LTspan>session:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">async with &LT/span>&LTspan>session.get(url) &LT/span>&LTspan style=\"color:#f92672;\">as &LT/span>&LTspan>response:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return await &LT/span>&LTspan>response.text()\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"color:#f92672;\">async &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">savefile&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">path&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">data&LT/span>&LTspan>):\n&LT/span>&LTspan> path &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>Path(path)\n&LT/span>&LTspan> path.parent.mkdir(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">parents&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">True&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">exist_ok&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">True&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">async with &LT/span>&LTspan>aiofiles.open(path, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">mode&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;w&amp#39;&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">as &LT/span>&LTspan>f:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">await &LT/span>&LTspan>f.write(data)\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">data_analysis&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">data&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">try&LT/span>&LTspan>:\n&LT/span>&LTspan> html &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>lxml.html.fromstring(data)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>html.xpath(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;//a/@href&amp#39;&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">except&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>[]\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">url_analysis&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">endpoint&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">urls&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>url &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>urls:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>url &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan>url &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;#&amp#39; &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;javascript&amp#39; &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>url:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">continue\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">elif &LT/span>&LTspan>url.startswith(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;/&amp#39;&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>endpoint.endswith(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;/&amp#39;&LT/span>&LTspan>):\n&LT/span>&LTspan> endpoint &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>endpoint[:&LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">yield &LT/span>&LTspan>endpoint &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan>url\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">elif &LT/span>&LTspan>url.endswith(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;.html&amp#39;&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan>url.endswith(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;.htm&amp#39;&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan>url.endswith(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;.shtml&amp#39;&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan>url.endswith(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;/&amp#39;&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;?&amp#39; &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>url:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">yield &LT/span>&LTspan>url\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">path_gene&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">endpoint&LT/span>&LTspan>):\n&LT/span>&LTspan> result &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>urlparse(endpoint)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">f&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;data/&LT/span>&LTspan>{&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;/&ampquot;&LT/span>&LTspan>.join(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">filter&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">lambda &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">x&LT/span>&LTspan>:x, result.hostname.split(&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;.&ampquot;&LT/span>&LTspan>)))[::&LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>])}{result.path&LT/span>&LTspan style=\"color:#f92672;\">+&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;/index.html&ampquot; &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>result.path&LT/span>&LTspan style=\"color:#f92672;\">!=&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;/&ampquot; &LT/span>&LTspan style=\"color:#f92672;\">else &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;/index.html&ampquot;&LT/span>&LTspan>}{result.query.replace(&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;/&ampquot;&LT/span>&LTspan>,&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;&ampquot;&LT/span>&LTspan>)}&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"color:#f92672;\">async &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">pushurl&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">url_iter&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">queue&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">global &LT/span>&LTspan>MAX_GET\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">try&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>url &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>url_iter:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>MAX_GET &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">await &LT/span>&LTspan>queue.put(url)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">except &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">Exception &LT/span>&LTspan style=\"color:#f92672;\">as &LT/span>&LTspan>e:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">pass\n&LT/span>&LTspan> \n&LT/span>&LTspan style=\"color:#f92672;\">async &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">spider&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">name&LT/span>&LTspan>,&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">queue&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">global &LT/span>&LTspan>MAX_GET, spider_content_set, spider_url_set\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>MAX_GET &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">try&LT/span>&LTspan>:\n&LT/span>&LTspan> endpoint &LT/span>&LTspan style=\"color:#f92672;\">= await &LT/span>&LTspan>queue.get()\n&LT/span>&LTspan> data &LT/span>&LTspan style=\"color:#f92672;\">= await &LT/span>&LTspan>fetch(endpoint)\n&LT/span>&LTspan> md5data &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>md5(data.encode()).hexdigest()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>md5data &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>spider_content_set:\n&LT/span>&LTspan> status[&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;same_content&amp#39;&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">continue\n&LT/span>&LTspan> MAX_GET &LT/span>&LTspan style=\"color:#f92672;\">-= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> status[&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;all&amp#39;&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> spider_content_set.add(md5data)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">await &LT/span>&LTspan>savefile(path_gene(endpoint), data)\n&LT/span>&LTspan> asyncio.gather(asyncio.create_task(pushurl(url_analysis(endpoint, data_analysis(data)), queue)), &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">return_exceptions&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">False&LT/span>&LTspan>)\n&LT/span>&LTspan> status[&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;success&amp#39;&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">except &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">Exception &LT/span>&LTspan style=\"color:#f92672;\">as &LT/span>&LTspan>e:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">pass\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">exit&LT/span>&LTspan>():\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">print&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;exit&amp#39;&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>task &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>asyncio.Task.all_tasks():\n&LT/span>&LTspan> task.cancel()\n&LT/span>&LTspan> sys.exit(&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>)\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"color:#f92672;\">async &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">main&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">first_endpoint&LT/span>&LTspan>):\n&LT/span>&LTspan> queue &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>asyncio.Queue(MAX_QUEUE_SIZE)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">await &LT/span>&LTspan>queue.put(first_endpoint)\n&LT/span>&LTspan> asyncio.gather(&LT/span>&LTspan style=\"color:#f92672;\">*&LT/span>&LTspan>[asyncio.create_task(spider(spider_id,queue)) &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>spider_id &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(MAX_WORKER)], &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">return_exceptions&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">False&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">try&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan style=\"color:#ae81ff;\">True&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">await &LT/span>&LTspan>asyncio.sleep(&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">print&LT/span>&LTspan>(queue.qsize(), MAX_GET, status)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>MAX_GET &LT/span>&LTspan style=\"color:#f92672;\">&amplt;= &LT/span>&LTspan style=\"color:#ae81ff;\">0 &LT/span>&LTspan style=\"color:#f92672;\">or not &LT/span>&LTspan>queue.qsize():\n&LT/span>&LTspan> exit()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">except&LT/span>&LTspan>:\n&LT/span>&LTspan> exit()\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>__name__ &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;__main__&ampquot;&LT/span>&LTspan>:\n&LT/span>&LTspan> asyncio.run(main(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;https://eindex.me/&amp#39;&LT/span>&LTspan>))\n&LT/span>&LTspan> asyncio.get_event_loop().close()\n&LT/span>&LT/code>&LT/pre>\n","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/","slug":"one-hundred-line-async-crawler","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"一百行代码实现异步爬虫","description":null,"updated":null,"date":"2019-09-07T12:17:25+08:00","year":2019,"month":9,"day":7,"taxonomies":{"tags":["Python","Crawler","Async"]},"extra":{},"path":"/cn/posts/one-hundred-line-async-crawler/","components":["cn","posts","one-hundred-line-async-crawler"],"summary":"&LTp>一个优雅的爬虫需要一下这些东西：&LT/p>\n&LTul>\n&LTli>请求器&LT/li>\n&LTli>页面解析器&LT/li>\n&LTli>链接生成器&LT/li>\n&LTli>调度器&LT/li>\n&LT/ul>\n","toc":[{"level":2,"id":"qing-qiu-qi","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/#qing-qiu-qi","title":"请求器","children":[]},{"level":2,"id":"ye-mian-jie-xi-qi","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/#ye-mian-jie-xi-qi","title":"页面解析器","children":[]},{"level":2,"id":"lian-jie-sheng-cheng-qi","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/#lian-jie-sheng-cheng-qi","title":"链接生成器","children":[]},{"level":2,"id":"diao-du-qi","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/#diao-du-qi","title":"调度器","children":[]},{"level":2,"id":"yi-bu","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/#yi-bu","title":"异步","children":[]},{"level":2,"id":"dai-ma","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/#dai-ma","title":"代码","children":[]}],"word_count":466,"reading_time":3,"assets":[],"draft":false,"lang":"cn","lower":{"relative_path":"posts/beancount-introduce.cn.md","content":"&LTp>本文简单介绍一下复式记账和 Beancount 的使用方法。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"wei-shi-yao-yao-ji-zhang\">为什么要记账&LT/h2>\n&LTp>记账是理财的第一步，熟话说得好：”你不理财，才不理你。“&LT/p>\n&LTp>记账可以明确自己每一笔钱花在哪去了，这个月最大的开销是什么，以及对自己的冲动消费、不必要消费能有一个反思。&LT/p>\n&LTp>我曾使用过很多记账软件如：挖财、随手记、网易有钱、MoneyWiz、MOZE 等，其实记账最大的问题在于很难坚持下来，因为短期来看记账的收益并不高，而从长远来看，账本也能体现经济的健康状况。&LT/p>\n&LTh2 id=\"fu-shi-ji-zhang-shi-shi-yao\">复式记账是什么&LT/h2>\n&LTp>复式记账（Double Entry Bookkeeping）是以资产与权益平衡关系作为记账基础，对每一笔账单，都要以相等的金额在两个相互联系的账户中进行记录。&LT/p>\n&LTp>原理：\n&LTcode>资产 = 负债 + 所有者权益&LT/code>&LT/p>\n&LTp>复式记账的优点是：&LT/p>\n&LTul>\n&LTli>账户对应关系清楚，可以鲜明的表示各种经济活动的来龙去脉。&LT/li>\n&LTli>有借必有贷，借贷必相等的记账方式，对于检查账单是否记对非常有帮助。&LT/li>\n&LT/ul>\n&LTh2 id=\"he-wei-beancount\">何为 Beancount&LT/h2>\n&LTp>Beancount 是一个用 Python 实现的开源复式记账软件。&LT/p>\n&LTp>数据文件基于纯文本，所以不用担心程序出问题，数据没法看懂。&LT/p>\n&LTp>Beancount（fava）的界面大概是这个样子。\n&LTimg src=\"https://eindex.me/cn/posts/beancount-introduce/media/15676038764861/15676114899083.jpg\" alt=\"-w2638\" />\n&LTimg src=\"https://eindex.me/cn/posts/beancount-introduce/media/15676038764861/15676115071325.jpg\" alt=\"-w1319\" />&LT/p>\n&LTp>Beancount 的优点：&LT/p>\n&LTol>\n&LTli>开源，可以自己写功能。&LT/li>\n&LTli>数据基于纯文本，自己掌握所有数据，不担心隐私泄露。&LT/li>\n&LTli>支持各种图标，支持SQL查询生成报表。&LT/li>\n&LTli>支持预算（fava）。&LT/li>\n&LTli>支持无限账本、无限账户、无限币种。&LT/li>\n&LTli>可以导入各种账单文件（有些需要写代码支持）。&LT/li>\n&LTli>可以用 Git、iCloud 等工具来管理账本。&LT/li>\n&LT/ol>\n&LTp>不仅如此，Beancount 还可以量化年假，产假等等非标准金融标的。&LT/p>\n&LTp>例如讲公司年假记为一笔收入，从公司账户转入到个人账户，成为资产。使用掉年假，则把年假从个人资产转出到消费即可。这样就相当于把年假消费掉了。而年假的货币单位可以设置成 Day。&LT/p>\n&LTp>写在 Beancount 里大概是这个样子。&LT/p>\n&LTpre data-lang=\"beancount\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-beancount \">&LTcode class=\"language-beancount\" data-lang=\"beancount\">&LTspan>2019-04-24 * &ampquot;CompanyName&ampquot; &ampquot;请假一天休息&ampquot;\n&LT/span>&LTspan> Assets:Leave -1.00 DAY\n&LT/span>&LTspan> Expenses:Health\n&LT/span>&LTspan>\n&LT/span>&LTspan>2019-04-01 * &ampquot;CompanyName&ampquot; &ampquot;年假-初始化&ampquot;\n&LT/span>&LTspan> Income:Job:CompanyName:Leave\n&LT/span>&LTspan> Assets:Leave +7.00 DAY\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"ji-ben-yu-fa\">基本语法&LT/h2>\n&LTh3 id=\"ji-ben-ge-shi\">基本格式&LT/h3>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>YYYY-MM-DD &amplt;directive&ampgt; &amplt;arguments...&ampgt;\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"chuang-jian-huo-bi\">创建货币&LT/h3>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>option &ampquot;operating_currency&ampquot; &ampquot;CNY&ampquot;\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"zhang-hu-xiang-guan\">账户相关&LT/h3>\n&LTp>创建账户&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>1970-01-01 open Assets:Bank:ABC CNY\n&LT/span>&LT/code>&LT/pre>\n&LTp>备注账户&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>1970-01-01 note Assets:Bank:ABC &ampquot;农行卡&ampquot;\n&LT/span>&LT/code>&LT/pre>\n&LTp>关闭帐户，账户关闭后就可以在现实界面上过滤掉已经关闭的账户。&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>1970-01-02 close Assets:Bank:ABC\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"jiao-yi\">交易&LT/h3>\n&LTp>这是单笔简单交易的写法，表示我去美食风暴用微信支付吃了个盒饭。&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>2019-08-02 * &ampquot;美食风暴&ampquot; &ampquot;盒饭&ampquot;\n&LT/span>&LTspan> Assets:Wechat:EINDEX -18 CNY\n&LT/span>&LTspan> Expenses:Food:Restaurant:Lunch \n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"she-zhi-jie-ge\">设置价格&LT/h3>\n&LTp>可以这是各种“货币”之间的价格转换。如果用上程序员思维，我们就可以实现股票价格跟踪、汇率跟踪等等。来提高账本的准确度。&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>2019-10-01 price USD 7 CNY\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"yu-e-zi-dong-she-zhi\">余额自动设置&LT/h3>\n&LTp>这是一个偷懒必备功能，下面的 &LTcode>pad&LT/code>，我农行卡自动平账使用&LTcode>Equity:Opening-Balances&LT/code>，明天的 &LTcode>balance&LT/code> 表示在 2019年10月02日时这张卡的余额为4000CNY，如果旧的账单不平就会从&LTcode>Equity:Opening-Balances&LT/code>自动平账。&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>2019-10-01 pad Assets:Bank:ABC Equity:Opening-Balances\n&LT/span>&LTspan>\n&LT/span>&LTspan>2019-10-02 balance Assets:Bank:ABC 4000 CNY\n&LT/span>&LT/code>&LT/pre>\n&LTp>如果未来要在这个账户过去的账目上做删改，2019年10月1日的余额也会是4000元不变。&LT/p>\n&LTh2 id=\"shi-yong-beancount\">使用 Beancount&LT/h2>\n&LTp>首先需要安装 Python 3，然后安装 beancount、fava。&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>pip install beancount fava\n&LT/span>&LT/code>&LT/pre>\n&LTp>&LTcode>fava&LT/code> 是 beancount 的一个 WebUI 实现，可以可视化的看见自己的账本。&LT/p>\n&LTh3 id=\"example\">Example&LT/h3>\n&LTp>官方提供了一个 Beancount 的使用用例。&LT/p>\n&LTpre style=\"background-color:#272822;color:#f8f8f2;\">&LTcode>&LTspan>bean-example &ampgt; example.bean\n&LT/span>&LTspan>fava example.bean\n&LT/span>&LT/code>&LT/pre>\n&LTp>然后打开 &LTcode>localhost:5000&LT/code> 就可以在本地体验 Beancount 与 fava 了。&LT/p>\n&LTp>&LTimg src=\"https://eindex.me/cn/posts/beancount-introduce/media/15676038764861/15676114399432.jpg\" alt=\"-w1315\" />&LT/p>\n","permalink":"https://eindex.me/cn/posts/beancount-introduce/","slug":"beancount-introduce","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"复式记账工具 Beancount","description":null,"updated":null,"date":"2019-11-30T00:00:00+08:00","year":2019,"month":11,"day":30,"taxonomies":{"series":["algorithm"],"tags":["Beancount"]},"extra":{},"path":"/cn/posts/beancount-introduce/","components":["cn","posts","beancount-introduce"],"summary":"&LTp>本文简单介绍一下复式记账和 Beancount 的使用方法。&LT/p>\n","toc":[{"level":2,"id":"wei-shi-yao-yao-ji-zhang","permalink":"https://eindex.me/cn/posts/beancount-introduce/#wei-shi-yao-yao-ji-zhang","title":"为什么要记账","children":[]},{"level":2,"id":"fu-shi-ji-zhang-shi-shi-yao","permalink":"https://eindex.me/cn/posts/beancount-introduce/#fu-shi-ji-zhang-shi-shi-yao","title":"复式记账是什么","children":[]},{"level":2,"id":"he-wei-beancount","permalink":"https://eindex.me/cn/posts/beancount-introduce/#he-wei-beancount","title":"何为 Beancount","children":[]},{"level":2,"id":"ji-ben-yu-fa","permalink":"https://eindex.me/cn/posts/beancount-introduce/#ji-ben-yu-fa","title":"基本语法","children":[{"level":3,"id":"ji-ben-ge-shi","permalink":"https://eindex.me/cn/posts/beancount-introduce/#ji-ben-ge-shi","title":"基本格式","children":[]},{"level":3,"id":"chuang-jian-huo-bi","permalink":"https://eindex.me/cn/posts/beancount-introduce/#chuang-jian-huo-bi","title":"创建货币","children":[]},{"level":3,"id":"zhang-hu-xiang-guan","permalink":"https://eindex.me/cn/posts/beancount-introduce/#zhang-hu-xiang-guan","title":"账户相关","children":[]},{"level":3,"id":"jiao-yi","permalink":"https://eindex.me/cn/posts/beancount-introduce/#jiao-yi","title":"交易","children":[]},{"level":3,"id":"she-zhi-jie-ge","permalink":"https://eindex.me/cn/posts/beancount-introduce/#she-zhi-jie-ge","title":"设置价格","children":[]},{"level":3,"id":"yu-e-zi-dong-she-zhi","permalink":"https://eindex.me/cn/posts/beancount-introduce/#yu-e-zi-dong-she-zhi","title":"余额自动设置","children":[]}]},{"level":2,"id":"shi-yong-beancount","permalink":"https://eindex.me/cn/posts/beancount-introduce/#shi-yong-beancount","title":"使用 Beancount","children":[{"level":3,"id":"example","permalink":"https://eindex.me/cn/posts/beancount-introduce/#example","title":"Example","children":[]}]}],"word_count":1012,"reading_time":6,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/beancount-introduce/","title":"复式记账工具 Beancount","path":"/home/runner/work/blog/blog/content/posts/beancount-introduce.cn.md"}],"backlinks":[{"permalink":"https://eindex.me/cn/posts/my-homelab-introduce/","title":"My HomeLab"}]},"higher":{"relative_path":"posts/1984-after-reading.cn.md","content":"&LTp>这本书看了很久了，下面这句话一直环绕在我脑中，始终不能忘记。&LT/p>\n&LTblockquote>\n&LTp>“老大哥在看着你。”&LT/p>\n&LT/blockquote>\n&LTspan id=\"continue-reading\">&LT/span>\n&LTp>在书中的那个时代， 是个反乌托邦的社会， 这个社会有一个叫做老大哥的统治者。四处都贴着老大哥的肖像， 大家崇拜着这个叫做老大哥的领袖。&LT/p>\n&LTp>那个社会中存在这样一句口号: “战争即和平；自由即奴役；无知即力量。” 看着就觉得非常厉害，读完之后在看这句话， 更能理解其中的深意。&LT/p>\n&LTp>文中以一个小职员主人公温斯顿的日常生活，带领我们进入《1984》的世界。老大哥控制思想、老大哥永远正确、老大哥创造了历史，老大哥是人民的救星。当然也有反对老大哥的人，想推翻国家政权的人。&LT/p>\n&LTp>而我们的主人公因为有自己的思想，负责修改历史记录，所以他犯下了思想罪，迎接他的就是死亡。因为“思想罪不会带来死亡，思想罪本身就是死亡。”&LT/p>\n&LTp>之后温斯顿遇到了爱情，以及真正的性，同时加入到了反老大哥的组织。他读到反党领袖所写的《寡头政治集体主义的理论与实践》，他读到这本书关键之处，被思想警察活捉。&LT/p>\n&LTp>在监狱，反复被拷打，被改造，只有相信老大哥的人才能真正的出狱。&LT/p>\n&LTp>他也出狱了，他放弃了自己的思想，他死去了。&LT/p>\n&LTp>这本书里面还有几句经典的话语：&LT/p>\n&LTblockquote>\n&LTp>谁控制过去，谁就控制未来；谁控制现在，谁就控制过去。&LT/p>\n&LT/blockquote>\n&LTblockquote>\n&LTp>可认为自人称之为人以来，便有三等人。 上等人，中等人和下等人。这三种人的目标完全不可调和。上等人的目标是要保持他们的地位。中等人的目标是要同高等人交换地位。下等人劳苦之余无暇旁顾，若说有目标的话，无非是取消一切差别，建立一个人人平等的社会。&LT/p>\n&LT/blockquote>\n&LTp>这书写于1949年， 预言的是英国40年后的样子，书中是一个没有自由，没有思想，没有隐私的社会。&LT/p>\n&LTp>谁也想不到，在70年后的今天，网络暴力四处横行，我们每个人都在谨言慎行，每个人都在用自己的思想强加于他人。&LT/p>\n&LTp>我们这个社会自由吗？我们需要自由吗？自由的定义是什么？&LT/p>\n&LTp>“老大哥在看着你！”&LT/p>\n","permalink":"https://eindex.me/cn/posts/1984-after-reading/","slug":"1984-after-reading","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"1984","description":null,"updated":null,"date":"2019-09-02T23:28:58+08:00","year":2019,"month":9,"day":2,"taxonomies":{"tags":["After Reading"]},"extra":{"doubian-id":4512435},"path":"/cn/posts/1984-after-reading/","components":["cn","posts","1984-after-reading"],"summary":"&LTp>这本书看了很久了，下面这句话一直环绕在我脑中，始终不能忘记。&LT/p>\n&LTblockquote>\n&LTp>“老大哥在看着你。”&LT/p>\n&LT/blockquote>\n","toc":[],"word_count":664,"reading_time":4,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/1984-after-reading/","title":"1984","path":"/home/runner/work/blog/blog/content/posts/1984-after-reading.cn.md"}],"backlinks":[]},"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/","title":"一百行代码实现异步爬虫","path":"/home/runner/work/blog/blog/content/posts/one-hundred-line-async-crawler.cn.md"}],"backlinks":[]},{"relative_path":"posts/1984-after-reading.cn.md","content":"&LTp>这本书看了很久了，下面这句话一直环绕在我脑中，始终不能忘记。&LT/p>\n&LTblockquote>\n&LTp>“老大哥在看着你。”&LT/p>\n&LT/blockquote>\n&LTspan id=\"continue-reading\">&LT/span>\n&LTp>在书中的那个时代， 是个反乌托邦的社会， 这个社会有一个叫做老大哥的统治者。四处都贴着老大哥的肖像， 大家崇拜着这个叫做老大哥的领袖。&LT/p>\n&LTp>那个社会中存在这样一句口号: “战争即和平；自由即奴役；无知即力量。” 看着就觉得非常厉害，读完之后在看这句话， 更能理解其中的深意。&LT/p>\n&LTp>文中以一个小职员主人公温斯顿的日常生活，带领我们进入《1984》的世界。老大哥控制思想、老大哥永远正确、老大哥创造了历史，老大哥是人民的救星。当然也有反对老大哥的人，想推翻国家政权的人。&LT/p>\n&LTp>而我们的主人公因为有自己的思想，负责修改历史记录，所以他犯下了思想罪，迎接他的就是死亡。因为“思想罪不会带来死亡，思想罪本身就是死亡。”&LT/p>\n&LTp>之后温斯顿遇到了爱情，以及真正的性，同时加入到了反老大哥的组织。他读到反党领袖所写的《寡头政治集体主义的理论与实践》，他读到这本书关键之处，被思想警察活捉。&LT/p>\n&LTp>在监狱，反复被拷打，被改造，只有相信老大哥的人才能真正的出狱。&LT/p>\n&LTp>他也出狱了，他放弃了自己的思想，他死去了。&LT/p>\n&LTp>这本书里面还有几句经典的话语：&LT/p>\n&LTblockquote>\n&LTp>谁控制过去，谁就控制未来；谁控制现在，谁就控制过去。&LT/p>\n&LT/blockquote>\n&LTblockquote>\n&LTp>可认为自人称之为人以来，便有三等人。 上等人，中等人和下等人。这三种人的目标完全不可调和。上等人的目标是要保持他们的地位。中等人的目标是要同高等人交换地位。下等人劳苦之余无暇旁顾，若说有目标的话，无非是取消一切差别，建立一个人人平等的社会。&LT/p>\n&LT/blockquote>\n&LTp>这书写于1949年， 预言的是英国40年后的样子，书中是一个没有自由，没有思想，没有隐私的社会。&LT/p>\n&LTp>谁也想不到，在70年后的今天，网络暴力四处横行，我们每个人都在谨言慎行，每个人都在用自己的思想强加于他人。&LT/p>\n&LTp>我们这个社会自由吗？我们需要自由吗？自由的定义是什么？&LT/p>\n&LTp>“老大哥在看着你！”&LT/p>\n","permalink":"https://eindex.me/cn/posts/1984-after-reading/","slug":"1984-after-reading","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"1984","description":null,"updated":null,"date":"2019-09-02T23:28:58+08:00","year":2019,"month":9,"day":2,"taxonomies":{"tags":["After Reading"]},"extra":{"doubian-id":4512435},"path":"/cn/posts/1984-after-reading/","components":["cn","posts","1984-after-reading"],"summary":"&LTp>这本书看了很久了，下面这句话一直环绕在我脑中，始终不能忘记。&LT/p>\n&LTblockquote>\n&LTp>“老大哥在看着你。”&LT/p>\n&LT/blockquote>\n","toc":[],"word_count":664,"reading_time":4,"assets":[],"draft":false,"lang":"cn","lower":{"relative_path":"posts/one-hundred-line-async-crawler.cn.md","content":"&LTp>一个优雅的爬虫需要一下这些东西：&LT/p>\n&LTul>\n&LTli>请求器&LT/li>\n&LTli>页面解析器&LT/li>\n&LTli>链接生成器&LT/li>\n&LTli>调度器&LT/li>\n&LT/ul>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"qing-qiu-qi\">请求器&LT/h2>\n&LTp>负责发送请求。&LT/p>\n&LTh2 id=\"ye-mian-jie-xi-qi\">页面解析器&LT/h2>\n&LTp>负责从页面上解析出继续爬的链接。&LT/p>\n&LTh2 id=\"lian-jie-sheng-cheng-qi\">链接生成器&LT/h2>\n&LTp>负责处理继续爬虫的链接并放入队列。&LT/p>\n&LTh2 id=\"diao-du-qi\">调度器&LT/h2>\n&LTp>决定链接是否应该被爬去的核心部件。&LT/p>\n&LTh2 id=\"yi-bu\">异步&LT/h2>\n&LTp>同时有多个请求在发送，即时异步爬虫。&LT/p>\n&LTh2 id=\"dai-ma\">代码&LT/h2>\n&LTp>相关代码已上传到 &LTa rel=\"nofollow\" href=\"https://github.com/EINDEX/100-line-async-spider\">Github[https://github.com/EINDEX/100-line-async-spider]&LT/a>。&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"color:#f92672;\">import &LT/span>&LTspan>aiohttp, asyncio, aiofiles, lxml, pathlib, sys, re, lxml.html\n&LT/span>&LTspan style=\"color:#f92672;\">from &LT/span>&LTspan>urllib.parse &LT/span>&LTspan style=\"color:#f92672;\">import &LT/span>&LTspan>urlparse\n&LT/span>&LTspan style=\"color:#f92672;\">from &LT/span>&LTspan>pathlib &LT/span>&LTspan style=\"color:#f92672;\">import &LT/span>&LTspan>Path\n&LT/span>&LTspan style=\"color:#f92672;\">from &LT/span>&LTspan>hashlib &LT/span>&LTspan style=\"color:#f92672;\">import &LT/span>&LTspan>md5\n&LT/span>&LTspan>\n&LT/span>&LTspan>MAX_GET, MAX_QUEUE_SIZE, MAX_WORKER &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">10000&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#ae81ff;\">100&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#ae81ff;\">20\n&LT/span>&LTspan>spider_url_set, spider_content_set &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">set&LT/span>&LTspan>(), &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">set&LT/span>&LTspan>()\n&LT/span>&LTspan>status &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>{&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;success&ampquot;&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;all&ampquot;&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;same&ampquot;&LT/span>&LTspan>: &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;same_content&ampquot;&LT/span>&LTspan>:&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>}\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"color:#f92672;\">async &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">fetch&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">url&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">global &LT/span>&LTspan>MAX_GET\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>MAX_GET &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">async with &LT/span>&LTspan>aiohttp.ClientSession(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">connector&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan>aiohttp.TCPConnector(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">ssl&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">False&LT/span>&LTspan>), &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">timeout&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan>aiohttp.ClientTimeout(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">total&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>)) &LT/span>&LTspan style=\"color:#f92672;\">as &LT/span>&LTspan>session:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">async with &LT/span>&LTspan>session.get(url) &LT/span>&LTspan style=\"color:#f92672;\">as &LT/span>&LTspan>response:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return await &LT/span>&LTspan>response.text()\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"color:#f92672;\">async &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">savefile&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">path&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">data&LT/span>&LTspan>):\n&LT/span>&LTspan> path &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>Path(path)\n&LT/span>&LTspan> path.parent.mkdir(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">parents&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">True&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">exist_ok&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">True&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">async with &LT/span>&LTspan>aiofiles.open(path, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">mode&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;w&amp#39;&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">as &LT/span>&LTspan>f:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">await &LT/span>&LTspan>f.write(data)\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">data_analysis&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">data&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">try&LT/span>&LTspan>:\n&LT/span>&LTspan> html &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>lxml.html.fromstring(data)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>html.xpath(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;//a/@href&amp#39;&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">except&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>[]\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">url_analysis&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">endpoint&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">urls&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>url &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>urls:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>url &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan>url &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;#&amp#39; &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;javascript&amp#39; &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>url:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">continue\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">elif &LT/span>&LTspan>url.startswith(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;/&amp#39;&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>endpoint.endswith(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;/&amp#39;&LT/span>&LTspan>):\n&LT/span>&LTspan> endpoint &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>endpoint[:&LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">yield &LT/span>&LTspan>endpoint &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan>url\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">elif &LT/span>&LTspan>url.endswith(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;.html&amp#39;&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan>url.endswith(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;.htm&amp#39;&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan>url.endswith(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;.shtml&amp#39;&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan>url.endswith(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;/&amp#39;&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;?&amp#39; &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>url:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">yield &LT/span>&LTspan>url\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">path_gene&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">endpoint&LT/span>&LTspan>):\n&LT/span>&LTspan> result &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>urlparse(endpoint)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">f&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;data/&LT/span>&LTspan>{&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;/&ampquot;&LT/span>&LTspan>.join(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">filter&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">lambda &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">x&LT/span>&LTspan>:x, result.hostname.split(&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;.&ampquot;&LT/span>&LTspan>)))[::&LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>])}{result.path&LT/span>&LTspan style=\"color:#f92672;\">+&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;/index.html&ampquot; &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>result.path&LT/span>&LTspan style=\"color:#f92672;\">!=&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;/&ampquot; &LT/span>&LTspan style=\"color:#f92672;\">else &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;/index.html&ampquot;&LT/span>&LTspan>}{result.query.replace(&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;/&ampquot;&LT/span>&LTspan>,&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;&ampquot;&LT/span>&LTspan>)}&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"color:#f92672;\">async &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">pushurl&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">url_iter&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">queue&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">global &LT/span>&LTspan>MAX_GET\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">try&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>url &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>url_iter:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>MAX_GET &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">await &LT/span>&LTspan>queue.put(url)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">except &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">Exception &LT/span>&LTspan style=\"color:#f92672;\">as &LT/span>&LTspan>e:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">pass\n&LT/span>&LTspan> \n&LT/span>&LTspan style=\"color:#f92672;\">async &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">spider&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">name&LT/span>&LTspan>,&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">queue&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">global &LT/span>&LTspan>MAX_GET, spider_content_set, spider_url_set\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>MAX_GET &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">try&LT/span>&LTspan>:\n&LT/span>&LTspan> endpoint &LT/span>&LTspan style=\"color:#f92672;\">= await &LT/span>&LTspan>queue.get()\n&LT/span>&LTspan> data &LT/span>&LTspan style=\"color:#f92672;\">= await &LT/span>&LTspan>fetch(endpoint)\n&LT/span>&LTspan> md5data &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>md5(data.encode()).hexdigest()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>md5data &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>spider_content_set:\n&LT/span>&LTspan> status[&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;same_content&amp#39;&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">continue\n&LT/span>&LTspan> MAX_GET &LT/span>&LTspan style=\"color:#f92672;\">-= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> status[&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;all&amp#39;&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> spider_content_set.add(md5data)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">await &LT/span>&LTspan>savefile(path_gene(endpoint), data)\n&LT/span>&LTspan> asyncio.gather(asyncio.create_task(pushurl(url_analysis(endpoint, data_analysis(data)), queue)), &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">return_exceptions&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">False&LT/span>&LTspan>)\n&LT/span>&LTspan> status[&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;success&amp#39;&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">except &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">Exception &LT/span>&LTspan style=\"color:#f92672;\">as &LT/span>&LTspan>e:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">pass\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">exit&LT/span>&LTspan>():\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">print&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;exit&amp#39;&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>task &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>asyncio.Task.all_tasks():\n&LT/span>&LTspan> task.cancel()\n&LT/span>&LTspan> sys.exit(&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>)\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"color:#f92672;\">async &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">main&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">first_endpoint&LT/span>&LTspan>):\n&LT/span>&LTspan> queue &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>asyncio.Queue(MAX_QUEUE_SIZE)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">await &LT/span>&LTspan>queue.put(first_endpoint)\n&LT/span>&LTspan> asyncio.gather(&LT/span>&LTspan style=\"color:#f92672;\">*&LT/span>&LTspan>[asyncio.create_task(spider(spider_id,queue)) &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>spider_id &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(MAX_WORKER)], &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">return_exceptions&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">False&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">try&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan style=\"color:#ae81ff;\">True&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">await &LT/span>&LTspan>asyncio.sleep(&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">print&LT/span>&LTspan>(queue.qsize(), MAX_GET, status)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>MAX_GET &LT/span>&LTspan style=\"color:#f92672;\">&amplt;= &LT/span>&LTspan style=\"color:#ae81ff;\">0 &LT/span>&LTspan style=\"color:#f92672;\">or not &LT/span>&LTspan>queue.qsize():\n&LT/span>&LTspan> exit()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">except&LT/span>&LTspan>:\n&LT/span>&LTspan> exit()\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>__name__ &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;__main__&ampquot;&LT/span>&LTspan>:\n&LT/span>&LTspan> asyncio.run(main(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;https://eindex.me/&amp#39;&LT/span>&LTspan>))\n&LT/span>&LTspan> asyncio.get_event_loop().close()\n&LT/span>&LT/code>&LT/pre>\n","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/","slug":"one-hundred-line-async-crawler","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"一百行代码实现异步爬虫","description":null,"updated":null,"date":"2019-09-07T12:17:25+08:00","year":2019,"month":9,"day":7,"taxonomies":{"tags":["Python","Crawler","Async"]},"extra":{},"path":"/cn/posts/one-hundred-line-async-crawler/","components":["cn","posts","one-hundred-line-async-crawler"],"summary":"&LTp>一个优雅的爬虫需要一下这些东西：&LT/p>\n&LTul>\n&LTli>请求器&LT/li>\n&LTli>页面解析器&LT/li>\n&LTli>链接生成器&LT/li>\n&LTli>调度器&LT/li>\n&LT/ul>\n","toc":[{"level":2,"id":"qing-qiu-qi","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/#qing-qiu-qi","title":"请求器","children":[]},{"level":2,"id":"ye-mian-jie-xi-qi","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/#ye-mian-jie-xi-qi","title":"页面解析器","children":[]},{"level":2,"id":"lian-jie-sheng-cheng-qi","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/#lian-jie-sheng-cheng-qi","title":"链接生成器","children":[]},{"level":2,"id":"diao-du-qi","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/#diao-du-qi","title":"调度器","children":[]},{"level":2,"id":"yi-bu","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/#yi-bu","title":"异步","children":[]},{"level":2,"id":"dai-ma","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/#dai-ma","title":"代码","children":[]}],"word_count":466,"reading_time":3,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/one-hundred-line-async-crawler/","title":"一百行代码实现异步爬虫","path":"/home/runner/work/blog/blog/content/posts/one-hundred-line-async-crawler.cn.md"}],"backlinks":[]},"higher":{"relative_path":"posts/inverted-index.cn.md","content":"&LTp>世界上最伟大的互联网产品,说是搜索引擎,绝对没有别的产品可以替代,尤其是伟大的先在市场占用率最高的搜索引擎,Google Search.&LT/p>\n&LTp>还有很多差一大截的,比如 Bing, Yahoo 和 YANDEX.&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"shi-yao-shi-sou-suo-yin-qing\">什么是搜索引擎&LT/h2>\n&LTp>所谓搜索引擎，就是根据用户需求与一定算法，运用特定策略从互联网检索出制定信息反馈给用户的一门检索技术。&LT/p>\n&LTp>搜索引擎技术的核心模块一般包括爬虫、索引、检索和排序等，同时可添加其他一系列辅助模块，以为用户创造更好的网络使用环境。 &LT/p>\n&LTh2 id=\"sou-suo-yin-qing-gan-liao-xie-shi-yao\">搜索引擎干了些什么&LT/h2>\n&LTp>简单的说搜索引擎从网络上爬取网页,然后对网页信息进行提取,构建正排索引,然后分析网页内容,建立倒排文件.&LT/p>\n&LTp>接下来我将依次介绍 正排索引、 倒排索引 等知识点.&LT/p>\n&LTh2 id=\"zheng-pai-suo-yin\">正排索引&LT/h2>\n&LTp>正排索引通常是 \nid-document 的键值对&LT/p>\n&LTtable>&LTthead>&LTtr>&LTth>id&LT/th>&LTth>name&LT/th>&LTth>context&LT/th>&LTth>eng_context&LT/th>&LT/tr>&LT/thead>&LTtbody>\n&LTtr>&LTtd>1&LT/td>&LTtd>小明&LT/td>&LTtd>今天吃了3个包子&LT/td>&LTtd>today eating 3 baozi&LT/td>&LT/tr>\n&LTtr>&LTtd>2&LT/td>&LTtd>小仓&LT/td>&LTtd>最后一天看了一本书&LT/td>&LTtd>read a book last day&LT/td>&LT/tr>\n&LTtr>&LTtd>3&LT/td>&LTtd>仓颉&LT/td>&LTtd>去年造了个新华字典&LT/td>&LTtd>make a xinhua dictionary last year&LT/td>&LT/tr>\n&LT/tbody>&LT/table>\n&LTh2 id=\"dao-pai-suo-yin\">倒排索引&LT/h2>\n&LTp>倒排索引是关键词到id列表的映射关系.&LT/p>\n&LTp>倒排索引里面左边的列叫做 term , 里面存储的通常是一个关键词; \n右边的列叫做 posting list,里面存储的是文档的id.&LT/p>\n&LTp>左侧的一列一起叫做 term dictionary.&LT/p>\n&LTp>首先上面有每个 document 有3个 field , 所以会创建3个倒排索引.&LT/p>\n&LTp>如果使用默认的英文分词器,那么表格会创建的索引大概是下面这个样子:&LT/p>\n&LTp>name index:&LT/p>\n&LTtable>&LTthead>&LTtr>&LTth>term&LT/th>&LTth>posting list&LT/th>&LT/tr>&LT/thead>&LTtbody>\n&LTtr>&LTtd>小&LT/td>&LTtd>[1, 2]&LT/td>&LT/tr>\n&LTtr>&LTtd>仓&LT/td>&LTtd>[2, 3]&LT/td>&LT/tr>\n&LTtr>&LTtd>明&LT/td>&LTtd>[1]&LT/td>&LT/tr>\n&LTtr>&LTtd>颉&LT/td>&LTtd>[3]&LT/td>&LT/tr>\n&LT/tbody>&LT/table>\n&LTp>context index:&LT/p>\n&LTtable>&LTthead>&LTtr>&LTth>term&LT/th>&LTth>posting list&LT/th>&LT/tr>&LT/thead>&LTtbody>\n&LTtr>&LTtd>个&LT/td>&LTtd>[1, 3]&LT/td>&LT/tr>\n&LTtr>&LTtd>了&LT/td>&LTtd>[1, 2, 3]&LT/td>&LT/tr>\n&LTtr>&LTtd>今&LT/td>&LTtd>[1]&LT/td>&LT/tr>\n&LTtr>&LTtd>...&LT/td>&LTtd>...&LT/td>&LT/tr>\n&LT/tbody>&LT/table>\n&LTp>eng_context index:&LT/p>\n&LTtable>&LTthead>&LTtr>&LTth>term&LT/th>&LTth>posting list&LT/th>&LT/tr>&LT/thead>&LTtbody>\n&LTtr>&LTtd>last&LT/td>&LTtd>[2, 3]&LT/td>&LT/tr>\n&LTtr>&LTtd>a&LT/td>&LTtd>[2, 3]&LT/td>&LT/tr>\n&LTtr>&LTtd>dictionary&LT/td>&LTtd>[3]&LT/td>&LT/tr>\n&LTtr>&LTtd>...&LT/td>&LTtd>...&LT/td>&LT/tr>\n&LT/tbody>&LT/table>\n&LThr />\n&LTp>读到这里想来你也会有些许疑问?&LT/p>\n&LTul>\n&LTli>比 MySQL Index 的优势在哪?&LT/li>\n&LTli>当有1亿 Term 时如何高效查询?&LT/li>\n&LTli>联合查询怎么办?&LT/li>\n&LTli>相关度排序?&LT/li>\n&LT/ul>\n&LTh2 id=\"term-index\">Term index&LT/h2>\n&LTp>假象一下我们现在有 1 亿个 term, 那么这个 trem dictionary 会占多少内存呢?\n假设每个 trem 占用内存 6 byte, 那么亿个大约占用 0.6 GB, 那么如果是一个非常复杂的文档, 岂不是内存不够用?\n而且为什么搜索引擎的速度远远快于MySQL 的索引速度?&LT/p>\n&LTp>首先 Trem Index 实际上是一种字典树(前缀树), 可以将 term dictionary 里的内容组成树状结构.\n下图会是一个普通的字典树. \n&LTimg src=\"https://eindex.me/cn/posts/inverted-index/media/15669198838069/15673442795943.jpg\" alt=\"\" />&LT/p>\n&LTp>而 Term Index 的 Value 就是 Term 在磁盘中的位置.&LT/p>\n&LTp>而且 Trem Index 通常会被缓存到内存中, 再加上优秀的树结构, 所以查询速度极快, 字典树的数据结构优势, 使体积远小于 term dictonary.&LT/p>\n&LTp>快于 MySQL 的主要原因是, 减少了访问磁盘的次数.MySQL 的B+树会在磁盘中多次读写不同位置, 而使用 term index , 则只会在匹配到 term 时进行一次磁盘访问.&LT/p>\n&LTh2 id=\"lian-he-cha-xun\">联合查询&LT/h2>\n&LTp>如何进行索引的联合查询, 当程序获得多个Posting list 那么程序需要从list 中进行多次交集并集操作.如何减少这些操作呢?&LT/p>\n&LTp>通常有两个解决方案.&LT/p>\n&LTul>\n&LTli>bitset&LT/li>\n&LTli>跳表&LT/li>\n&LT/ul>\n&LTp>可以自己去看一下相关的工作原理。&LT/p>\n&LTh2 id=\"end\">END&LT/h2>\n&LTp>想必看完之后，你也对倒排索引工作原理有一定的了解了吧。感谢阅读！&LT/p>\n","permalink":"https://eindex.me/cn/posts/inverted-index/","slug":"inverted-index","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"倒排索引","description":null,"updated":null,"date":"2019-08-27T12:31:56+08:00","year":2019,"month":8,"day":27,"taxonomies":{"tags":["Index","Search Engine"],"series":["algorithm"]},"extra":{},"path":"/cn/posts/inverted-index/","components":["cn","posts","inverted-index"],"summary":"&LTp>世界上最伟大的互联网产品,说是搜索引擎,绝对没有别的产品可以替代,尤其是伟大的先在市场占用率最高的搜索引擎,Google Search.&LT/p>\n&LTp>还有很多差一大截的,比如 Bing, Yahoo 和 YANDEX.&LT/p>\n","toc":[{"level":2,"id":"shi-yao-shi-sou-suo-yin-qing","permalink":"https://eindex.me/cn/posts/inverted-index/#shi-yao-shi-sou-suo-yin-qing","title":"什么是搜索引擎","children":[]},{"level":2,"id":"sou-suo-yin-qing-gan-liao-xie-shi-yao","permalink":"https://eindex.me/cn/posts/inverted-index/#sou-suo-yin-qing-gan-liao-xie-shi-yao","title":"搜索引擎干了些什么","children":[]},{"level":2,"id":"zheng-pai-suo-yin","permalink":"https://eindex.me/cn/posts/inverted-index/#zheng-pai-suo-yin","title":"正排索引","children":[]},{"level":2,"id":"dao-pai-suo-yin","permalink":"https://eindex.me/cn/posts/inverted-index/#dao-pai-suo-yin","title":"倒排索引","children":[]},{"level":2,"id":"term-index","permalink":"https://eindex.me/cn/posts/inverted-index/#term-index","title":"Term index","children":[]},{"level":2,"id":"lian-he-cha-xun","permalink":"https://eindex.me/cn/posts/inverted-index/#lian-he-cha-xun","title":"联合查询","children":[]},{"level":2,"id":"end","permalink":"https://eindex.me/cn/posts/inverted-index/#end","title":"END","children":[]}],"word_count":914,"reading_time":5,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/inverted-index/","title":"倒排索引","path":"/home/runner/work/blog/blog/content/posts/inverted-index.cn.md"}],"backlinks":[]},"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/1984-after-reading/","title":"1984","path":"/home/runner/work/blog/blog/content/posts/1984-after-reading.cn.md"}],"backlinks":[]},{"relative_path":"posts/inverted-index.cn.md","content":"&LTp>世界上最伟大的互联网产品,说是搜索引擎,绝对没有别的产品可以替代,尤其是伟大的先在市场占用率最高的搜索引擎,Google Search.&LT/p>\n&LTp>还有很多差一大截的,比如 Bing, Yahoo 和 YANDEX.&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"shi-yao-shi-sou-suo-yin-qing\">什么是搜索引擎&LT/h2>\n&LTp>所谓搜索引擎，就是根据用户需求与一定算法，运用特定策略从互联网检索出制定信息反馈给用户的一门检索技术。&LT/p>\n&LTp>搜索引擎技术的核心模块一般包括爬虫、索引、检索和排序等，同时可添加其他一系列辅助模块，以为用户创造更好的网络使用环境。 &LT/p>\n&LTh2 id=\"sou-suo-yin-qing-gan-liao-xie-shi-yao\">搜索引擎干了些什么&LT/h2>\n&LTp>简单的说搜索引擎从网络上爬取网页,然后对网页信息进行提取,构建正排索引,然后分析网页内容,建立倒排文件.&LT/p>\n&LTp>接下来我将依次介绍 正排索引、 倒排索引 等知识点.&LT/p>\n&LTh2 id=\"zheng-pai-suo-yin\">正排索引&LT/h2>\n&LTp>正排索引通常是 \nid-document 的键值对&LT/p>\n&LTtable>&LTthead>&LTtr>&LTth>id&LT/th>&LTth>name&LT/th>&LTth>context&LT/th>&LTth>eng_context&LT/th>&LT/tr>&LT/thead>&LTtbody>\n&LTtr>&LTtd>1&LT/td>&LTtd>小明&LT/td>&LTtd>今天吃了3个包子&LT/td>&LTtd>today eating 3 baozi&LT/td>&LT/tr>\n&LTtr>&LTtd>2&LT/td>&LTtd>小仓&LT/td>&LTtd>最后一天看了一本书&LT/td>&LTtd>read a book last day&LT/td>&LT/tr>\n&LTtr>&LTtd>3&LT/td>&LTtd>仓颉&LT/td>&LTtd>去年造了个新华字典&LT/td>&LTtd>make a xinhua dictionary last year&LT/td>&LT/tr>\n&LT/tbody>&LT/table>\n&LTh2 id=\"dao-pai-suo-yin\">倒排索引&LT/h2>\n&LTp>倒排索引是关键词到id列表的映射关系.&LT/p>\n&LTp>倒排索引里面左边的列叫做 term , 里面存储的通常是一个关键词; \n右边的列叫做 posting list,里面存储的是文档的id.&LT/p>\n&LTp>左侧的一列一起叫做 term dictionary.&LT/p>\n&LTp>首先上面有每个 document 有3个 field , 所以会创建3个倒排索引.&LT/p>\n&LTp>如果使用默认的英文分词器,那么表格会创建的索引大概是下面这个样子:&LT/p>\n&LTp>name index:&LT/p>\n&LTtable>&LTthead>&LTtr>&LTth>term&LT/th>&LTth>posting list&LT/th>&LT/tr>&LT/thead>&LTtbody>\n&LTtr>&LTtd>小&LT/td>&LTtd>[1, 2]&LT/td>&LT/tr>\n&LTtr>&LTtd>仓&LT/td>&LTtd>[2, 3]&LT/td>&LT/tr>\n&LTtr>&LTtd>明&LT/td>&LTtd>[1]&LT/td>&LT/tr>\n&LTtr>&LTtd>颉&LT/td>&LTtd>[3]&LT/td>&LT/tr>\n&LT/tbody>&LT/table>\n&LTp>context index:&LT/p>\n&LTtable>&LTthead>&LTtr>&LTth>term&LT/th>&LTth>posting list&LT/th>&LT/tr>&LT/thead>&LTtbody>\n&LTtr>&LTtd>个&LT/td>&LTtd>[1, 3]&LT/td>&LT/tr>\n&LTtr>&LTtd>了&LT/td>&LTtd>[1, 2, 3]&LT/td>&LT/tr>\n&LTtr>&LTtd>今&LT/td>&LTtd>[1]&LT/td>&LT/tr>\n&LTtr>&LTtd>...&LT/td>&LTtd>...&LT/td>&LT/tr>\n&LT/tbody>&LT/table>\n&LTp>eng_context index:&LT/p>\n&LTtable>&LTthead>&LTtr>&LTth>term&LT/th>&LTth>posting list&LT/th>&LT/tr>&LT/thead>&LTtbody>\n&LTtr>&LTtd>last&LT/td>&LTtd>[2, 3]&LT/td>&LT/tr>\n&LTtr>&LTtd>a&LT/td>&LTtd>[2, 3]&LT/td>&LT/tr>\n&LTtr>&LTtd>dictionary&LT/td>&LTtd>[3]&LT/td>&LT/tr>\n&LTtr>&LTtd>...&LT/td>&LTtd>...&LT/td>&LT/tr>\n&LT/tbody>&LT/table>\n&LThr />\n&LTp>读到这里想来你也会有些许疑问?&LT/p>\n&LTul>\n&LTli>比 MySQL Index 的优势在哪?&LT/li>\n&LTli>当有1亿 Term 时如何高效查询?&LT/li>\n&LTli>联合查询怎么办?&LT/li>\n&LTli>相关度排序?&LT/li>\n&LT/ul>\n&LTh2 id=\"term-index\">Term index&LT/h2>\n&LTp>假象一下我们现在有 1 亿个 term, 那么这个 trem dictionary 会占多少内存呢?\n假设每个 trem 占用内存 6 byte, 那么亿个大约占用 0.6 GB, 那么如果是一个非常复杂的文档, 岂不是内存不够用?\n而且为什么搜索引擎的速度远远快于MySQL 的索引速度?&LT/p>\n&LTp>首先 Trem Index 实际上是一种字典树(前缀树), 可以将 term dictionary 里的内容组成树状结构.\n下图会是一个普通的字典树. \n&LTimg src=\"https://eindex.me/cn/posts/inverted-index/media/15669198838069/15673442795943.jpg\" alt=\"\" />&LT/p>\n&LTp>而 Term Index 的 Value 就是 Term 在磁盘中的位置.&LT/p>\n&LTp>而且 Trem Index 通常会被缓存到内存中, 再加上优秀的树结构, 所以查询速度极快, 字典树的数据结构优势, 使体积远小于 term dictonary.&LT/p>\n&LTp>快于 MySQL 的主要原因是, 减少了访问磁盘的次数.MySQL 的B+树会在磁盘中多次读写不同位置, 而使用 term index , 则只会在匹配到 term 时进行一次磁盘访问.&LT/p>\n&LTh2 id=\"lian-he-cha-xun\">联合查询&LT/h2>\n&LTp>如何进行索引的联合查询, 当程序获得多个Posting list 那么程序需要从list 中进行多次交集并集操作.如何减少这些操作呢?&LT/p>\n&LTp>通常有两个解决方案.&LT/p>\n&LTul>\n&LTli>bitset&LT/li>\n&LTli>跳表&LT/li>\n&LT/ul>\n&LTp>可以自己去看一下相关的工作原理。&LT/p>\n&LTh2 id=\"end\">END&LT/h2>\n&LTp>想必看完之后，你也对倒排索引工作原理有一定的了解了吧。感谢阅读！&LT/p>\n","permalink":"https://eindex.me/cn/posts/inverted-index/","slug":"inverted-index","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"倒排索引","description":null,"updated":null,"date":"2019-08-27T12:31:56+08:00","year":2019,"month":8,"day":27,"taxonomies":{"tags":["Index","Search Engine"],"series":["algorithm"]},"extra":{},"path":"/cn/posts/inverted-index/","components":["cn","posts","inverted-index"],"summary":"&LTp>世界上最伟大的互联网产品,说是搜索引擎,绝对没有别的产品可以替代,尤其是伟大的先在市场占用率最高的搜索引擎,Google Search.&LT/p>\n&LTp>还有很多差一大截的,比如 Bing, Yahoo 和 YANDEX.&LT/p>\n","toc":[{"level":2,"id":"shi-yao-shi-sou-suo-yin-qing","permalink":"https://eindex.me/cn/posts/inverted-index/#shi-yao-shi-sou-suo-yin-qing","title":"什么是搜索引擎","children":[]},{"level":2,"id":"sou-suo-yin-qing-gan-liao-xie-shi-yao","permalink":"https://eindex.me/cn/posts/inverted-index/#sou-suo-yin-qing-gan-liao-xie-shi-yao","title":"搜索引擎干了些什么","children":[]},{"level":2,"id":"zheng-pai-suo-yin","permalink":"https://eindex.me/cn/posts/inverted-index/#zheng-pai-suo-yin","title":"正排索引","children":[]},{"level":2,"id":"dao-pai-suo-yin","permalink":"https://eindex.me/cn/posts/inverted-index/#dao-pai-suo-yin","title":"倒排索引","children":[]},{"level":2,"id":"term-index","permalink":"https://eindex.me/cn/posts/inverted-index/#term-index","title":"Term index","children":[]},{"level":2,"id":"lian-he-cha-xun","permalink":"https://eindex.me/cn/posts/inverted-index/#lian-he-cha-xun","title":"联合查询","children":[]},{"level":2,"id":"end","permalink":"https://eindex.me/cn/posts/inverted-index/#end","title":"END","children":[]}],"word_count":914,"reading_time":5,"assets":[],"draft":false,"lang":"cn","lower":{"relative_path":"posts/1984-after-reading.cn.md","content":"&LTp>这本书看了很久了，下面这句话一直环绕在我脑中，始终不能忘记。&LT/p>\n&LTblockquote>\n&LTp>“老大哥在看着你。”&LT/p>\n&LT/blockquote>\n&LTspan id=\"continue-reading\">&LT/span>\n&LTp>在书中的那个时代， 是个反乌托邦的社会， 这个社会有一个叫做老大哥的统治者。四处都贴着老大哥的肖像， 大家崇拜着这个叫做老大哥的领袖。&LT/p>\n&LTp>那个社会中存在这样一句口号: “战争即和平；自由即奴役；无知即力量。” 看着就觉得非常厉害，读完之后在看这句话， 更能理解其中的深意。&LT/p>\n&LTp>文中以一个小职员主人公温斯顿的日常生活，带领我们进入《1984》的世界。老大哥控制思想、老大哥永远正确、老大哥创造了历史，老大哥是人民的救星。当然也有反对老大哥的人，想推翻国家政权的人。&LT/p>\n&LTp>而我们的主人公因为有自己的思想，负责修改历史记录，所以他犯下了思想罪，迎接他的就是死亡。因为“思想罪不会带来死亡，思想罪本身就是死亡。”&LT/p>\n&LTp>之后温斯顿遇到了爱情，以及真正的性，同时加入到了反老大哥的组织。他读到反党领袖所写的《寡头政治集体主义的理论与实践》，他读到这本书关键之处，被思想警察活捉。&LT/p>\n&LTp>在监狱，反复被拷打，被改造，只有相信老大哥的人才能真正的出狱。&LT/p>\n&LTp>他也出狱了，他放弃了自己的思想，他死去了。&LT/p>\n&LTp>这本书里面还有几句经典的话语：&LT/p>\n&LTblockquote>\n&LTp>谁控制过去，谁就控制未来；谁控制现在，谁就控制过去。&LT/p>\n&LT/blockquote>\n&LTblockquote>\n&LTp>可认为自人称之为人以来，便有三等人。 上等人，中等人和下等人。这三种人的目标完全不可调和。上等人的目标是要保持他们的地位。中等人的目标是要同高等人交换地位。下等人劳苦之余无暇旁顾，若说有目标的话，无非是取消一切差别，建立一个人人平等的社会。&LT/p>\n&LT/blockquote>\n&LTp>这书写于1949年， 预言的是英国40年后的样子，书中是一个没有自由，没有思想，没有隐私的社会。&LT/p>\n&LTp>谁也想不到，在70年后的今天，网络暴力四处横行，我们每个人都在谨言慎行，每个人都在用自己的思想强加于他人。&LT/p>\n&LTp>我们这个社会自由吗？我们需要自由吗？自由的定义是什么？&LT/p>\n&LTp>“老大哥在看着你！”&LT/p>\n","permalink":"https://eindex.me/cn/posts/1984-after-reading/","slug":"1984-after-reading","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"1984","description":null,"updated":null,"date":"2019-09-02T23:28:58+08:00","year":2019,"month":9,"day":2,"taxonomies":{"tags":["After Reading"]},"extra":{"doubian-id":4512435},"path":"/cn/posts/1984-after-reading/","components":["cn","posts","1984-after-reading"],"summary":"&LTp>这本书看了很久了，下面这句话一直环绕在我脑中，始终不能忘记。&LT/p>\n&LTblockquote>\n&LTp>“老大哥在看着你。”&LT/p>\n&LT/blockquote>\n","toc":[],"word_count":664,"reading_time":4,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/1984-after-reading/","title":"1984","path":"/home/runner/work/blog/blog/content/posts/1984-after-reading.cn.md"}],"backlinks":[]},"higher":{"relative_path":"posts/tornado-auto-etag.cn.md","content":"&LTp>为了研究缓存看了 tornado &LTcode>web.py&LT/code> 里的 &LTcode>finish&LT/code> 函数&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>\n&LTp>代码如下&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">finish&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">chunk&LT/span>&LTspan>: Union[&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">str&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">bytes&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">dict&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>) -&ampgt; &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;Future[None]&ampquot;&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;Finishes this response, ending the HTTP request.\n&LT/span>&LTspan style=\"color:#75715e;\">\n&LT/span>&LTspan style=\"color:#75715e;\"> Passing a ``chunk`` to ``finish()`` is equivalent to passing that\n&LT/span>&LTspan style=\"color:#75715e;\"> chunk to ``write()`` and then calling ``finish()`` with no arguments.\n&LT/span>&LTspan style=\"color:#75715e;\">\n&LT/span>&LTspan style=\"color:#75715e;\"> Returns a `.Future` which may optionally be awaited to track the sending\n&LT/span>&LTspan style=\"color:#75715e;\"> of the response to the client. This `.Future` resolves when all the response\n&LT/span>&LTspan style=\"color:#75715e;\"> data has been sent, and raises an error if the connection is closed before all\n&LT/span>&LTspan style=\"color:#75715e;\"> data can be sent.\n&LT/span>&LTspan style=\"color:#75715e;\">\n&LT/span>&LTspan style=\"color:#75715e;\"> .. versionchanged:: 5.1\n&LT/span>&LTspan style=\"color:#75715e;\">\n&LT/span>&LTspan style=\"color:#75715e;\"> Now returns a `.Future` instead of ``None``.\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>self._finished:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">raise &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">RuntimeError&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;finish() called twice&ampquot;&LT/span>&LTspan>)\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>chunk &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> self.write(chunk)\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># Automatically support ETags and add the Content-Length header if\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># we have not flushed any content yet.\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>self._headers_written:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>(\n&LT/span>&LTspan> self._status_code &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan style=\"color:#ae81ff;\">200\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>self.request.method &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;GET&ampquot;&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;HEAD&ampquot;&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;Etag&ampquot; &LT/span>&LTspan style=\"color:#f92672;\">not in &LT/span>&LTspan>self._headers\n&LT/span>&LTspan> ):\n&LT/span>&LTspan> self.set_etag_header()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>self.check_etag_header():\n&LT/span>&LTspan> self._write_buffer &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> self.set_status(&LT/span>&LTspan style=\"color:#ae81ff;\">304&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>self._status_code &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#ae81ff;\">204&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#ae81ff;\">304&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan>(\n&LT/span>&LTspan> self._status_code &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;= &LT/span>&LTspan style=\"color:#ae81ff;\">100 &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>self._status_code &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan style=\"color:#ae81ff;\">200\n&LT/span>&LTspan> ):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">assert not &LT/span>&LTspan>self._write_buffer, (\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;Cannot send body with &LT/span>&LTspan style=\"color:#ae81ff;\">%s&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot; &LT/span>&LTspan style=\"color:#f92672;\">% &LT/span>&LTspan>self._status_code\n&LT/span>&LTspan> )\n&LT/span>&LTspan> self._clear_headers_for_304()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">elif &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;Content-Length&ampquot; &LT/span>&LTspan style=\"color:#f92672;\">not in &LT/span>&LTspan>self._headers:\n&LT/span>&LTspan> content_length &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">sum&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(part) &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>part &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>self._write_buffer)\n&LT/span>&LTspan> self.set_header(&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;Content-Length&ampquot;&LT/span>&LTspan>, content_length)\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">assert &LT/span>&LTspan>self.request.connection &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># Now that the request is finished, clear the callback we\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># set on the HTTPConnection (which would otherwise prevent the\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># garbage collection of the RequestHandler when there\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># are keepalive connections)\n&LT/span>&LTspan> self.request.connection.set_close_callback(&LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#75715e;\"># type: ignore\n&LT/span>&LTspan>\n&LT/span>&LTspan> future &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>self.flush(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">include_footers&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">True&LT/span>&LTspan>)\n&LT/span>&LTspan> self.request.connection.finish()\n&LT/span>&LTspan> self._log()\n&LT/span>&LTspan> self._finished &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">True\n&LT/span>&LTspan> self.on_finish()\n&LT/span>&LTspan> self._break_cycles()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>future\n&LT/span>&LT/code>&LT/pre>\n&LTp>从代码中可以看出, 满足下面条件的请求:&LT/p>\n&LTul>\n&LTli>&LTcode>self._headers_written&LT/code> 为不为&LTcode>True&LT/code> &LT/li>\n&LTli>http status 为 &LTcode>200&LT/code> 的 &LTcode>GET&LT/code>、 &LTcode>HEAD&LT/code> 请求&LT/li>\n&LTli>同时没有 &LTcode>Etag&LT/code> 在 &LTcode>response header&LT/code> 的情况下&LT/li>\n&LT/ul>\n&LTp>tornado 会自动计算返回结果的 sha1, 并设置 Etag 若客户端支持 Etag 机制, 正确返回 &LTcode>If-None-Match&LT/code>, 就能节约一波流量, 美滋滋.&LT/p>\n","permalink":"https://eindex.me/cn/posts/tornado-auto-etag/","slug":"tornado-auto-etag","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"Tornado Auto Etag 机制","description":null,"updated":null,"date":"2019-04-24T14:20:03+08:00","year":2019,"month":4,"day":24,"taxonomies":{"tags":["Python","Cache","ETag"]},"extra":{},"path":"/cn/posts/tornado-auto-etag/","components":["cn","posts","tornado-auto-etag"],"summary":"&LTp>为了研究缓存看了 tornado &LTcode>web.py&LT/code> 里的 &LTcode>finish&LT/code> 函数&LT/p>\n","toc":[],"word_count":357,"reading_time":2,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/tornado-auto-etag/","title":"Tornado Auto Etag 机制","path":"/home/runner/work/blog/blog/content/posts/tornado-auto-etag.cn.md"}],"backlinks":[]},"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/inverted-index/","title":"倒排索引","path":"/home/runner/work/blog/blog/content/posts/inverted-index.cn.md"}],"backlinks":[]},{"relative_path":"posts/tornado-auto-etag.cn.md","content":"&LTp>为了研究缓存看了 tornado &LTcode>web.py&LT/code> 里的 &LTcode>finish&LT/code> 函数&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>\n&LTp>代码如下&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">finish&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">chunk&LT/span>&LTspan>: Union[&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">str&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">bytes&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">dict&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>) -&ampgt; &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;Future[None]&ampquot;&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;Finishes this response, ending the HTTP request.\n&LT/span>&LTspan style=\"color:#75715e;\">\n&LT/span>&LTspan style=\"color:#75715e;\"> Passing a ``chunk`` to ``finish()`` is equivalent to passing that\n&LT/span>&LTspan style=\"color:#75715e;\"> chunk to ``write()`` and then calling ``finish()`` with no arguments.\n&LT/span>&LTspan style=\"color:#75715e;\">\n&LT/span>&LTspan style=\"color:#75715e;\"> Returns a `.Future` which may optionally be awaited to track the sending\n&LT/span>&LTspan style=\"color:#75715e;\"> of the response to the client. This `.Future` resolves when all the response\n&LT/span>&LTspan style=\"color:#75715e;\"> data has been sent, and raises an error if the connection is closed before all\n&LT/span>&LTspan style=\"color:#75715e;\"> data can be sent.\n&LT/span>&LTspan style=\"color:#75715e;\">\n&LT/span>&LTspan style=\"color:#75715e;\"> .. versionchanged:: 5.1\n&LT/span>&LTspan style=\"color:#75715e;\">\n&LT/span>&LTspan style=\"color:#75715e;\"> Now returns a `.Future` instead of ``None``.\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>self._finished:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">raise &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">RuntimeError&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;finish() called twice&ampquot;&LT/span>&LTspan>)\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>chunk &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> self.write(chunk)\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># Automatically support ETags and add the Content-Length header if\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># we have not flushed any content yet.\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>self._headers_written:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>(\n&LT/span>&LTspan> self._status_code &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan style=\"color:#ae81ff;\">200\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>self.request.method &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;GET&ampquot;&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;HEAD&ampquot;&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;Etag&ampquot; &LT/span>&LTspan style=\"color:#f92672;\">not in &LT/span>&LTspan>self._headers\n&LT/span>&LTspan> ):\n&LT/span>&LTspan> self.set_etag_header()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>self.check_etag_header():\n&LT/span>&LTspan> self._write_buffer &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> self.set_status(&LT/span>&LTspan style=\"color:#ae81ff;\">304&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>self._status_code &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#ae81ff;\">204&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#ae81ff;\">304&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan>(\n&LT/span>&LTspan> self._status_code &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;= &LT/span>&LTspan style=\"color:#ae81ff;\">100 &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>self._status_code &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan style=\"color:#ae81ff;\">200\n&LT/span>&LTspan> ):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">assert not &LT/span>&LTspan>self._write_buffer, (\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;Cannot send body with &LT/span>&LTspan style=\"color:#ae81ff;\">%s&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot; &LT/span>&LTspan style=\"color:#f92672;\">% &LT/span>&LTspan>self._status_code\n&LT/span>&LTspan> )\n&LT/span>&LTspan> self._clear_headers_for_304()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">elif &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;Content-Length&ampquot; &LT/span>&LTspan style=\"color:#f92672;\">not in &LT/span>&LTspan>self._headers:\n&LT/span>&LTspan> content_length &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">sum&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(part) &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>part &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>self._write_buffer)\n&LT/span>&LTspan> self.set_header(&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;Content-Length&ampquot;&LT/span>&LTspan>, content_length)\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">assert &LT/span>&LTspan>self.request.connection &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># Now that the request is finished, clear the callback we\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># set on the HTTPConnection (which would otherwise prevent the\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># garbage collection of the RequestHandler when there\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># are keepalive connections)\n&LT/span>&LTspan> self.request.connection.set_close_callback(&LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#75715e;\"># type: ignore\n&LT/span>&LTspan>\n&LT/span>&LTspan> future &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>self.flush(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">include_footers&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">True&LT/span>&LTspan>)\n&LT/span>&LTspan> self.request.connection.finish()\n&LT/span>&LTspan> self._log()\n&LT/span>&LTspan> self._finished &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">True\n&LT/span>&LTspan> self.on_finish()\n&LT/span>&LTspan> self._break_cycles()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>future\n&LT/span>&LT/code>&LT/pre>\n&LTp>从代码中可以看出, 满足下面条件的请求:&LT/p>\n&LTul>\n&LTli>&LTcode>self._headers_written&LT/code> 为不为&LTcode>True&LT/code> &LT/li>\n&LTli>http status 为 &LTcode>200&LT/code> 的 &LTcode>GET&LT/code>、 &LTcode>HEAD&LT/code> 请求&LT/li>\n&LTli>同时没有 &LTcode>Etag&LT/code> 在 &LTcode>response header&LT/code> 的情况下&LT/li>\n&LT/ul>\n&LTp>tornado 会自动计算返回结果的 sha1, 并设置 Etag 若客户端支持 Etag 机制, 正确返回 &LTcode>If-None-Match&LT/code>, 就能节约一波流量, 美滋滋.&LT/p>\n","permalink":"https://eindex.me/cn/posts/tornado-auto-etag/","slug":"tornado-auto-etag","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"Tornado Auto Etag 机制","description":null,"updated":null,"date":"2019-04-24T14:20:03+08:00","year":2019,"month":4,"day":24,"taxonomies":{"tags":["Python","Cache","ETag"]},"extra":{},"path":"/cn/posts/tornado-auto-etag/","components":["cn","posts","tornado-auto-etag"],"summary":"&LTp>为了研究缓存看了 tornado &LTcode>web.py&LT/code> 里的 &LTcode>finish&LT/code> 函数&LT/p>\n","toc":[],"word_count":357,"reading_time":2,"assets":[],"draft":false,"lang":"cn","lower":{"relative_path":"posts/inverted-index.cn.md","content":"&LTp>世界上最伟大的互联网产品,说是搜索引擎,绝对没有别的产品可以替代,尤其是伟大的先在市场占用率最高的搜索引擎,Google Search.&LT/p>\n&LTp>还有很多差一大截的,比如 Bing, Yahoo 和 YANDEX.&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"shi-yao-shi-sou-suo-yin-qing\">什么是搜索引擎&LT/h2>\n&LTp>所谓搜索引擎，就是根据用户需求与一定算法，运用特定策略从互联网检索出制定信息反馈给用户的一门检索技术。&LT/p>\n&LTp>搜索引擎技术的核心模块一般包括爬虫、索引、检索和排序等，同时可添加其他一系列辅助模块，以为用户创造更好的网络使用环境。 &LT/p>\n&LTh2 id=\"sou-suo-yin-qing-gan-liao-xie-shi-yao\">搜索引擎干了些什么&LT/h2>\n&LTp>简单的说搜索引擎从网络上爬取网页,然后对网页信息进行提取,构建正排索引,然后分析网页内容,建立倒排文件.&LT/p>\n&LTp>接下来我将依次介绍 正排索引、 倒排索引 等知识点.&LT/p>\n&LTh2 id=\"zheng-pai-suo-yin\">正排索引&LT/h2>\n&LTp>正排索引通常是 \nid-document 的键值对&LT/p>\n&LTtable>&LTthead>&LTtr>&LTth>id&LT/th>&LTth>name&LT/th>&LTth>context&LT/th>&LTth>eng_context&LT/th>&LT/tr>&LT/thead>&LTtbody>\n&LTtr>&LTtd>1&LT/td>&LTtd>小明&LT/td>&LTtd>今天吃了3个包子&LT/td>&LTtd>today eating 3 baozi&LT/td>&LT/tr>\n&LTtr>&LTtd>2&LT/td>&LTtd>小仓&LT/td>&LTtd>最后一天看了一本书&LT/td>&LTtd>read a book last day&LT/td>&LT/tr>\n&LTtr>&LTtd>3&LT/td>&LTtd>仓颉&LT/td>&LTtd>去年造了个新华字典&LT/td>&LTtd>make a xinhua dictionary last year&LT/td>&LT/tr>\n&LT/tbody>&LT/table>\n&LTh2 id=\"dao-pai-suo-yin\">倒排索引&LT/h2>\n&LTp>倒排索引是关键词到id列表的映射关系.&LT/p>\n&LTp>倒排索引里面左边的列叫做 term , 里面存储的通常是一个关键词; \n右边的列叫做 posting list,里面存储的是文档的id.&LT/p>\n&LTp>左侧的一列一起叫做 term dictionary.&LT/p>\n&LTp>首先上面有每个 document 有3个 field , 所以会创建3个倒排索引.&LT/p>\n&LTp>如果使用默认的英文分词器,那么表格会创建的索引大概是下面这个样子:&LT/p>\n&LTp>name index:&LT/p>\n&LTtable>&LTthead>&LTtr>&LTth>term&LT/th>&LTth>posting list&LT/th>&LT/tr>&LT/thead>&LTtbody>\n&LTtr>&LTtd>小&LT/td>&LTtd>[1, 2]&LT/td>&LT/tr>\n&LTtr>&LTtd>仓&LT/td>&LTtd>[2, 3]&LT/td>&LT/tr>\n&LTtr>&LTtd>明&LT/td>&LTtd>[1]&LT/td>&LT/tr>\n&LTtr>&LTtd>颉&LT/td>&LTtd>[3]&LT/td>&LT/tr>\n&LT/tbody>&LT/table>\n&LTp>context index:&LT/p>\n&LTtable>&LTthead>&LTtr>&LTth>term&LT/th>&LTth>posting list&LT/th>&LT/tr>&LT/thead>&LTtbody>\n&LTtr>&LTtd>个&LT/td>&LTtd>[1, 3]&LT/td>&LT/tr>\n&LTtr>&LTtd>了&LT/td>&LTtd>[1, 2, 3]&LT/td>&LT/tr>\n&LTtr>&LTtd>今&LT/td>&LTtd>[1]&LT/td>&LT/tr>\n&LTtr>&LTtd>...&LT/td>&LTtd>...&LT/td>&LT/tr>\n&LT/tbody>&LT/table>\n&LTp>eng_context index:&LT/p>\n&LTtable>&LTthead>&LTtr>&LTth>term&LT/th>&LTth>posting list&LT/th>&LT/tr>&LT/thead>&LTtbody>\n&LTtr>&LTtd>last&LT/td>&LTtd>[2, 3]&LT/td>&LT/tr>\n&LTtr>&LTtd>a&LT/td>&LTtd>[2, 3]&LT/td>&LT/tr>\n&LTtr>&LTtd>dictionary&LT/td>&LTtd>[3]&LT/td>&LT/tr>\n&LTtr>&LTtd>...&LT/td>&LTtd>...&LT/td>&LT/tr>\n&LT/tbody>&LT/table>\n&LThr />\n&LTp>读到这里想来你也会有些许疑问?&LT/p>\n&LTul>\n&LTli>比 MySQL Index 的优势在哪?&LT/li>\n&LTli>当有1亿 Term 时如何高效查询?&LT/li>\n&LTli>联合查询怎么办?&LT/li>\n&LTli>相关度排序?&LT/li>\n&LT/ul>\n&LTh2 id=\"term-index\">Term index&LT/h2>\n&LTp>假象一下我们现在有 1 亿个 term, 那么这个 trem dictionary 会占多少内存呢?\n假设每个 trem 占用内存 6 byte, 那么亿个大约占用 0.6 GB, 那么如果是一个非常复杂的文档, 岂不是内存不够用?\n而且为什么搜索引擎的速度远远快于MySQL 的索引速度?&LT/p>\n&LTp>首先 Trem Index 实际上是一种字典树(前缀树), 可以将 term dictionary 里的内容组成树状结构.\n下图会是一个普通的字典树. \n&LTimg src=\"https://eindex.me/cn/posts/inverted-index/media/15669198838069/15673442795943.jpg\" alt=\"\" />&LT/p>\n&LTp>而 Term Index 的 Value 就是 Term 在磁盘中的位置.&LT/p>\n&LTp>而且 Trem Index 通常会被缓存到内存中, 再加上优秀的树结构, 所以查询速度极快, 字典树的数据结构优势, 使体积远小于 term dictonary.&LT/p>\n&LTp>快于 MySQL 的主要原因是, 减少了访问磁盘的次数.MySQL 的B+树会在磁盘中多次读写不同位置, 而使用 term index , 则只会在匹配到 term 时进行一次磁盘访问.&LT/p>\n&LTh2 id=\"lian-he-cha-xun\">联合查询&LT/h2>\n&LTp>如何进行索引的联合查询, 当程序获得多个Posting list 那么程序需要从list 中进行多次交集并集操作.如何减少这些操作呢?&LT/p>\n&LTp>通常有两个解决方案.&LT/p>\n&LTul>\n&LTli>bitset&LT/li>\n&LTli>跳表&LT/li>\n&LT/ul>\n&LTp>可以自己去看一下相关的工作原理。&LT/p>\n&LTh2 id=\"end\">END&LT/h2>\n&LTp>想必看完之后，你也对倒排索引工作原理有一定的了解了吧。感谢阅读！&LT/p>\n","permalink":"https://eindex.me/cn/posts/inverted-index/","slug":"inverted-index","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"倒排索引","description":null,"updated":null,"date":"2019-08-27T12:31:56+08:00","year":2019,"month":8,"day":27,"taxonomies":{"tags":["Index","Search Engine"],"series":["algorithm"]},"extra":{},"path":"/cn/posts/inverted-index/","components":["cn","posts","inverted-index"],"summary":"&LTp>世界上最伟大的互联网产品,说是搜索引擎,绝对没有别的产品可以替代,尤其是伟大的先在市场占用率最高的搜索引擎,Google Search.&LT/p>\n&LTp>还有很多差一大截的,比如 Bing, Yahoo 和 YANDEX.&LT/p>\n","toc":[{"level":2,"id":"shi-yao-shi-sou-suo-yin-qing","permalink":"https://eindex.me/cn/posts/inverted-index/#shi-yao-shi-sou-suo-yin-qing","title":"什么是搜索引擎","children":[]},{"level":2,"id":"sou-suo-yin-qing-gan-liao-xie-shi-yao","permalink":"https://eindex.me/cn/posts/inverted-index/#sou-suo-yin-qing-gan-liao-xie-shi-yao","title":"搜索引擎干了些什么","children":[]},{"level":2,"id":"zheng-pai-suo-yin","permalink":"https://eindex.me/cn/posts/inverted-index/#zheng-pai-suo-yin","title":"正排索引","children":[]},{"level":2,"id":"dao-pai-suo-yin","permalink":"https://eindex.me/cn/posts/inverted-index/#dao-pai-suo-yin","title":"倒排索引","children":[]},{"level":2,"id":"term-index","permalink":"https://eindex.me/cn/posts/inverted-index/#term-index","title":"Term index","children":[]},{"level":2,"id":"lian-he-cha-xun","permalink":"https://eindex.me/cn/posts/inverted-index/#lian-he-cha-xun","title":"联合查询","children":[]},{"level":2,"id":"end","permalink":"https://eindex.me/cn/posts/inverted-index/#end","title":"END","children":[]}],"word_count":914,"reading_time":5,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/inverted-index/","title":"倒排索引","path":"/home/runner/work/blog/blog/content/posts/inverted-index.cn.md"}],"backlinks":[]},"higher":{"relative_path":"posts/pipenv-autoenv.cn.md","content":"&LTp>Python 包管理一直都是一个问题，如今 3.6 推荐采用 Pipenv 出自 Requests 的大牛做所。配合上他写的 Autoenv 切换环境再也不是问题。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"an-zhuang\">安装&LT/h2>\n&LTh3 id=\"macos\">MacOS&LT/h3>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>brew install pipenv\n&LT/span>&LTspan>brew install autoenv\n&LT/span>&LT/code>&LT/pre>\n&LTp>其他平台自行 Google。&LT/p>\n&LTh2 id=\"pipenv\">Pipenv&LT/h2>\n&LTp>pipenv 在安装之后会在当前目录上生成一个 Pipfile ，这个文件不在是像 requestments.txt 那样的纯粹的文本结构，加入了一些配置内容。&LT/p>\n&LTp>比如说可以配置使用的 pipy 源，Python 版本号，以及包管理。\nPipenv 的包管理比其他的有点在于可以直接在配置文件中指定 正式运行 packages 和 开发环境中的 packages，管理一个文件比管理多个版本文件的好处不言而喻。&LT/p>\n&LTp>同时 pip 加入了 pip install -p Pipfile 来支持 Pipenv，官方都支持了，我们还等什么，用用用。&LT/p>\n&LTp>具体内容详见官方 &LTa rel=\"nofollow\" href=\"https://github.com/pypa/pipenv\">Github&LT/a>。&LT/p>\n&LTh2 id=\"autoenv\">Autoenv&LT/h2>\n&LTp>既然 Pipenv 都这么强大了，自然会导致虚拟环境满天飞，不方便进入虚拟环境的时候怎么办。\n这个时候就需要 Autoenv 登场了。&LT/p>\n&LTh3 id=\"pei-zhi-macos\">配置(MacOS)&LT/h3>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan style=\"color:#66d9ef;\">echo &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;source $(brew&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\"> --prefix&LT/span>&LTspan style=\"color:#e6db74;\"> autoenv)/activate.sh&ampquot; &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;&ampgt; &LT/span>&LTspan>~/.bash_profile\n&LT/span>&LT/code>&LT/pre>\n&LTp>他能在进入一个文件目录的时候自动进入虚拟环境，当然前提是你需要将虚拟环境路径加入&LTcode>.env&LT/code>文件，并将这个文件放在项目根目录下，这样在进入目录时会自动切入到环境中。&LT/p>\n&LTp>节约时间与生命，Python 大法好！&LT/p>\n","permalink":"https://eindex.me/cn/posts/pipenv-autoenv/","slug":"pipenv-autoenv","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"Pipenv + Autoenv 更友善的工作环境","description":null,"updated":null,"date":"2018-09-05T14:22:34+08:00","year":2018,"month":9,"day":5,"taxonomies":{"tags":["Python","Environment","Pipenv","Autoenv"]},"extra":{},"path":"/cn/posts/pipenv-autoenv/","components":["cn","posts","pipenv-autoenv"],"summary":"&LTp>Python 包管理一直都是一个问题，如今 3.6 推荐采用 Pipenv 出自 Requests 的大牛做所。配合上他写的 Autoenv 切换环境再也不是问题。&LT/p>\n","toc":[{"level":2,"id":"an-zhuang","permalink":"https://eindex.me/cn/posts/pipenv-autoenv/#an-zhuang","title":"安装","children":[{"level":3,"id":"macos","permalink":"https://eindex.me/cn/posts/pipenv-autoenv/#macos","title":"MacOS","children":[]}]},{"level":2,"id":"pipenv","permalink":"https://eindex.me/cn/posts/pipenv-autoenv/#pipenv","title":"Pipenv","children":[]},{"level":2,"id":"autoenv","permalink":"https://eindex.me/cn/posts/pipenv-autoenv/#autoenv","title":"Autoenv","children":[{"level":3,"id":"pei-zhi-macos","permalink":"https://eindex.me/cn/posts/pipenv-autoenv/#pei-zhi-macos","title":"配置(MacOS)","children":[]}]}],"word_count":376,"reading_time":2,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/pipenv-autoenv/","title":"Pipenv + Autoenv 更友善的工作环境","path":"/home/runner/work/blog/blog/content/posts/pipenv-autoenv.cn.md"}],"backlinks":[]},"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/tornado-auto-etag/","title":"Tornado Auto Etag 机制","path":"/home/runner/work/blog/blog/content/posts/tornado-auto-etag.cn.md"}],"backlinks":[]},{"relative_path":"posts/pipenv-autoenv.cn.md","content":"&LTp>Python 包管理一直都是一个问题，如今 3.6 推荐采用 Pipenv 出自 Requests 的大牛做所。配合上他写的 Autoenv 切换环境再也不是问题。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"an-zhuang\">安装&LT/h2>\n&LTh3 id=\"macos\">MacOS&LT/h3>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>brew install pipenv\n&LT/span>&LTspan>brew install autoenv\n&LT/span>&LT/code>&LT/pre>\n&LTp>其他平台自行 Google。&LT/p>\n&LTh2 id=\"pipenv\">Pipenv&LT/h2>\n&LTp>pipenv 在安装之后会在当前目录上生成一个 Pipfile ，这个文件不在是像 requestments.txt 那样的纯粹的文本结构，加入了一些配置内容。&LT/p>\n&LTp>比如说可以配置使用的 pipy 源，Python 版本号，以及包管理。\nPipenv 的包管理比其他的有点在于可以直接在配置文件中指定 正式运行 packages 和 开发环境中的 packages，管理一个文件比管理多个版本文件的好处不言而喻。&LT/p>\n&LTp>同时 pip 加入了 pip install -p Pipfile 来支持 Pipenv，官方都支持了，我们还等什么，用用用。&LT/p>\n&LTp>具体内容详见官方 &LTa rel=\"nofollow\" href=\"https://github.com/pypa/pipenv\">Github&LT/a>。&LT/p>\n&LTh2 id=\"autoenv\">Autoenv&LT/h2>\n&LTp>既然 Pipenv 都这么强大了，自然会导致虚拟环境满天飞，不方便进入虚拟环境的时候怎么办。\n这个时候就需要 Autoenv 登场了。&LT/p>\n&LTh3 id=\"pei-zhi-macos\">配置(MacOS)&LT/h3>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan style=\"color:#66d9ef;\">echo &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;source $(brew&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\"> --prefix&LT/span>&LTspan style=\"color:#e6db74;\"> autoenv)/activate.sh&ampquot; &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;&ampgt; &LT/span>&LTspan>~/.bash_profile\n&LT/span>&LT/code>&LT/pre>\n&LTp>他能在进入一个文件目录的时候自动进入虚拟环境，当然前提是你需要将虚拟环境路径加入&LTcode>.env&LT/code>文件，并将这个文件放在项目根目录下，这样在进入目录时会自动切入到环境中。&LT/p>\n&LTp>节约时间与生命，Python 大法好！&LT/p>\n","permalink":"https://eindex.me/cn/posts/pipenv-autoenv/","slug":"pipenv-autoenv","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"Pipenv + Autoenv 更友善的工作环境","description":null,"updated":null,"date":"2018-09-05T14:22:34+08:00","year":2018,"month":9,"day":5,"taxonomies":{"tags":["Python","Environment","Pipenv","Autoenv"]},"extra":{},"path":"/cn/posts/pipenv-autoenv/","components":["cn","posts","pipenv-autoenv"],"summary":"&LTp>Python 包管理一直都是一个问题，如今 3.6 推荐采用 Pipenv 出自 Requests 的大牛做所。配合上他写的 Autoenv 切换环境再也不是问题。&LT/p>\n","toc":[{"level":2,"id":"an-zhuang","permalink":"https://eindex.me/cn/posts/pipenv-autoenv/#an-zhuang","title":"安装","children":[{"level":3,"id":"macos","permalink":"https://eindex.me/cn/posts/pipenv-autoenv/#macos","title":"MacOS","children":[]}]},{"level":2,"id":"pipenv","permalink":"https://eindex.me/cn/posts/pipenv-autoenv/#pipenv","title":"Pipenv","children":[]},{"level":2,"id":"autoenv","permalink":"https://eindex.me/cn/posts/pipenv-autoenv/#autoenv","title":"Autoenv","children":[{"level":3,"id":"pei-zhi-macos","permalink":"https://eindex.me/cn/posts/pipenv-autoenv/#pei-zhi-macos","title":"配置(MacOS)","children":[]}]}],"word_count":376,"reading_time":2,"assets":[],"draft":false,"lang":"cn","lower":{"relative_path":"posts/tornado-auto-etag.cn.md","content":"&LTp>为了研究缓存看了 tornado &LTcode>web.py&LT/code> 里的 &LTcode>finish&LT/code> 函数&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>\n&LTp>代码如下&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">finish&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">chunk&LT/span>&LTspan>: Union[&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">str&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">bytes&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">dict&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>) -&ampgt; &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;Future[None]&ampquot;&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;Finishes this response, ending the HTTP request.\n&LT/span>&LTspan style=\"color:#75715e;\">\n&LT/span>&LTspan style=\"color:#75715e;\"> Passing a ``chunk`` to ``finish()`` is equivalent to passing that\n&LT/span>&LTspan style=\"color:#75715e;\"> chunk to ``write()`` and then calling ``finish()`` with no arguments.\n&LT/span>&LTspan style=\"color:#75715e;\">\n&LT/span>&LTspan style=\"color:#75715e;\"> Returns a `.Future` which may optionally be awaited to track the sending\n&LT/span>&LTspan style=\"color:#75715e;\"> of the response to the client. This `.Future` resolves when all the response\n&LT/span>&LTspan style=\"color:#75715e;\"> data has been sent, and raises an error if the connection is closed before all\n&LT/span>&LTspan style=\"color:#75715e;\"> data can be sent.\n&LT/span>&LTspan style=\"color:#75715e;\">\n&LT/span>&LTspan style=\"color:#75715e;\"> .. versionchanged:: 5.1\n&LT/span>&LTspan style=\"color:#75715e;\">\n&LT/span>&LTspan style=\"color:#75715e;\"> Now returns a `.Future` instead of ``None``.\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>self._finished:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">raise &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">RuntimeError&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;finish() called twice&ampquot;&LT/span>&LTspan>)\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>chunk &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> self.write(chunk)\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># Automatically support ETags and add the Content-Length header if\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># we have not flushed any content yet.\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>self._headers_written:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>(\n&LT/span>&LTspan> self._status_code &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan style=\"color:#ae81ff;\">200\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>self.request.method &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;GET&ampquot;&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;HEAD&ampquot;&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;Etag&ampquot; &LT/span>&LTspan style=\"color:#f92672;\">not in &LT/span>&LTspan>self._headers\n&LT/span>&LTspan> ):\n&LT/span>&LTspan> self.set_etag_header()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>self.check_etag_header():\n&LT/span>&LTspan> self._write_buffer &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> self.set_status(&LT/span>&LTspan style=\"color:#ae81ff;\">304&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>self._status_code &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#ae81ff;\">204&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#ae81ff;\">304&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan>(\n&LT/span>&LTspan> self._status_code &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;= &LT/span>&LTspan style=\"color:#ae81ff;\">100 &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>self._status_code &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan style=\"color:#ae81ff;\">200\n&LT/span>&LTspan> ):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">assert not &LT/span>&LTspan>self._write_buffer, (\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;Cannot send body with &LT/span>&LTspan style=\"color:#ae81ff;\">%s&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot; &LT/span>&LTspan style=\"color:#f92672;\">% &LT/span>&LTspan>self._status_code\n&LT/span>&LTspan> )\n&LT/span>&LTspan> self._clear_headers_for_304()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">elif &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;Content-Length&ampquot; &LT/span>&LTspan style=\"color:#f92672;\">not in &LT/span>&LTspan>self._headers:\n&LT/span>&LTspan> content_length &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">sum&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(part) &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>part &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>self._write_buffer)\n&LT/span>&LTspan> self.set_header(&LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;Content-Length&ampquot;&LT/span>&LTspan>, content_length)\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">assert &LT/span>&LTspan>self.request.connection &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># Now that the request is finished, clear the callback we\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># set on the HTTPConnection (which would otherwise prevent the\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># garbage collection of the RequestHandler when there\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># are keepalive connections)\n&LT/span>&LTspan> self.request.connection.set_close_callback(&LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#75715e;\"># type: ignore\n&LT/span>&LTspan>\n&LT/span>&LTspan> future &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>self.flush(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">include_footers&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">True&LT/span>&LTspan>)\n&LT/span>&LTspan> self.request.connection.finish()\n&LT/span>&LTspan> self._log()\n&LT/span>&LTspan> self._finished &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">True\n&LT/span>&LTspan> self.on_finish()\n&LT/span>&LTspan> self._break_cycles()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>future\n&LT/span>&LT/code>&LT/pre>\n&LTp>从代码中可以看出, 满足下面条件的请求:&LT/p>\n&LTul>\n&LTli>&LTcode>self._headers_written&LT/code> 为不为&LTcode>True&LT/code> &LT/li>\n&LTli>http status 为 &LTcode>200&LT/code> 的 &LTcode>GET&LT/code>、 &LTcode>HEAD&LT/code> 请求&LT/li>\n&LTli>同时没有 &LTcode>Etag&LT/code> 在 &LTcode>response header&LT/code> 的情况下&LT/li>\n&LT/ul>\n&LTp>tornado 会自动计算返回结果的 sha1, 并设置 Etag 若客户端支持 Etag 机制, 正确返回 &LTcode>If-None-Match&LT/code>, 就能节约一波流量, 美滋滋.&LT/p>\n","permalink":"https://eindex.me/cn/posts/tornado-auto-etag/","slug":"tornado-auto-etag","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"Tornado Auto Etag 机制","description":null,"updated":null,"date":"2019-04-24T14:20:03+08:00","year":2019,"month":4,"day":24,"taxonomies":{"tags":["Python","Cache","ETag"]},"extra":{},"path":"/cn/posts/tornado-auto-etag/","components":["cn","posts","tornado-auto-etag"],"summary":"&LTp>为了研究缓存看了 tornado &LTcode>web.py&LT/code> 里的 &LTcode>finish&LT/code> 函数&LT/p>\n","toc":[],"word_count":357,"reading_time":2,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/tornado-auto-etag/","title":"Tornado Auto Etag 机制","path":"/home/runner/work/blog/blog/content/posts/tornado-auto-etag.cn.md"}],"backlinks":[]},"higher":{"relative_path":"posts/kmp.cn.md","content":"&LTblockquote>\n&LTp>在计算机科学中，Knuth-Morris-Pratt字符串查找算法（简称为KMP算法）可在一个主文本字符串S内查找一个词W的出现位置。此算法通过运用对这个词在不匹配时本身就包含足够的信息来确定下一个匹配将在哪里开始的发现，从而避免重新检查先前匹配的字符。&LT/p>\n&LT/blockquote>\n&LTspan id=\"continue-reading\">&LT/span>\n&LTblockquote>\n&LTp>这个算法是由高德纳（Donald Ervin Knuth）和沃恩·普拉特在1974年构思，同年詹姆斯·H·莫里斯也独立地设计出该算法，最终由三人于1977年联合发表。&LT/p>\n&LT/blockquote>\n&LTh2 id=\"yuan-li\">原理&LT/h2>\n&LTp>将待匹配字符串命名为 m 源字符串命名为 S 。\n本算法对待匹配字符串做处理之后，找到他的真前缀和真后缀。并通过真前缀与后缀重合的数量的值，这个值是在匹配状态中发生矢配时，位于原始字符串上 S 的指针移动的方向与距离。&LT/p>\n&LTp>简单的说就是匹配失败时。通过之前的真前缀和后缀表，直接移动在匹配字符串上的指针，达到减少无用匹配的效果。&LT/p>\n&LTh2 id=\"you-dian\">优点&LT/h2>\n&LTp>节约时间，相比于朴素的匹配方式，新的匹配算法只需要 O(m + n)的时间复杂度 和 额外 O(m)的空间，这个空间是用来保存真前缀和真后缀的结果的。&LT/p>\n&LTh2 id=\"shi-xian\">实现&LT/h2>\n&LTp>KMP 匹配的关键在于初始化匹配字符串。&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">partial_table&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">pattern&LT/span>&LTspan>:&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">str&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 当字符串长度为1的时候，不需要进行查表，直接循环匹配时间复杂度就是 O(n)\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> front &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[pattern[:x&LT/span>&LTspan style=\"color:#f92672;\">+&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(pattern))]\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">cal_table_val&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">sub_pattern&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#66d9ef;\">max&LT/span>&LTspan>([&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]&LT/span>&LTspan style=\"color:#f92672;\">+&LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(front[:i]) &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(sub_pattern)) &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>sub_pattern[&LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan>i:] &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>front[:i]])\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>[cal_table_val(pattern[:i &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]) &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(pattern))]\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">kmp&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">pattern&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">string&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">first&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">True&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>pattern &LT/span>&LTspan style=\"color:#f92672;\">or not &LT/span>&LTspan>string:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return -&LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> \n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 匹配字符串长度为1 不需要建表\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(pattern) &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i, k &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">enumerate&LT/span>&LTspan>(string):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>k &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan>pattern:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>first:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>i\n&LT/span>&LTspan> res.append(i)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LTspan>\n&LT/span>&LTspan> pt &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>partial_table(pattern)\n&LT/span>&LTspan> i, j &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> lp, ls &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(pattern), &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(string)\n&LT/span>&LTspan> compile_flag &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">False\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan>ls &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>lp:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>string[j] &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan>pattern[i]:\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> j &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1 \n&LT/span>&LTspan> compile_flag &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">True\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(pattern):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>first:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>i\n&LT/span>&LTspan> res.append(j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>i)\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">elif &LT/span>&LTspan>string[j] &LT/span>&LTspan style=\"color:#f92672;\">!= &LT/span>&LTspan>pattern[i] &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>compile_flag:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 之前为匹配状态 需要移动匹配数组指针\n&LT/span>&LTspan> compile_flag &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">False\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">-= &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>pt[i&LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">elif &LT/span>&LTspan>string[j] &LT/span>&LTspan style=\"color:#f92672;\">!= &LT/span>&LTspan>pattern[i] &LT/span>&LTspan style=\"color:#f92672;\">and not &LT/span>&LTspan>compile_flag:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 之前为不匹配状态 匹配指针归 0 \n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> j &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LTspan>\n&LT/span>&LTspan>partial_table(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;ABCDABD&amp#39;&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#75715e;\"># [0, 0, 0, 0, 1, 2, 0]\n&LT/span>&LTspan>kmp(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;ABCDABD&amp#39;&LT/span>&LTspan>,&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;BBC ABCDAB ABCDABCDABDE&amp#39;&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#75715e;\"># 15\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LT/code>&LT/pre>\n","permalink":"https://eindex.me/cn/posts/kmp/","slug":"kmp","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"KMP 算法","description":null,"updated":null,"date":"2018-05-11T14:32:26+08:00","year":2018,"month":5,"day":11,"taxonomies":{"series":["algorithm"],"tags":["KMP","Python"]},"extra":{},"path":"/cn/posts/kmp/","components":["cn","posts","kmp"],"summary":"&LTblockquote>\n&LTp>在计算机科学中，Knuth-Morris-Pratt字符串查找算法（简称为KMP算法）可在一个主文本字符串S内查找一个词W的出现位置。此算法通过运用对这个词在不匹配时本身就包含足够的信息来确定下一个匹配将在哪里开始的发现，从而避免重新检查先前匹配的字符。&LT/p>\n&LT/blockquote>\n","toc":[{"level":2,"id":"yuan-li","permalink":"https://eindex.me/cn/posts/kmp/#yuan-li","title":"原理","children":[]},{"level":2,"id":"you-dian","permalink":"https://eindex.me/cn/posts/kmp/#you-dian","title":"优点","children":[]},{"level":2,"id":"shi-xian","permalink":"https://eindex.me/cn/posts/kmp/#shi-xian","title":"实现","children":[]}],"word_count":633,"reading_time":4,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/kmp/","title":"KMP 算法","path":"/home/runner/work/blog/blog/content/posts/kmp.cn.md"}],"backlinks":[]},"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/pipenv-autoenv/","title":"Pipenv + Autoenv 更友善的工作环境","path":"/home/runner/work/blog/blog/content/posts/pipenv-autoenv.cn.md"}],"backlinks":[]},{"relative_path":"posts/kmp.cn.md","content":"&LTblockquote>\n&LTp>在计算机科学中，Knuth-Morris-Pratt字符串查找算法（简称为KMP算法）可在一个主文本字符串S内查找一个词W的出现位置。此算法通过运用对这个词在不匹配时本身就包含足够的信息来确定下一个匹配将在哪里开始的发现，从而避免重新检查先前匹配的字符。&LT/p>\n&LT/blockquote>\n&LTspan id=\"continue-reading\">&LT/span>\n&LTblockquote>\n&LTp>这个算法是由高德纳（Donald Ervin Knuth）和沃恩·普拉特在1974年构思，同年詹姆斯·H·莫里斯也独立地设计出该算法，最终由三人于1977年联合发表。&LT/p>\n&LT/blockquote>\n&LTh2 id=\"yuan-li\">原理&LT/h2>\n&LTp>将待匹配字符串命名为 m 源字符串命名为 S 。\n本算法对待匹配字符串做处理之后，找到他的真前缀和真后缀。并通过真前缀与后缀重合的数量的值，这个值是在匹配状态中发生矢配时，位于原始字符串上 S 的指针移动的方向与距离。&LT/p>\n&LTp>简单的说就是匹配失败时。通过之前的真前缀和后缀表，直接移动在匹配字符串上的指针，达到减少无用匹配的效果。&LT/p>\n&LTh2 id=\"you-dian\">优点&LT/h2>\n&LTp>节约时间，相比于朴素的匹配方式，新的匹配算法只需要 O(m + n)的时间复杂度 和 额外 O(m)的空间，这个空间是用来保存真前缀和真后缀的结果的。&LT/p>\n&LTh2 id=\"shi-xian\">实现&LT/h2>\n&LTp>KMP 匹配的关键在于初始化匹配字符串。&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">partial_table&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">pattern&LT/span>&LTspan>:&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">str&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 当字符串长度为1的时候，不需要进行查表，直接循环匹配时间复杂度就是 O(n)\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> front &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[pattern[:x&LT/span>&LTspan style=\"color:#f92672;\">+&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(pattern))]\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">cal_table_val&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">sub_pattern&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#66d9ef;\">max&LT/span>&LTspan>([&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]&LT/span>&LTspan style=\"color:#f92672;\">+&LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(front[:i]) &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(sub_pattern)) &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>sub_pattern[&LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan>i:] &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>front[:i]])\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>[cal_table_val(pattern[:i &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]) &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(pattern))]\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">kmp&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">pattern&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">string&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">first&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">True&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>pattern &LT/span>&LTspan style=\"color:#f92672;\">or not &LT/span>&LTspan>string:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return -&LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> \n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 匹配字符串长度为1 不需要建表\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(pattern) &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i, k &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">enumerate&LT/span>&LTspan>(string):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>k &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan>pattern:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>first:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>i\n&LT/span>&LTspan> res.append(i)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LTspan>\n&LT/span>&LTspan> pt &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>partial_table(pattern)\n&LT/span>&LTspan> i, j &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> lp, ls &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(pattern), &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(string)\n&LT/span>&LTspan> compile_flag &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">False\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan>ls &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>lp:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>string[j] &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan>pattern[i]:\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> j &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1 \n&LT/span>&LTspan> compile_flag &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">True\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(pattern):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>first:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>i\n&LT/span>&LTspan> res.append(j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>i)\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">elif &LT/span>&LTspan>string[j] &LT/span>&LTspan style=\"color:#f92672;\">!= &LT/span>&LTspan>pattern[i] &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>compile_flag:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 之前为匹配状态 需要移动匹配数组指针\n&LT/span>&LTspan> compile_flag &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">False\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">-= &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>pt[i&LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">elif &LT/span>&LTspan>string[j] &LT/span>&LTspan style=\"color:#f92672;\">!= &LT/span>&LTspan>pattern[i] &LT/span>&LTspan style=\"color:#f92672;\">and not &LT/span>&LTspan>compile_flag:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 之前为不匹配状态 匹配指针归 0 \n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> j &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LTspan>\n&LT/span>&LTspan>partial_table(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;ABCDABD&amp#39;&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#75715e;\"># [0, 0, 0, 0, 1, 2, 0]\n&LT/span>&LTspan>kmp(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;ABCDABD&amp#39;&LT/span>&LTspan>,&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;BBC ABCDAB ABCDABCDABDE&amp#39;&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#75715e;\"># 15\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LT/code>&LT/pre>\n","permalink":"https://eindex.me/cn/posts/kmp/","slug":"kmp","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"KMP 算法","description":null,"updated":null,"date":"2018-05-11T14:32:26+08:00","year":2018,"month":5,"day":11,"taxonomies":{"series":["algorithm"],"tags":["KMP","Python"]},"extra":{},"path":"/cn/posts/kmp/","components":["cn","posts","kmp"],"summary":"&LTblockquote>\n&LTp>在计算机科学中，Knuth-Morris-Pratt字符串查找算法（简称为KMP算法）可在一个主文本字符串S内查找一个词W的出现位置。此算法通过运用对这个词在不匹配时本身就包含足够的信息来确定下一个匹配将在哪里开始的发现，从而避免重新检查先前匹配的字符。&LT/p>\n&LT/blockquote>\n","toc":[{"level":2,"id":"yuan-li","permalink":"https://eindex.me/cn/posts/kmp/#yuan-li","title":"原理","children":[]},{"level":2,"id":"you-dian","permalink":"https://eindex.me/cn/posts/kmp/#you-dian","title":"优点","children":[]},{"level":2,"id":"shi-xian","permalink":"https://eindex.me/cn/posts/kmp/#shi-xian","title":"实现","children":[]}],"word_count":633,"reading_time":4,"assets":[],"draft":false,"lang":"cn","lower":{"relative_path":"posts/pipenv-autoenv.cn.md","content":"&LTp>Python 包管理一直都是一个问题，如今 3.6 推荐采用 Pipenv 出自 Requests 的大牛做所。配合上他写的 Autoenv 切换环境再也不是问题。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"an-zhuang\">安装&LT/h2>\n&LTh3 id=\"macos\">MacOS&LT/h3>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>brew install pipenv\n&LT/span>&LTspan>brew install autoenv\n&LT/span>&LT/code>&LT/pre>\n&LTp>其他平台自行 Google。&LT/p>\n&LTh2 id=\"pipenv\">Pipenv&LT/h2>\n&LTp>pipenv 在安装之后会在当前目录上生成一个 Pipfile ，这个文件不在是像 requestments.txt 那样的纯粹的文本结构，加入了一些配置内容。&LT/p>\n&LTp>比如说可以配置使用的 pipy 源，Python 版本号，以及包管理。\nPipenv 的包管理比其他的有点在于可以直接在配置文件中指定 正式运行 packages 和 开发环境中的 packages，管理一个文件比管理多个版本文件的好处不言而喻。&LT/p>\n&LTp>同时 pip 加入了 pip install -p Pipfile 来支持 Pipenv，官方都支持了，我们还等什么，用用用。&LT/p>\n&LTp>具体内容详见官方 &LTa rel=\"nofollow\" href=\"https://github.com/pypa/pipenv\">Github&LT/a>。&LT/p>\n&LTh2 id=\"autoenv\">Autoenv&LT/h2>\n&LTp>既然 Pipenv 都这么强大了，自然会导致虚拟环境满天飞，不方便进入虚拟环境的时候怎么办。\n这个时候就需要 Autoenv 登场了。&LT/p>\n&LTh3 id=\"pei-zhi-macos\">配置(MacOS)&LT/h3>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan style=\"color:#66d9ef;\">echo &LT/span>&LTspan style=\"color:#e6db74;\">&ampquot;source $(brew&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\"> --prefix&LT/span>&LTspan style=\"color:#e6db74;\"> autoenv)/activate.sh&ampquot; &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;&ampgt; &LT/span>&LTspan>~/.bash_profile\n&LT/span>&LT/code>&LT/pre>\n&LTp>他能在进入一个文件目录的时候自动进入虚拟环境，当然前提是你需要将虚拟环境路径加入&LTcode>.env&LT/code>文件，并将这个文件放在项目根目录下，这样在进入目录时会自动切入到环境中。&LT/p>\n&LTp>节约时间与生命，Python 大法好！&LT/p>\n","permalink":"https://eindex.me/cn/posts/pipenv-autoenv/","slug":"pipenv-autoenv","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"Pipenv + Autoenv 更友善的工作环境","description":null,"updated":null,"date":"2018-09-05T14:22:34+08:00","year":2018,"month":9,"day":5,"taxonomies":{"tags":["Python","Environment","Pipenv","Autoenv"]},"extra":{},"path":"/cn/posts/pipenv-autoenv/","components":["cn","posts","pipenv-autoenv"],"summary":"&LTp>Python 包管理一直都是一个问题，如今 3.6 推荐采用 Pipenv 出自 Requests 的大牛做所。配合上他写的 Autoenv 切换环境再也不是问题。&LT/p>\n","toc":[{"level":2,"id":"an-zhuang","permalink":"https://eindex.me/cn/posts/pipenv-autoenv/#an-zhuang","title":"安装","children":[{"level":3,"id":"macos","permalink":"https://eindex.me/cn/posts/pipenv-autoenv/#macos","title":"MacOS","children":[]}]},{"level":2,"id":"pipenv","permalink":"https://eindex.me/cn/posts/pipenv-autoenv/#pipenv","title":"Pipenv","children":[]},{"level":2,"id":"autoenv","permalink":"https://eindex.me/cn/posts/pipenv-autoenv/#autoenv","title":"Autoenv","children":[{"level":3,"id":"pei-zhi-macos","permalink":"https://eindex.me/cn/posts/pipenv-autoenv/#pei-zhi-macos","title":"配置(MacOS)","children":[]}]}],"word_count":376,"reading_time":2,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/pipenv-autoenv/","title":"Pipenv + Autoenv 更友善的工作环境","path":"/home/runner/work/blog/blog/content/posts/pipenv-autoenv.cn.md"}],"backlinks":[]},"higher":{"relative_path":"posts/tree-in-python.cn.md","content":"&LTp>树是计算机科学中常用的数据结构之一,常见的地方有，Java 的继承树等。\n还有一些基于树的特殊数据结构，比如二叉树，B 树，等等。&LT/p>\n&LTp>本篇会讲述一些关于简单关于树的操作。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"shu-de-ding-yi\">树的定义&LT/h2>\n&LTblockquote>\n&LTp>树（英语：tree）是一种抽象数据类型（ADT）或是实作这种抽象数据类型的数据结构，用来模拟具有树状结构性质的数据集合。它是由n（n&ampgt;0）个有限节点组成一个具有层次关系的集合。把它叫做“树”是因为它看起来像一棵倒挂的树，也就是说它是根朝上，而叶朝下的。它具有以下的特点：&LT/p>\n&LT/blockquote>\n&LTblockquote>\n&LTul>\n&LTli>每个节点有零个或多个子节点&LT/li>\n&LTli>没有父节点的节点称为根节点&LT/li>\n&LTli>每一个非根节点有且只有一个父节点&LT/li>\n&LTli>除了根节点外，每个子节点可以分为多个不相交的子树&LT/li>\n&LT/ul>\n&LT/blockquote>\n&LTp>节选自 &LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E6%A0%91_(%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84)\">树(数据结构)&LT/a>&LT/p>\n&LTh2 id=\"ding-yi-shu-ju-jie-gou\">定义数据结构&LT/h2>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">class &LT/span>&LTspan style=\"text-decoration:underline;color:#a6e22e;\">TreeNode&LT/span>&LTspan>(&LT/span>&LTspan style=\"text-decoration:underline;font-style:italic;color:#a6e22e;\">object&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 一个树节点\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__init__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">value&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">children&LT/span>&LTspan>: &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\">\n&LT/span>&LTspan style=\"color:#75715e;\"> :param value: 节点的值\n&LT/span>&LTspan style=\"color:#75715e;\"> :param children: 节点的子节点，一个 TreeNode 的列表\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan>\n&LT/span>&LTspan> self.value &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>value\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>children:\n&LT/span>&LTspan> self.children &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">elif not &LT/span>&LTspan>self.value:\n&LT/span>&LTspan> self.children &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> self.children &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>children\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">class &LT/span>&LTspan style=\"text-decoration:underline;color:#a6e22e;\">Tree&LT/span>&LTspan>(&LT/span>&LTspan style=\"text-decoration:underline;font-style:italic;color:#a6e22e;\">object&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 树：基本树的数据结构\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__init__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">root&LT/span>&LTspan>: TreeNode &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 传入根节点\n&LT/span>&LTspan style=\"color:#75715e;\"> :param root: 如果为 TreeNode 为根节点， 如果为 None 为空书\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>(root &LT/span>&LTspan style=\"color:#f92672;\">is &LT/span>&LTspan style=\"color:#ae81ff;\">None &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(root, TreeNode)):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">raise &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">AttributeError&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;illegal root&amp#39;&LT/span>&LTspan>)\n&LT/span>&LTspan> self.root &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>root\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"qian-xu-bian-li\">前序遍历&LT/h2>\n&LTp>先遍历根节点。在遍历孩子节点。\n&LTimg src=\"https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E5%89%8D%E5%BA%8F%E9%81%8D%E5%8E%86.jpg\" alt=\"前序遍历\" />&LT/p>\n&LTh3 id=\"xun-huan-ban\">循环版&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">preorder_traversal_while&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 树的前序遍历\n&LT/span>&LTspan style=\"color:#75715e;\"> :return: list of tree node value\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>self.root:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LTspan> stack &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[self.root]\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack):\n&LT/span>&LTspan> node &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack.pop()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>node.value:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">continue\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>node.children[::&LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]:\n&LT/span>&LTspan> stack.append(sub_node)\n&LT/span>&LTspan> res.append(node.value)\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"di-gui-ban\">递归版&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">preorder_traversal_recursion&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 树的前序遍历\n&LT/span>&LTspan style=\"color:#75715e;\"> :return: list of tree node value\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>self.root:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">_inner&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">root&LT/span>&LTspan>):\n&LT/span>&LTspan> inner_res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>root.value:\n&LT/span>&LTspan> inner_res.append(root.value)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>root.children:\n&LT/span>&LTspan> inner_res &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan>_inner(sub_node)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>inner_res\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>_inner(self.root)\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"hou-xu-bian-li\">后序遍历&LT/h2>\n&LTp>先遍历孩子节点，最后遍历根节点。&LT/p>\n&LTp>&LTimg src=\"https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86.jpg\" alt=\"后序遍历\" />&LT/p>\n&LTh3 id=\"xun-huan-ban-1\">循环版&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">postorder_traversal_while&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 树的后序遍历\n&LT/span>&LTspan style=\"color:#75715e;\"> :return: list of tree node value\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>self.root:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LTspan>\n&LT/span>&LTspan> stack &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[self.root]\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack):\n&LT/span>&LTspan> node &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack.pop()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>node.value:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">continue\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>node.children:\n&LT/span>&LTspan> stack.append(sub_node)\n&LT/span>&LTspan> res.append(node.value)\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res[::&LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"di-gui-ban-1\">递归版&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">postorder_traversal_recursion&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 树的后序遍历\n&LT/span>&LTspan style=\"color:#75715e;\"> :return: list of tree node value\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>self.root:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">_inner&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">root&LT/span>&LTspan>):\n&LT/span>&LTspan> inner_res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>root.value:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>root.children:\n&LT/span>&LTspan> inner_res &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan>_inner(sub_node)\n&LT/span>&LTspan> inner_res.append(root.value)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>inner_res\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>_inner(self.root)\n&LT/span>&LTspan>\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"ceng-ci-bian-li\">层次遍历&LT/h2>\n&LTp>按层遍历节点。\n&LTimg src=\"https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E5%B1%82%E5%BA%8F%E9%81%8D%E5%8E%86.jpg\" alt=\"层序遍历\" />&LT/p>\n&LTh3 id=\"xun-huan-ban-2\">循环版&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">layer_while&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 树的层序遍历\n&LT/span>&LTspan style=\"color:#75715e;\"> :return: list of tree node value\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>self.root:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LTspan>\n&LT/span>&LTspan> queue &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>Queue()\n&LT/span>&LTspan> queue.put(self.root)\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>queue.qsize():\n&LT/span>&LTspan> node &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>queue.get()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>node.value:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">continue\n&LT/span>&LTspan> res.append(node.value)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>node.children:\n&LT/span>&LTspan> queue.put(sub_node)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"qiu-shu-de-shen-du\">求树的深度&LT/h2>\n&LTp>计算树的最大深度。&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">depth_recursion&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">_inner&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">root&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">depth&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>root.children:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>depth\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#66d9ef;\">max&LT/span>&LTspan>([_inner(sub_node, depth&LT/span>&LTspan style=\"color:#f92672;\">+&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>root.children])\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>_inner(self.root)\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"qiu-shu-de-jie-dian-shu\">求树的结点数&LT/h2>\n&LTp>计算树一共有多少节点。&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">node_count&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">_inner&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">root&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>root.children:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#ae81ff;\">1 &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#66d9ef;\">sum&LT/span>&LTspan>([_inner(sub_node) &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>root.children])\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>_inner(self.root)\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"qiu-shu-de-xie-zi-shu\">求树的叶子数&LT/h2>\n&LTp>计算书中有多少没有孩子的节点。&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">leaf_count&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">_inner&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">root&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>root.children:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#66d9ef;\">sum&LT/span>&LTspan>([_inner(sub_node) &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>root.children])\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>_inner(self.root)\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"qiu-liang-ge-jie-dian-de-zui-di-gong-gong-zu-xian-jie-dian\">求两个结点的最低公共祖先结点&LT/h2>\n&LTp>首先需要在树中找到两个结点。\n保存找到两个节点的链表。\n遍历两个链表的最长公共节点，就能找到最低的公共祖先节点。\n&LTimg src=\"https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E6%9C%80%E4%BD%8E%E5%85%AC%E5%85%B1%E7%A5%96%E5%85%88%E8%8A%82%E7%82%B9.jpg\" alt=\"最低公共祖先节点\" />&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">lowest_ancestor_node&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">node1&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">node2&LT/span>&LTspan>):\n&LT/span>&LTspan> stack &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[self.root]\n&LT/span>&LTspan> stack1 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> stack2 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack) &LT/span>&LTspan style=\"color:#f92672;\">and not &LT/span>&LTspan>(stack1 &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>stack2):\n&LT/span>&LTspan> node &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack.pop()\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>node &LT/span>&LTspan style=\"color:#f92672;\">is &LT/span>&LTspan>node1:\n&LT/span>&LTspan> stack1 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack[:]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>node &LT/span>&LTspan style=\"color:#f92672;\">is &LT/span>&LTspan>node2:\n&LT/span>&LTspan> stack2 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack[:]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>node.value:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">continue\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>node.children:\n&LT/span>&LTspan> stack.append(sub_node)\n&LT/span>&LTspan>\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>self.root\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack1)):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>stack1[i] &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan>stack2[i]:\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack1[i]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res.value\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res.value\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"qiu-ren-yi-liang-jie-dian-ju-chi\">求任意两结点距离&LT/h2>\n&LTp>首先需要在树中找到两个结点。\n保存找到两个节点的链表。\n在判断剩余的长度\n&LTimg src=\"https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E4%BB%BB%E6%84%8F%E4%B8%A4%E8%8A%82%E7%82%B9%E8%B7%9D%E7%A6%BB.jpg\" alt=\"任意两节点距离\" />&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">two_node_distence&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">node1&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">node2&LT/span>&LTspan>):\n&LT/span>&LTspan> stack &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[self.root]\n&LT/span>&LTspan> stack1 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> stack2 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack) &LT/span>&LTspan style=\"color:#f92672;\">and not &LT/span>&LTspan>(stack1 &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>stack2):\n&LT/span>&LTspan> node &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack.pop()\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>node &LT/span>&LTspan style=\"color:#f92672;\">is &LT/span>&LTspan>node1:\n&LT/span>&LTspan> stack1 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack[:]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>node &LT/span>&LTspan style=\"color:#f92672;\">is &LT/span>&LTspan>node2:\n&LT/span>&LTspan> stack2 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack[:]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>node.value:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">continue\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>node.children:\n&LT/span>&LTspan> stack.append(sub_node)\n&LT/span>&LTspan>\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>self.root\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack1)):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>stack1[i] &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan>stack2[i]:\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack1[i]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack1) &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack2) &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">2&LT/span>&LTspan style=\"color:#f92672;\">*&LT/span>&LTspan>i\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack1) &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack2) &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">2&LT/span>&LTspan style=\"color:#f92672;\">*&LT/span>&LTspan>i\n&LT/span>&LTspan>\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"zong-shu\">综述&LT/h2>\n&LTp>以上就是和树有关联的简单代码。\n以上代码也在 Github 上发布 &LTa rel=\"nofollow\" href=\"https://github.com/EINDEX/Python-algorithm/blob/master/data_structure/tree/tree.py\">tree&LT/a>， 如有差错，欢迎提交 Issue 或 PR。&LT/p>\n&LTh2 id=\"geng-xin\">更新&LT/h2>\n&LTul>\n&LTli>修复图片的 Bug&LT/li>\n&LT/ul>\n","permalink":"https://eindex.me/cn/posts/tree-in-python/","slug":"tree-in-python","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"Tree in Python","description":null,"updated":null,"date":"2018-04-08T14:30:44+08:00","year":2018,"month":4,"day":8,"taxonomies":{"tags":["Python"],"series":["algorithm"]},"extra":{},"path":"/cn/posts/tree-in-python/","components":["cn","posts","tree-in-python"],"summary":"&LTp>树是计算机科学中常用的数据结构之一,常见的地方有，Java 的继承树等。\n还有一些基于树的特殊数据结构，比如二叉树，B 树，等等。&LT/p>\n&LTp>本篇会讲述一些关于简单关于树的操作。&LT/p>\n","toc":[{"level":2,"id":"shu-de-ding-yi","permalink":"https://eindex.me/cn/posts/tree-in-python/#shu-de-ding-yi","title":"树的定义","children":[]},{"level":2,"id":"ding-yi-shu-ju-jie-gou","permalink":"https://eindex.me/cn/posts/tree-in-python/#ding-yi-shu-ju-jie-gou","title":"定义数据结构","children":[]},{"level":2,"id":"qian-xu-bian-li","permalink":"https://eindex.me/cn/posts/tree-in-python/#qian-xu-bian-li","title":"前序遍历","children":[{"level":3,"id":"xun-huan-ban","permalink":"https://eindex.me/cn/posts/tree-in-python/#xun-huan-ban","title":"循环版","children":[]},{"level":3,"id":"di-gui-ban","permalink":"https://eindex.me/cn/posts/tree-in-python/#di-gui-ban","title":"递归版","children":[]}]},{"level":2,"id":"hou-xu-bian-li","permalink":"https://eindex.me/cn/posts/tree-in-python/#hou-xu-bian-li","title":"后序遍历","children":[{"level":3,"id":"xun-huan-ban-1","permalink":"https://eindex.me/cn/posts/tree-in-python/#xun-huan-ban-1","title":"循环版","children":[]},{"level":3,"id":"di-gui-ban-1","permalink":"https://eindex.me/cn/posts/tree-in-python/#di-gui-ban-1","title":"递归版","children":[]}]},{"level":2,"id":"ceng-ci-bian-li","permalink":"https://eindex.me/cn/posts/tree-in-python/#ceng-ci-bian-li","title":"层次遍历","children":[{"level":3,"id":"xun-huan-ban-2","permalink":"https://eindex.me/cn/posts/tree-in-python/#xun-huan-ban-2","title":"循环版","children":[]}]},{"level":2,"id":"qiu-shu-de-shen-du","permalink":"https://eindex.me/cn/posts/tree-in-python/#qiu-shu-de-shen-du","title":"求树的深度","children":[]},{"level":2,"id":"qiu-shu-de-jie-dian-shu","permalink":"https://eindex.me/cn/posts/tree-in-python/#qiu-shu-de-jie-dian-shu","title":"求树的结点数","children":[]},{"level":2,"id":"qiu-shu-de-xie-zi-shu","permalink":"https://eindex.me/cn/posts/tree-in-python/#qiu-shu-de-xie-zi-shu","title":"求树的叶子数","children":[]},{"level":2,"id":"qiu-liang-ge-jie-dian-de-zui-di-gong-gong-zu-xian-jie-dian","permalink":"https://eindex.me/cn/posts/tree-in-python/#qiu-liang-ge-jie-dian-de-zui-di-gong-gong-zu-xian-jie-dian","title":"求两个结点的最低公共祖先结点","children":[]},{"level":2,"id":"qiu-ren-yi-liang-jie-dian-ju-chi","permalink":"https://eindex.me/cn/posts/tree-in-python/#qiu-ren-yi-liang-jie-dian-ju-chi","title":"求任意两结点距离","children":[]},{"level":2,"id":"zong-shu","permalink":"https://eindex.me/cn/posts/tree-in-python/#zong-shu","title":"综述","children":[]},{"level":2,"id":"geng-xin","permalink":"https://eindex.me/cn/posts/tree-in-python/#geng-xin","title":"更新","children":[]}],"word_count":1210,"reading_time":7,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/tree-in-python/","title":"Tree in Python","path":"/home/runner/work/blog/blog/content/posts/tree-in-python.cn.md"}],"backlinks":[]},"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/kmp/","title":"KMP 算法","path":"/home/runner/work/blog/blog/content/posts/kmp.cn.md"}],"backlinks":[]},{"relative_path":"posts/tree-in-python.cn.md","content":"&LTp>树是计算机科学中常用的数据结构之一,常见的地方有，Java 的继承树等。\n还有一些基于树的特殊数据结构，比如二叉树，B 树，等等。&LT/p>\n&LTp>本篇会讲述一些关于简单关于树的操作。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"shu-de-ding-yi\">树的定义&LT/h2>\n&LTblockquote>\n&LTp>树（英语：tree）是一种抽象数据类型（ADT）或是实作这种抽象数据类型的数据结构，用来模拟具有树状结构性质的数据集合。它是由n（n&ampgt;0）个有限节点组成一个具有层次关系的集合。把它叫做“树”是因为它看起来像一棵倒挂的树，也就是说它是根朝上，而叶朝下的。它具有以下的特点：&LT/p>\n&LT/blockquote>\n&LTblockquote>\n&LTul>\n&LTli>每个节点有零个或多个子节点&LT/li>\n&LTli>没有父节点的节点称为根节点&LT/li>\n&LTli>每一个非根节点有且只有一个父节点&LT/li>\n&LTli>除了根节点外，每个子节点可以分为多个不相交的子树&LT/li>\n&LT/ul>\n&LT/blockquote>\n&LTp>节选自 &LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E6%A0%91_(%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84)\">树(数据结构)&LT/a>&LT/p>\n&LTh2 id=\"ding-yi-shu-ju-jie-gou\">定义数据结构&LT/h2>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">class &LT/span>&LTspan style=\"text-decoration:underline;color:#a6e22e;\">TreeNode&LT/span>&LTspan>(&LT/span>&LTspan style=\"text-decoration:underline;font-style:italic;color:#a6e22e;\">object&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 一个树节点\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__init__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">value&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">children&LT/span>&LTspan>: &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\">\n&LT/span>&LTspan style=\"color:#75715e;\"> :param value: 节点的值\n&LT/span>&LTspan style=\"color:#75715e;\"> :param children: 节点的子节点，一个 TreeNode 的列表\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan>\n&LT/span>&LTspan> self.value &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>value\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>children:\n&LT/span>&LTspan> self.children &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">elif not &LT/span>&LTspan>self.value:\n&LT/span>&LTspan> self.children &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> self.children &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>children\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">class &LT/span>&LTspan style=\"text-decoration:underline;color:#a6e22e;\">Tree&LT/span>&LTspan>(&LT/span>&LTspan style=\"text-decoration:underline;font-style:italic;color:#a6e22e;\">object&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 树：基本树的数据结构\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__init__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">root&LT/span>&LTspan>: TreeNode &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 传入根节点\n&LT/span>&LTspan style=\"color:#75715e;\"> :param root: 如果为 TreeNode 为根节点， 如果为 None 为空书\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>(root &LT/span>&LTspan style=\"color:#f92672;\">is &LT/span>&LTspan style=\"color:#ae81ff;\">None &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(root, TreeNode)):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">raise &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">AttributeError&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;illegal root&amp#39;&LT/span>&LTspan>)\n&LT/span>&LTspan> self.root &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>root\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"qian-xu-bian-li\">前序遍历&LT/h2>\n&LTp>先遍历根节点。在遍历孩子节点。\n&LTimg src=\"https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E5%89%8D%E5%BA%8F%E9%81%8D%E5%8E%86.jpg\" alt=\"前序遍历\" />&LT/p>\n&LTh3 id=\"xun-huan-ban\">循环版&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">preorder_traversal_while&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 树的前序遍历\n&LT/span>&LTspan style=\"color:#75715e;\"> :return: list of tree node value\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>self.root:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LTspan> stack &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[self.root]\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack):\n&LT/span>&LTspan> node &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack.pop()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>node.value:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">continue\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>node.children[::&LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]:\n&LT/span>&LTspan> stack.append(sub_node)\n&LT/span>&LTspan> res.append(node.value)\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"di-gui-ban\">递归版&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">preorder_traversal_recursion&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 树的前序遍历\n&LT/span>&LTspan style=\"color:#75715e;\"> :return: list of tree node value\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>self.root:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">_inner&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">root&LT/span>&LTspan>):\n&LT/span>&LTspan> inner_res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>root.value:\n&LT/span>&LTspan> inner_res.append(root.value)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>root.children:\n&LT/span>&LTspan> inner_res &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan>_inner(sub_node)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>inner_res\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>_inner(self.root)\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"hou-xu-bian-li\">后序遍历&LT/h2>\n&LTp>先遍历孩子节点，最后遍历根节点。&LT/p>\n&LTp>&LTimg src=\"https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86.jpg\" alt=\"后序遍历\" />&LT/p>\n&LTh3 id=\"xun-huan-ban-1\">循环版&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">postorder_traversal_while&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 树的后序遍历\n&LT/span>&LTspan style=\"color:#75715e;\"> :return: list of tree node value\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>self.root:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LTspan>\n&LT/span>&LTspan> stack &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[self.root]\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack):\n&LT/span>&LTspan> node &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack.pop()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>node.value:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">continue\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>node.children:\n&LT/span>&LTspan> stack.append(sub_node)\n&LT/span>&LTspan> res.append(node.value)\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res[::&LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"di-gui-ban-1\">递归版&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">postorder_traversal_recursion&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 树的后序遍历\n&LT/span>&LTspan style=\"color:#75715e;\"> :return: list of tree node value\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>self.root:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">_inner&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">root&LT/span>&LTspan>):\n&LT/span>&LTspan> inner_res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>root.value:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>root.children:\n&LT/span>&LTspan> inner_res &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan>_inner(sub_node)\n&LT/span>&LTspan> inner_res.append(root.value)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>inner_res\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>_inner(self.root)\n&LT/span>&LTspan>\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"ceng-ci-bian-li\">层次遍历&LT/h2>\n&LTp>按层遍历节点。\n&LTimg src=\"https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E5%B1%82%E5%BA%8F%E9%81%8D%E5%8E%86.jpg\" alt=\"层序遍历\" />&LT/p>\n&LTh3 id=\"xun-huan-ban-2\">循环版&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">layer_while&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 树的层序遍历\n&LT/span>&LTspan style=\"color:#75715e;\"> :return: list of tree node value\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>self.root:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LTspan>\n&LT/span>&LTspan> queue &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>Queue()\n&LT/span>&LTspan> queue.put(self.root)\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>queue.qsize():\n&LT/span>&LTspan> node &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>queue.get()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>node.value:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">continue\n&LT/span>&LTspan> res.append(node.value)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>node.children:\n&LT/span>&LTspan> queue.put(sub_node)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"qiu-shu-de-shen-du\">求树的深度&LT/h2>\n&LTp>计算树的最大深度。&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">depth_recursion&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">_inner&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">root&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">depth&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>root.children:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>depth\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#66d9ef;\">max&LT/span>&LTspan>([_inner(sub_node, depth&LT/span>&LTspan style=\"color:#f92672;\">+&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>root.children])\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>_inner(self.root)\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"qiu-shu-de-jie-dian-shu\">求树的结点数&LT/h2>\n&LTp>计算树一共有多少节点。&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">node_count&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">_inner&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">root&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>root.children:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#ae81ff;\">1 &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#66d9ef;\">sum&LT/span>&LTspan>([_inner(sub_node) &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>root.children])\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>_inner(self.root)\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"qiu-shu-de-xie-zi-shu\">求树的叶子数&LT/h2>\n&LTp>计算书中有多少没有孩子的节点。&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">leaf_count&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">_inner&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">root&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>root.children:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#66d9ef;\">sum&LT/span>&LTspan>([_inner(sub_node) &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>root.children])\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>_inner(self.root)\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"qiu-liang-ge-jie-dian-de-zui-di-gong-gong-zu-xian-jie-dian\">求两个结点的最低公共祖先结点&LT/h2>\n&LTp>首先需要在树中找到两个结点。\n保存找到两个节点的链表。\n遍历两个链表的最长公共节点，就能找到最低的公共祖先节点。\n&LTimg src=\"https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E6%9C%80%E4%BD%8E%E5%85%AC%E5%85%B1%E7%A5%96%E5%85%88%E8%8A%82%E7%82%B9.jpg\" alt=\"最低公共祖先节点\" />&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">lowest_ancestor_node&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">node1&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">node2&LT/span>&LTspan>):\n&LT/span>&LTspan> stack &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[self.root]\n&LT/span>&LTspan> stack1 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> stack2 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack) &LT/span>&LTspan style=\"color:#f92672;\">and not &LT/span>&LTspan>(stack1 &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>stack2):\n&LT/span>&LTspan> node &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack.pop()\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>node &LT/span>&LTspan style=\"color:#f92672;\">is &LT/span>&LTspan>node1:\n&LT/span>&LTspan> stack1 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack[:]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>node &LT/span>&LTspan style=\"color:#f92672;\">is &LT/span>&LTspan>node2:\n&LT/span>&LTspan> stack2 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack[:]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>node.value:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">continue\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>node.children:\n&LT/span>&LTspan> stack.append(sub_node)\n&LT/span>&LTspan>\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>self.root\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack1)):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>stack1[i] &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan>stack2[i]:\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack1[i]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res.value\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res.value\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"qiu-ren-yi-liang-jie-dian-ju-chi\">求任意两结点距离&LT/h2>\n&LTp>首先需要在树中找到两个结点。\n保存找到两个节点的链表。\n在判断剩余的长度\n&LTimg src=\"https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E4%BB%BB%E6%84%8F%E4%B8%A4%E8%8A%82%E7%82%B9%E8%B7%9D%E7%A6%BB.jpg\" alt=\"任意两节点距离\" />&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">two_node_distence&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">node1&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">node2&LT/span>&LTspan>):\n&LT/span>&LTspan> stack &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[self.root]\n&LT/span>&LTspan> stack1 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> stack2 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack) &LT/span>&LTspan style=\"color:#f92672;\">and not &LT/span>&LTspan>(stack1 &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>stack2):\n&LT/span>&LTspan> node &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack.pop()\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>node &LT/span>&LTspan style=\"color:#f92672;\">is &LT/span>&LTspan>node1:\n&LT/span>&LTspan> stack1 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack[:]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>node &LT/span>&LTspan style=\"color:#f92672;\">is &LT/span>&LTspan>node2:\n&LT/span>&LTspan> stack2 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack[:]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>node.value:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">continue\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>node.children:\n&LT/span>&LTspan> stack.append(sub_node)\n&LT/span>&LTspan>\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>self.root\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack1)):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>stack1[i] &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan>stack2[i]:\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack1[i]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack1) &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack2) &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">2&LT/span>&LTspan style=\"color:#f92672;\">*&LT/span>&LTspan>i\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack1) &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack2) &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">2&LT/span>&LTspan style=\"color:#f92672;\">*&LT/span>&LTspan>i\n&LT/span>&LTspan>\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"zong-shu\">综述&LT/h2>\n&LTp>以上就是和树有关联的简单代码。\n以上代码也在 Github 上发布 &LTa rel=\"nofollow\" href=\"https://github.com/EINDEX/Python-algorithm/blob/master/data_structure/tree/tree.py\">tree&LT/a>， 如有差错，欢迎提交 Issue 或 PR。&LT/p>\n&LTh2 id=\"geng-xin\">更新&LT/h2>\n&LTul>\n&LTli>修复图片的 Bug&LT/li>\n&LT/ul>\n","permalink":"https://eindex.me/cn/posts/tree-in-python/","slug":"tree-in-python","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"Tree in Python","description":null,"updated":null,"date":"2018-04-08T14:30:44+08:00","year":2018,"month":4,"day":8,"taxonomies":{"tags":["Python"],"series":["algorithm"]},"extra":{},"path":"/cn/posts/tree-in-python/","components":["cn","posts","tree-in-python"],"summary":"&LTp>树是计算机科学中常用的数据结构之一,常见的地方有，Java 的继承树等。\n还有一些基于树的特殊数据结构，比如二叉树，B 树，等等。&LT/p>\n&LTp>本篇会讲述一些关于简单关于树的操作。&LT/p>\n","toc":[{"level":2,"id":"shu-de-ding-yi","permalink":"https://eindex.me/cn/posts/tree-in-python/#shu-de-ding-yi","title":"树的定义","children":[]},{"level":2,"id":"ding-yi-shu-ju-jie-gou","permalink":"https://eindex.me/cn/posts/tree-in-python/#ding-yi-shu-ju-jie-gou","title":"定义数据结构","children":[]},{"level":2,"id":"qian-xu-bian-li","permalink":"https://eindex.me/cn/posts/tree-in-python/#qian-xu-bian-li","title":"前序遍历","children":[{"level":3,"id":"xun-huan-ban","permalink":"https://eindex.me/cn/posts/tree-in-python/#xun-huan-ban","title":"循环版","children":[]},{"level":3,"id":"di-gui-ban","permalink":"https://eindex.me/cn/posts/tree-in-python/#di-gui-ban","title":"递归版","children":[]}]},{"level":2,"id":"hou-xu-bian-li","permalink":"https://eindex.me/cn/posts/tree-in-python/#hou-xu-bian-li","title":"后序遍历","children":[{"level":3,"id":"xun-huan-ban-1","permalink":"https://eindex.me/cn/posts/tree-in-python/#xun-huan-ban-1","title":"循环版","children":[]},{"level":3,"id":"di-gui-ban-1","permalink":"https://eindex.me/cn/posts/tree-in-python/#di-gui-ban-1","title":"递归版","children":[]}]},{"level":2,"id":"ceng-ci-bian-li","permalink":"https://eindex.me/cn/posts/tree-in-python/#ceng-ci-bian-li","title":"层次遍历","children":[{"level":3,"id":"xun-huan-ban-2","permalink":"https://eindex.me/cn/posts/tree-in-python/#xun-huan-ban-2","title":"循环版","children":[]}]},{"level":2,"id":"qiu-shu-de-shen-du","permalink":"https://eindex.me/cn/posts/tree-in-python/#qiu-shu-de-shen-du","title":"求树的深度","children":[]},{"level":2,"id":"qiu-shu-de-jie-dian-shu","permalink":"https://eindex.me/cn/posts/tree-in-python/#qiu-shu-de-jie-dian-shu","title":"求树的结点数","children":[]},{"level":2,"id":"qiu-shu-de-xie-zi-shu","permalink":"https://eindex.me/cn/posts/tree-in-python/#qiu-shu-de-xie-zi-shu","title":"求树的叶子数","children":[]},{"level":2,"id":"qiu-liang-ge-jie-dian-de-zui-di-gong-gong-zu-xian-jie-dian","permalink":"https://eindex.me/cn/posts/tree-in-python/#qiu-liang-ge-jie-dian-de-zui-di-gong-gong-zu-xian-jie-dian","title":"求两个结点的最低公共祖先结点","children":[]},{"level":2,"id":"qiu-ren-yi-liang-jie-dian-ju-chi","permalink":"https://eindex.me/cn/posts/tree-in-python/#qiu-ren-yi-liang-jie-dian-ju-chi","title":"求任意两结点距离","children":[]},{"level":2,"id":"zong-shu","permalink":"https://eindex.me/cn/posts/tree-in-python/#zong-shu","title":"综述","children":[]},{"level":2,"id":"geng-xin","permalink":"https://eindex.me/cn/posts/tree-in-python/#geng-xin","title":"更新","children":[]}],"word_count":1210,"reading_time":7,"assets":[],"draft":false,"lang":"cn","lower":{"relative_path":"posts/kmp.cn.md","content":"&LTblockquote>\n&LTp>在计算机科学中，Knuth-Morris-Pratt字符串查找算法（简称为KMP算法）可在一个主文本字符串S内查找一个词W的出现位置。此算法通过运用对这个词在不匹配时本身就包含足够的信息来确定下一个匹配将在哪里开始的发现，从而避免重新检查先前匹配的字符。&LT/p>\n&LT/blockquote>\n&LTspan id=\"continue-reading\">&LT/span>\n&LTblockquote>\n&LTp>这个算法是由高德纳（Donald Ervin Knuth）和沃恩·普拉特在1974年构思，同年詹姆斯·H·莫里斯也独立地设计出该算法，最终由三人于1977年联合发表。&LT/p>\n&LT/blockquote>\n&LTh2 id=\"yuan-li\">原理&LT/h2>\n&LTp>将待匹配字符串命名为 m 源字符串命名为 S 。\n本算法对待匹配字符串做处理之后，找到他的真前缀和真后缀。并通过真前缀与后缀重合的数量的值，这个值是在匹配状态中发生矢配时，位于原始字符串上 S 的指针移动的方向与距离。&LT/p>\n&LTp>简单的说就是匹配失败时。通过之前的真前缀和后缀表，直接移动在匹配字符串上的指针，达到减少无用匹配的效果。&LT/p>\n&LTh2 id=\"you-dian\">优点&LT/h2>\n&LTp>节约时间，相比于朴素的匹配方式，新的匹配算法只需要 O(m + n)的时间复杂度 和 额外 O(m)的空间，这个空间是用来保存真前缀和真后缀的结果的。&LT/p>\n&LTh2 id=\"shi-xian\">实现&LT/h2>\n&LTp>KMP 匹配的关键在于初始化匹配字符串。&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">partial_table&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">pattern&LT/span>&LTspan>:&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">str&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 当字符串长度为1的时候，不需要进行查表，直接循环匹配时间复杂度就是 O(n)\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> front &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[pattern[:x&LT/span>&LTspan style=\"color:#f92672;\">+&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(pattern))]\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">cal_table_val&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">sub_pattern&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#66d9ef;\">max&LT/span>&LTspan>([&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]&LT/span>&LTspan style=\"color:#f92672;\">+&LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(front[:i]) &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(sub_pattern)) &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>sub_pattern[&LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan>i:] &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>front[:i]])\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>[cal_table_val(pattern[:i &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]) &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(pattern))]\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">kmp&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">pattern&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">string&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">first&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">True&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>pattern &LT/span>&LTspan style=\"color:#f92672;\">or not &LT/span>&LTspan>string:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return -&LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> \n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 匹配字符串长度为1 不需要建表\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(pattern) &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i, k &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">enumerate&LT/span>&LTspan>(string):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>k &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan>pattern:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>first:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>i\n&LT/span>&LTspan> res.append(i)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LTspan>\n&LT/span>&LTspan> pt &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>partial_table(pattern)\n&LT/span>&LTspan> i, j &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> lp, ls &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(pattern), &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(string)\n&LT/span>&LTspan> compile_flag &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">False\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan>ls &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>lp:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>string[j] &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan>pattern[i]:\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> j &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1 \n&LT/span>&LTspan> compile_flag &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">True\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(pattern):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>first:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>i\n&LT/span>&LTspan> res.append(j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>i)\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">elif &LT/span>&LTspan>string[j] &LT/span>&LTspan style=\"color:#f92672;\">!= &LT/span>&LTspan>pattern[i] &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>compile_flag:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 之前为匹配状态 需要移动匹配数组指针\n&LT/span>&LTspan> compile_flag &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">False\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">-= &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>pt[i&LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">elif &LT/span>&LTspan>string[j] &LT/span>&LTspan style=\"color:#f92672;\">!= &LT/span>&LTspan>pattern[i] &LT/span>&LTspan style=\"color:#f92672;\">and not &LT/span>&LTspan>compile_flag:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 之前为不匹配状态 匹配指针归 0 \n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> j &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LTspan>\n&LT/span>&LTspan>partial_table(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;ABCDABD&amp#39;&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#75715e;\"># [0, 0, 0, 0, 1, 2, 0]\n&LT/span>&LTspan>kmp(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;ABCDABD&amp#39;&LT/span>&LTspan>,&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;BBC ABCDAB ABCDABCDABDE&amp#39;&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#75715e;\"># 15\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LT/code>&LT/pre>\n","permalink":"https://eindex.me/cn/posts/kmp/","slug":"kmp","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"KMP 算法","description":null,"updated":null,"date":"2018-05-11T14:32:26+08:00","year":2018,"month":5,"day":11,"taxonomies":{"series":["algorithm"],"tags":["KMP","Python"]},"extra":{},"path":"/cn/posts/kmp/","components":["cn","posts","kmp"],"summary":"&LTblockquote>\n&LTp>在计算机科学中，Knuth-Morris-Pratt字符串查找算法（简称为KMP算法）可在一个主文本字符串S内查找一个词W的出现位置。此算法通过运用对这个词在不匹配时本身就包含足够的信息来确定下一个匹配将在哪里开始的发现，从而避免重新检查先前匹配的字符。&LT/p>\n&LT/blockquote>\n","toc":[{"level":2,"id":"yuan-li","permalink":"https://eindex.me/cn/posts/kmp/#yuan-li","title":"原理","children":[]},{"level":2,"id":"you-dian","permalink":"https://eindex.me/cn/posts/kmp/#you-dian","title":"优点","children":[]},{"level":2,"id":"shi-xian","permalink":"https://eindex.me/cn/posts/kmp/#shi-xian","title":"实现","children":[]}],"word_count":633,"reading_time":4,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/kmp/","title":"KMP 算法","path":"/home/runner/work/blog/blog/content/posts/kmp.cn.md"}],"backlinks":[]},"higher":{"relative_path":"posts/sort-in-python.cn.md","content":"&LTp>本篇主要实现九(八）大排序算法，分别是冒泡排序，插入排序，选择排序，希尔排序，归并排序，快速排序，堆排序,计数排序。希望大家回顾知识的时候也能从我的这篇文章得到帮助。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>\n&LTp>&LTstrong>为了防止误导读者，本文所有概念性内容均截取自对应Wiki&LT/strong>&LT/p>\n&LTh2 id=\"mou-pao-pai-xu\">冒泡排序&LT/h2>\n&LTh3 id=\"yuan-li\">原理&LT/h3>\n&LTp>冒泡排序(Bubble Sort)是一种简单的排序算法。它重复地走访过要排序的数列，一次比较两个元素，如果他们的顺序错误就把他们交换过来。走访数列的工作是重复地进行直到没有再需要交换，也就是说该数列已经排序完成。这个算法的名字由来是因为越小的元素会经由交换慢慢“浮”到数列的顶端。&LT/p>\n&LTh3 id=\"bu-zou\">步骤&LT/h3>\n&LTp>冒泡排序算法的运作如下：&LT/p>\n&LTol>\n&LTli>比较相邻的元素。如果第一个比第二个大，就交换他们两个。&LT/li>\n&LTli>对每一对相邻元素作同样的工作，从开始第一对到结尾的最后一对。这步做完后，最后的元素会是最大的数。&LT/li>\n&LTli>针对所有的元素重复以上的步骤，除了最后一个。&LT/li>\n&LTli>持续每次对越来越少的元素重复上面的步骤，直到没有任何一对数字需要比较。&LT/li>\n&LT/ol>\n&LTh3 id=\"dai-ma\">代码&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">bubble_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> length &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 第一级遍历\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>index &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(length):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 第二级遍历\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>j &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>, length &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>index):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j]:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 交换两者数据，这里没用temp是因为python 特性元组。\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>], &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j], &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LT/code>&LT/pre>\n&LTp>这种排序其实还可以稍微优化一下，添加一个标记，在排序已完成时，停止排序。&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">bubble_sort_flag&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> length &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>index &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(length):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 标志位\n&LT/span>&LTspan> flag &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">True\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>j &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>, length &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>index):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j]:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>], &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j], &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]\n&LT/span>&LTspan> flag &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">False\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>flag:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 没有发生交换，直接返回list\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"xuan-ze-pai-xu\">选择排序&LT/h2>\n&LTh3 id=\"yuan-li-1\">原理&LT/h3>\n&LTp>选择排序（Selection sort）是一种简单直观的排序算法。它的工作原理大致是将后面的元素最小元素一个个取出然后按顺序放置。&LT/p>\n&LTh3 id=\"bu-zou-1\">步骤&LT/h3>\n&LTol>\n&LTli>在未排序序列中找到最小（大）元素，存放到排序序列的起始位置，&LT/li>\n&LTli>再从剩余未排序元素中继续寻找最小（大）元素，然后放到已排序序列的末尾。&LT/li>\n&LTli>重复第二步，直到所有元素均排序完毕。&LT/li>\n&LT/ol>\n&LTh3 id=\"dai-ma-1\">代码&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">selection_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> n&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range &LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>,n):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">min &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>i\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>j &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(i&LT/span>&LTspan style=\"color:#f92672;\">+&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>,n):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j]&LT/span>&LTspan style=\"color:#f92672;\">&amplt;&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#66d9ef;\">min&LT/span>&LTspan>]:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">min&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan>j\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#66d9ef;\">min&LT/span>&LTspan>],&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[i]&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[i],&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#66d9ef;\">min&LT/span>&LTspan>]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"cha-ru-pai-xu\">插入排序&LT/h2>\n&LTh3 id=\"yuan-li-2\">原理&LT/h3>\n&LTp>插入排序（Insertion Sort）是一种简单直观的排序算法。它的工作原理是通过构建有序序列，对于未排序数据，在已排序序列中从后向前扫描，找到相应位置并插入。&LT/p>\n&LTh3 id=\"bu-zou-2\">步骤&LT/h3>\n&LTol>\n&LTli>从第一个元素开始，该元素可以认为已经被排序&LT/li>\n&LTli>取出下一个元素，在已经排序的元素序列中从后向前扫描&LT/li>\n&LTli>如果该元素（已排序）大于新元素，将该元素移到下一位置&LT/li>\n&LTli>重复步骤3，直到找到已排序的元素小于或者等于新元素的位置&LT/li>\n&LTli>将新元素插入到该位置后&LT/li>\n&LTli>重复步骤2~5&LT/li>\n&LT/ol>\n&LTh3 id=\"dai-ma-2\">代码&LT/h3>\n&LTpre data-lang=\"Python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-Python \">&LTcode class=\"language-Python\" data-lang=\"Python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">insert_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> n &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>, n):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 后一个元素和前一个元素比较\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 如果比前一个小\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[i] &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[i &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 将这个数取出\n&LT/span>&LTspan> temp &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[i]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 保存下标\n&LT/span>&LTspan> index &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>i\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 从后往前依次比较每个元素\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>j &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(i &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 和比取出元素大的元素交换\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j] &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan>temp:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j]\n&LT/span>&LTspan> index &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>j\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">break\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 插入元素\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[index] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>temp\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"xi-er-pai-xu\">希尔排序&LT/h2>\n&LTh3 id=\"yuan-li-3\">原理&LT/h3>\n&LTp>希尔排序，也称递减增量排序算法，是插入排序的一种更高效的改进版本。希尔排序是非稳定排序算法。\n希尔排序是基于插入排序的以下两点性质而提出改进方法的：\n插入排序在对几乎已经排好序的数据操作时，效率高，即可以达到线性排序的效率\n但插入排序一般来说是低效的，因为插入排序每次只能将数据移动一位。&LT/p>\n&LTh3 id=\"bu-zou-3\">步骤&LT/h3>\n&LTp>每次以一定步长(就是跳过等距的数)进行排序，直至步长为1.&LT/p>\n&LTh3 id=\"dai-ma-3\">代码&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">shell_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> n &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 初始步长\n&LT/span>&LTspan> gap &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">round&LT/span>&LTspan>(n &LT/span>&LTspan style=\"color:#f92672;\">/ &LT/span>&LTspan style=\"color:#ae81ff;\">2&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>gap &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(gap, n):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 每个步长进行插入排序\n&LT/span>&LTspan> temp &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[i]\n&LT/span>&LTspan> j &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>i\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 插入排序\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>j &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;= &LT/span>&LTspan>gap &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>gap] &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan>temp:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>gap]\n&LT/span>&LTspan> j &LT/span>&LTspan style=\"color:#f92672;\">-= &LT/span>&LTspan>gap\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>temp\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 得到新的步长\n&LT/span>&LTspan> gap &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">round&LT/span>&LTspan>(gap &LT/span>&LTspan style=\"color:#f92672;\">/ &LT/span>&LTspan style=\"color:#ae81ff;\">2&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LT/code>&LT/pre>\n&LTblockquote>\n&LTp>步长使用的是Donald Shell的建议，另外步长还可以使用Sedgewick提出的(1, 5, 19, 41, 109,...)，该序列的项来自 {\\displaystyle 9\\times 4^{i}-9\\times 2^{i}+1} 9\\times 4^{i}-9\\times 2^{i}+1和 {\\displaystyle 2^{i+2}\\times (2^{i+2}-3)+1} 2^{{i+2}}\\times (2^{{i+2}}-3)+1这两个算式。\n也可以使用&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97\">斐波那契数列&LT/a>除去0和1将剩余的数以黄金分区比的两倍的幂进行运算得到的数列。&LT/p>\n&LT/blockquote>\n&LTh2 id=\"gui-bing-pai-xu\">归并排序&LT/h2>\n&LTh3 id=\"yuan-li-4\">原理&LT/h3>\n&LTp>归并操作(归并算法)，指的是将两个已经排序的序列合并成一个序列的操作。归并排序算法依赖归并操作。&LT/p>\n&LTh3 id=\"bu-zou-4\">步骤&LT/h3>\n&LTh4 id=\"die-dai-fa\">迭代法&LT/h4>\n&LTol>\n&LTli>申请空间，使其大小为两个已经排序序列之和，该空间用来存放合并后的序列&LT/li>\n&LTli>设定两个指针，最初位置分别为两个已经排序序列的起始位置&LT/li>\n&LTli>比较两个指针所指向的元素，选择相对小的元素放入到合并空间，并移动指针到下一位置&LT/li>\n&LTli>重复步骤3直到某一指针到达序列尾&LT/li>\n&LTli>将另一序列剩下的所有元素直接复制到合并序列尾&LT/li>\n&LT/ol>\n&LTh4 id=\"di-gui-fa\">递归法&LT/h4>\n&LTp>假设序列共有n个元素：&LT/p>\n&LTol>\n&LTli>将序列每相邻两个数字进行归并操作，形成 {\\displaystyle floor(n/2)} floor(n/2)个序列，排序后每个序列包含两个元素&LT/li>\n&LTli>将上述序列再次归并，形成 {\\displaystyle floor(n/4)} floor(n/4)个序列，每个序列包含四个元素&LT/li>\n&LTli>重复步骤2，直到所有元素排序完毕&LT/li>\n&LT/ol>\n&LTh3 id=\"dai-ma-4\">代码&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"color:#75715e;\"># 递归法\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">merge_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 认为长度不大于1的数列是有序的\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">&amplt;= &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 二分列表\n&LT/span>&LTspan> middle &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">// &LT/span>&LTspan style=\"color:#ae81ff;\">2\n&LT/span>&LTspan> left &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>merge_sort(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[:middle])\n&LT/span>&LTspan> right &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>merge_sort(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[middle:])\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 最后一次合并\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>merge(left, right)\n&LT/span>&LTspan style=\"color:#75715e;\"># 合并\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">merge&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">left&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">right&LT/span>&LTspan>):\n&LT/span>&LTspan> l,r&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>,&LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> result&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>l&LT/span>&LTspan style=\"color:#f92672;\">&amplt;&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(left) &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>r&LT/span>&LTspan style=\"color:#f92672;\">&amplt;&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(right):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>left[l] &LT/span>&LTspan style=\"color:#f92672;\">&amplt;&LT/span>&LTspan>right[r]:\n&LT/span>&LTspan> result.append(left[l])\n&LT/span>&LTspan> l&LT/span>&LTspan style=\"color:#f92672;\">+=&LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> result.append(right[r])\n&LT/span>&LTspan> r &LT/span>&LTspan style=\"color:#f92672;\">+=&LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> reslut &LT/span>&LTspan style=\"color:#f92672;\">+=&LT/span>&LTspan>left[l:]\n&LT/span>&LTspan> result&LT/span>&LTspan style=\"color:#f92672;\">+=&LT/span>&LTspan>right[r:] \n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>result\n&LT/span>&LT/code>&LT/pre>\n&LTp>鄙人不才，不知归并排序的迭代法如何用Python实现，望指教。&LT/p>\n&LTh2 id=\"kuai-su-pai-xu\">快速排序&LT/h2>\n&LTh3 id=\"yuan-li-5\">原理&LT/h3>\n&LTp>快速排序使用分治法（Divide and conquer）策略来把一个序列（list）分为两个子序列（sub-lists）。&LT/p>\n&LTh3 id=\"bu-zou-5\">步骤&LT/h3>\n&LTol>\n&LTli>从数列中挑出一个元素，称为&ampquot;基准&ampquot;（pivot），&LT/li>\n&LTli>重新排序数列，所有元素比基准值小的摆放在基准前面，所有元素比基准值大的摆在基准的后面（相同的数可以到任一边）。在这个分区结束之后，该基准就处于数列的中间位置。这个称为分区（partition）操作。&LT/li>\n&LTli>递归地（recursive）把小于基准值元素的子数列和大于基准值元素的子数列排序。&LT/li>\n&LT/ol>\n&LTh3 id=\"dai-ma-5\">代码&LT/h3>\n&LTp>普通版&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">quick_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> less &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> pivotList &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> more &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 递归出口\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">&amplt;= &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 将第一个值做为基准\n&LT/span>&LTspan> pivot &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 将比急转小的值放到less数列\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan>pivot:\n&LT/span>&LTspan> less.append(i)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 将比基准打的值放到more数列\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">elif &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan>pivot:\n&LT/span>&LTspan> more.append(i)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 将和基准相同的值保存在基准数列\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> pivotList.append(i)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 对less数列和more数列继续进行排序\n&LT/span>&LTspan> less &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>quick_sort(less)\n&LT/span>&LTspan> more &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>quick_sort(more)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>less &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan>pivotList &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan>more\n&LT/span>&LT/code>&LT/pre>\n&LTp>咳咳，下面这段代码出自《Python cookbook 第二版》传说中的三行实现python快速排序。&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">qsort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">arr&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(arr) &LT/span>&LTspan style=\"color:#f92672;\">&amplt;= &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>arr\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> pivot &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>arr[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>qsort([x &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>arr[&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:] &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan>pivot]) &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan>\\\n&LT/span>&LTspan> [pivot] &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan>\\\n&LT/span>&LTspan> qsort([x &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>arr[&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:] &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;= &LT/span>&LTspan>pivot])\n&LT/span>&LT/code>&LT/pre>\n&LTp>当然还有一行语法糖版本:&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan>qs &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">lambda &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">xs &LT/span>&LTspan>: ( (&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(xs) &LT/span>&LTspan style=\"color:#f92672;\">&amplt;= &LT/span>&LTspan style=\"color:#ae81ff;\">1 &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>[xs]) &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan>[ qs( [x &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>xs[&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:] &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan>xs[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]] ) &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan>[xs[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]] &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan>qs( [x &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>xs[&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:] &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;= &LT/span>&LTspan>xs[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]] ) ] )[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]\n&LT/span>&LT/code>&LT/pre>\n&LTp>是不是感受到了Python的魅力？&LT/p>\n&LTh2 id=\"dui-pai-xu\">堆排序&LT/h2>\n&LTh3 id=\"yuan-li-6\">原理&LT/h3>\n&LTp>堆排序（Heapsort）是指利用堆这种数据结构所设计的一种排序算法。堆积是一个近似完全二叉树的结构，并同时满足堆积的性质：即子结点的键值或索引总是小于（或者大于）它的父节点。&LT/p>\n&LTh3 id=\"bu-zou-6\">步骤&LT/h3>\n&LTol>\n&LTli>创建最大堆:将堆所有数据重新排序，使其成为最大堆&LT/li>\n&LTli>最大堆调整:作用是保持最大堆的性质，是创建最大堆的核心子程序&LT/li>\n&LTli>堆排序:移除位在第一个数据的根节点，并做最大堆调整的递归运算&LT/li>\n&LT/ol>\n&LTh3 id=\"dai-ma-6\">代码&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">heap_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 创建最大堆\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>start &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>((&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">2&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">// &LT/span>&LTspan style=\"color:#ae81ff;\">2&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>):\n&LT/span>&LTspan> sift_down(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>, start, &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>)\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 堆排序\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>end &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>], &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[end] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[end], &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]\n&LT/span>&LTspan> sift_down(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>, end &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"color:#75715e;\"># 最大堆调整\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">sift_down&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">lst&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">start&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">end&LT/span>&LTspan>):\n&LT/span>&LTspan> root &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>start\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan style=\"color:#ae81ff;\">True&LT/span>&LTspan>:\n&LT/span>&LTspan> child &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">2 &LT/span>&LTspan style=\"color:#f92672;\">* &LT/span>&LTspan>root &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>child &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan>end:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">break\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>child &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#ae81ff;\">1 &LT/span>&LTspan style=\"color:#f92672;\">&amplt;= &LT/span>&LTspan>end &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>lst[child] &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan>lst[child &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]:\n&LT/span>&LTspan> child &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>lst[root] &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan>lst[child]:\n&LT/span>&LTspan> lst[root], lst[child] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>lst[child], lst[root]\n&LT/span>&LTspan> root &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>child\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">break\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"ji-shu-pai-xu\">计数排序&LT/h2>\n&LTh3 id=\"yuan-li-7\">原理&LT/h3>\n&LTp>当输入的元素是n个0到k之间的整数时，它的运行时间是Θ(n + k)。计数排序不是比较排序，排序的速度快于任何比较排序算法。&LT/p>\n&LTp>由于用来计数的数组C的长度取决于待排序数组中数据的范围（等于待排序数组的最大值与最小值的差加上1），这使得计数排序对于数据范围很大的数组，需要大量时间和内存。例如：计数排序是用来排序0到100之间的数字的最好的算法，但是它不适合按字母顺序排序人名。但是，计数排序可以用在基数排序算法中，能够更有效的排序数据范围很大的数组。&LT/p>\n&LTh3 id=\"bu-zou-7\">步骤&LT/h3>\n&LTol>\n&LTli>找出待排序的数组中最大和最小的元素&LT/li>\n&LTli>统计数组中每个值为i的元素出现的次数，存入数组 C 的第 i 项&LT/li>\n&LTli>对所有的计数累加（从C中的第一个元素开始，每一项和前一项相加）&LT/li>\n&LTli>反向填充目标数组：将每个元素i放在新数组的第C(i)项，每放一个元素就将C(i)减去1&LT/li>\n&LT/ol>\n&LTh3 id=\"dai-ma-7\">代码&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">count_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">min &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">2147483647\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">max &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 取得最大值和最小值\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan style=\"color:#66d9ef;\">min&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">min &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>x\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan style=\"color:#66d9ef;\">max&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">max &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>x\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 创建数组C\n&LT/span>&LTspan> count &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">* &LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">max &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#66d9ef;\">min &LT/span>&LTspan style=\"color:#f92672;\">+&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>index &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>:\n&LT/span>&LTspan> count[index &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#66d9ef;\">min&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> index &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 填值\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>a &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">max &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#66d9ef;\">min&LT/span>&LTspan style=\"color:#f92672;\">+&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>c &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(count[a]):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[index] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>a &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#66d9ef;\">min\n&LT/span>&LTspan> index &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"di-jiu-chong-pai-xu\">第九种排序&LT/h2>\n&LTp>None？\n当然不会\n自然就是系统自带的&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>.sort()\n&LT/span>&LT/code>&LT/pre>\n&LTp>以上所有源代码均在&LTa rel=\"nofollow\" href=\"https://github.com/EINDEX/Python-algorithm\">Github共享&LT/a>希望与大家共同进步!&LT/p>\n&LThr />\n&LTh2 id=\"can-kao-zi-liao\">参考资料&LT/h2>\n&LTul>\n&LTli>维基百科: &LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F\">冒泡排序&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F\">选择排序&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F\">插入排序&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F\">希尔排序&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F\">归并排序&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F#.E5.8E.9F.E5.9C.B0.EF.BC.88in-place.EF.BC.89.E5.88.86.E5.89.B2.E7.9A.84.E7.89.88.E6.9C.AC\">快速排序&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E5%A0%86%E6%8E%92%E5%BA%8F\">堆排序&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E8%AE%A1%E6%95%B0%E6%8E%92%E5%BA%8F\">计数排序&LT/a>&LT/li>\n&LTli>&LTa rel=\"nofollow\" href=\"http://python3-cookbook.readthedocs.io/zh_CN/latest/\">Python Cookbook&LT/a>&LT/li>\n&LT/ul>\n&LTh2 id=\"gan-xie\">感谢&LT/h2>\n&LTp>知乎用户:&LTa rel=\"nofollow\" href=\"https://www.zhihu.com/people/ding-yi-xing\">dhx1793516813&LT/a>、&LTa rel=\"nofollow\" href=\"https://www.zhihu.com/people/cai-hao-lun-58\">左鸢&LT/a>、&LTa rel=\"nofollow\" href=\"https://www.zhihu.com/people/ling-jian-94\">灵剑&LT/a>\n为本文缺漏之处提出建议&LT/p>\n","permalink":"https://eindex.me/cn/posts/sort-in-python/","slug":"sort-in-python","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"基本排序算法的Python实现","description":null,"updated":null,"date":"2017-10-05T14:34:54+08:00","year":2017,"month":10,"day":5,"taxonomies":{"tags":["Python","Sort"]},"extra":{},"path":"/cn/posts/sort-in-python/","components":["cn","posts","sort-in-python"],"summary":"&LTp>本篇主要实现九(八）大排序算法，分别是冒泡排序，插入排序，选择排序，希尔排序，归并排序，快速排序，堆排序,计数排序。希望大家回顾知识的时候也能从我的这篇文章得到帮助。&LT/p>\n","toc":[{"level":2,"id":"mou-pao-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#mou-pao-pai-xu","title":"冒泡排序","children":[{"level":3,"id":"yuan-li","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li","title":"原理","children":[]},{"level":3,"id":"bu-zou","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou","title":"步骤","children":[]},{"level":3,"id":"dai-ma","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma","title":"代码","children":[]}]},{"level":2,"id":"xuan-ze-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#xuan-ze-pai-xu","title":"选择排序","children":[{"level":3,"id":"yuan-li-1","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li-1","title":"原理","children":[]},{"level":3,"id":"bu-zou-1","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou-1","title":"步骤","children":[]},{"level":3,"id":"dai-ma-1","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma-1","title":"代码","children":[]}]},{"level":2,"id":"cha-ru-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#cha-ru-pai-xu","title":"插入排序","children":[{"level":3,"id":"yuan-li-2","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li-2","title":"原理","children":[]},{"level":3,"id":"bu-zou-2","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou-2","title":"步骤","children":[]},{"level":3,"id":"dai-ma-2","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma-2","title":"代码","children":[]}]},{"level":2,"id":"xi-er-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#xi-er-pai-xu","title":"希尔排序","children":[{"level":3,"id":"yuan-li-3","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li-3","title":"原理","children":[]},{"level":3,"id":"bu-zou-3","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou-3","title":"步骤","children":[]},{"level":3,"id":"dai-ma-3","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma-3","title":"代码","children":[]}]},{"level":2,"id":"gui-bing-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#gui-bing-pai-xu","title":"归并排序","children":[{"level":3,"id":"yuan-li-4","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li-4","title":"原理","children":[]},{"level":3,"id":"bu-zou-4","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou-4","title":"步骤","children":[{"level":4,"id":"die-dai-fa","permalink":"https://eindex.me/cn/posts/sort-in-python/#die-dai-fa","title":"迭代法","children":[]},{"level":4,"id":"di-gui-fa","permalink":"https://eindex.me/cn/posts/sort-in-python/#di-gui-fa","title":"递归法","children":[]}]},{"level":3,"id":"dai-ma-4","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma-4","title":"代码","children":[]}]},{"level":2,"id":"kuai-su-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#kuai-su-pai-xu","title":"快速排序","children":[{"level":3,"id":"yuan-li-5","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li-5","title":"原理","children":[]},{"level":3,"id":"bu-zou-5","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou-5","title":"步骤","children":[]},{"level":3,"id":"dai-ma-5","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma-5","title":"代码","children":[]}]},{"level":2,"id":"dui-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#dui-pai-xu","title":"堆排序","children":[{"level":3,"id":"yuan-li-6","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li-6","title":"原理","children":[]},{"level":3,"id":"bu-zou-6","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou-6","title":"步骤","children":[]},{"level":3,"id":"dai-ma-6","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma-6","title":"代码","children":[]}]},{"level":2,"id":"ji-shu-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#ji-shu-pai-xu","title":"计数排序","children":[{"level":3,"id":"yuan-li-7","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li-7","title":"原理","children":[]},{"level":3,"id":"bu-zou-7","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou-7","title":"步骤","children":[]},{"level":3,"id":"dai-ma-7","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma-7","title":"代码","children":[]}]},{"level":2,"id":"di-jiu-chong-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#di-jiu-chong-pai-xu","title":"第九种排序","children":[]},{"level":2,"id":"can-kao-zi-liao","permalink":"https://eindex.me/cn/posts/sort-in-python/#can-kao-zi-liao","title":"参考资料","children":[]},{"level":2,"id":"gan-xie","permalink":"https://eindex.me/cn/posts/sort-in-python/#gan-xie","title":"感谢","children":[]}],"word_count":3119,"reading_time":16,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/sort-in-python/","title":"基本排序算法的Python实现","path":"/home/runner/work/blog/blog/content/posts/sort-in-python.cn.md"}],"backlinks":[]},"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/tree-in-python/","title":"Tree in Python","path":"/home/runner/work/blog/blog/content/posts/tree-in-python.cn.md"}],"backlinks":[]},{"relative_path":"posts/sort-in-python.cn.md","content":"&LTp>本篇主要实现九(八）大排序算法，分别是冒泡排序，插入排序，选择排序，希尔排序，归并排序，快速排序，堆排序,计数排序。希望大家回顾知识的时候也能从我的这篇文章得到帮助。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>\n&LTp>&LTstrong>为了防止误导读者，本文所有概念性内容均截取自对应Wiki&LT/strong>&LT/p>\n&LTh2 id=\"mou-pao-pai-xu\">冒泡排序&LT/h2>\n&LTh3 id=\"yuan-li\">原理&LT/h3>\n&LTp>冒泡排序(Bubble Sort)是一种简单的排序算法。它重复地走访过要排序的数列，一次比较两个元素，如果他们的顺序错误就把他们交换过来。走访数列的工作是重复地进行直到没有再需要交换，也就是说该数列已经排序完成。这个算法的名字由来是因为越小的元素会经由交换慢慢“浮”到数列的顶端。&LT/p>\n&LTh3 id=\"bu-zou\">步骤&LT/h3>\n&LTp>冒泡排序算法的运作如下：&LT/p>\n&LTol>\n&LTli>比较相邻的元素。如果第一个比第二个大，就交换他们两个。&LT/li>\n&LTli>对每一对相邻元素作同样的工作，从开始第一对到结尾的最后一对。这步做完后，最后的元素会是最大的数。&LT/li>\n&LTli>针对所有的元素重复以上的步骤，除了最后一个。&LT/li>\n&LTli>持续每次对越来越少的元素重复上面的步骤，直到没有任何一对数字需要比较。&LT/li>\n&LT/ol>\n&LTh3 id=\"dai-ma\">代码&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">bubble_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> length &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 第一级遍历\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>index &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(length):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 第二级遍历\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>j &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>, length &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>index):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j]:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 交换两者数据，这里没用temp是因为python 特性元组。\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>], &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j], &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LT/code>&LT/pre>\n&LTp>这种排序其实还可以稍微优化一下，添加一个标记，在排序已完成时，停止排序。&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">bubble_sort_flag&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> length &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>index &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(length):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 标志位\n&LT/span>&LTspan> flag &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">True\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>j &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>, length &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>index):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j]:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>], &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j], &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]\n&LT/span>&LTspan> flag &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">False\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>flag:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 没有发生交换，直接返回list\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"xuan-ze-pai-xu\">选择排序&LT/h2>\n&LTh3 id=\"yuan-li-1\">原理&LT/h3>\n&LTp>选择排序（Selection sort）是一种简单直观的排序算法。它的工作原理大致是将后面的元素最小元素一个个取出然后按顺序放置。&LT/p>\n&LTh3 id=\"bu-zou-1\">步骤&LT/h3>\n&LTol>\n&LTli>在未排序序列中找到最小（大）元素，存放到排序序列的起始位置，&LT/li>\n&LTli>再从剩余未排序元素中继续寻找最小（大）元素，然后放到已排序序列的末尾。&LT/li>\n&LTli>重复第二步，直到所有元素均排序完毕。&LT/li>\n&LT/ol>\n&LTh3 id=\"dai-ma-1\">代码&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">selection_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> n&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range &LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>,n):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">min &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>i\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>j &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(i&LT/span>&LTspan style=\"color:#f92672;\">+&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>,n):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j]&LT/span>&LTspan style=\"color:#f92672;\">&amplt;&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#66d9ef;\">min&LT/span>&LTspan>]:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">min&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan>j\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#66d9ef;\">min&LT/span>&LTspan>],&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[i]&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[i],&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#66d9ef;\">min&LT/span>&LTspan>]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"cha-ru-pai-xu\">插入排序&LT/h2>\n&LTh3 id=\"yuan-li-2\">原理&LT/h3>\n&LTp>插入排序（Insertion Sort）是一种简单直观的排序算法。它的工作原理是通过构建有序序列，对于未排序数据，在已排序序列中从后向前扫描，找到相应位置并插入。&LT/p>\n&LTh3 id=\"bu-zou-2\">步骤&LT/h3>\n&LTol>\n&LTli>从第一个元素开始，该元素可以认为已经被排序&LT/li>\n&LTli>取出下一个元素，在已经排序的元素序列中从后向前扫描&LT/li>\n&LTli>如果该元素（已排序）大于新元素，将该元素移到下一位置&LT/li>\n&LTli>重复步骤3，直到找到已排序的元素小于或者等于新元素的位置&LT/li>\n&LTli>将新元素插入到该位置后&LT/li>\n&LTli>重复步骤2~5&LT/li>\n&LT/ol>\n&LTh3 id=\"dai-ma-2\">代码&LT/h3>\n&LTpre data-lang=\"Python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-Python \">&LTcode class=\"language-Python\" data-lang=\"Python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">insert_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> n &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>, n):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 后一个元素和前一个元素比较\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 如果比前一个小\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[i] &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[i &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 将这个数取出\n&LT/span>&LTspan> temp &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[i]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 保存下标\n&LT/span>&LTspan> index &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>i\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 从后往前依次比较每个元素\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>j &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(i &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 和比取出元素大的元素交换\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j] &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan>temp:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j]\n&LT/span>&LTspan> index &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>j\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">break\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 插入元素\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[index] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>temp\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"xi-er-pai-xu\">希尔排序&LT/h2>\n&LTh3 id=\"yuan-li-3\">原理&LT/h3>\n&LTp>希尔排序，也称递减增量排序算法，是插入排序的一种更高效的改进版本。希尔排序是非稳定排序算法。\n希尔排序是基于插入排序的以下两点性质而提出改进方法的：\n插入排序在对几乎已经排好序的数据操作时，效率高，即可以达到线性排序的效率\n但插入排序一般来说是低效的，因为插入排序每次只能将数据移动一位。&LT/p>\n&LTh3 id=\"bu-zou-3\">步骤&LT/h3>\n&LTp>每次以一定步长(就是跳过等距的数)进行排序，直至步长为1.&LT/p>\n&LTh3 id=\"dai-ma-3\">代码&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">shell_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> n &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 初始步长\n&LT/span>&LTspan> gap &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">round&LT/span>&LTspan>(n &LT/span>&LTspan style=\"color:#f92672;\">/ &LT/span>&LTspan style=\"color:#ae81ff;\">2&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>gap &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(gap, n):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 每个步长进行插入排序\n&LT/span>&LTspan> temp &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[i]\n&LT/span>&LTspan> j &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>i\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 插入排序\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>j &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;= &LT/span>&LTspan>gap &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>gap] &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan>temp:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>gap]\n&LT/span>&LTspan> j &LT/span>&LTspan style=\"color:#f92672;\">-= &LT/span>&LTspan>gap\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>temp\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 得到新的步长\n&LT/span>&LTspan> gap &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">round&LT/span>&LTspan>(gap &LT/span>&LTspan style=\"color:#f92672;\">/ &LT/span>&LTspan style=\"color:#ae81ff;\">2&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LT/code>&LT/pre>\n&LTblockquote>\n&LTp>步长使用的是Donald Shell的建议，另外步长还可以使用Sedgewick提出的(1, 5, 19, 41, 109,...)，该序列的项来自 {\\displaystyle 9\\times 4^{i}-9\\times 2^{i}+1} 9\\times 4^{i}-9\\times 2^{i}+1和 {\\displaystyle 2^{i+2}\\times (2^{i+2}-3)+1} 2^{{i+2}}\\times (2^{{i+2}}-3)+1这两个算式。\n也可以使用&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97\">斐波那契数列&LT/a>除去0和1将剩余的数以黄金分区比的两倍的幂进行运算得到的数列。&LT/p>\n&LT/blockquote>\n&LTh2 id=\"gui-bing-pai-xu\">归并排序&LT/h2>\n&LTh3 id=\"yuan-li-4\">原理&LT/h3>\n&LTp>归并操作(归并算法)，指的是将两个已经排序的序列合并成一个序列的操作。归并排序算法依赖归并操作。&LT/p>\n&LTh3 id=\"bu-zou-4\">步骤&LT/h3>\n&LTh4 id=\"die-dai-fa\">迭代法&LT/h4>\n&LTol>\n&LTli>申请空间，使其大小为两个已经排序序列之和，该空间用来存放合并后的序列&LT/li>\n&LTli>设定两个指针，最初位置分别为两个已经排序序列的起始位置&LT/li>\n&LTli>比较两个指针所指向的元素，选择相对小的元素放入到合并空间，并移动指针到下一位置&LT/li>\n&LTli>重复步骤3直到某一指针到达序列尾&LT/li>\n&LTli>将另一序列剩下的所有元素直接复制到合并序列尾&LT/li>\n&LT/ol>\n&LTh4 id=\"di-gui-fa\">递归法&LT/h4>\n&LTp>假设序列共有n个元素：&LT/p>\n&LTol>\n&LTli>将序列每相邻两个数字进行归并操作，形成 {\\displaystyle floor(n/2)} floor(n/2)个序列，排序后每个序列包含两个元素&LT/li>\n&LTli>将上述序列再次归并，形成 {\\displaystyle floor(n/4)} floor(n/4)个序列，每个序列包含四个元素&LT/li>\n&LTli>重复步骤2，直到所有元素排序完毕&LT/li>\n&LT/ol>\n&LTh3 id=\"dai-ma-4\">代码&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"color:#75715e;\"># 递归法\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">merge_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 认为长度不大于1的数列是有序的\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">&amplt;= &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 二分列表\n&LT/span>&LTspan> middle &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">// &LT/span>&LTspan style=\"color:#ae81ff;\">2\n&LT/span>&LTspan> left &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>merge_sort(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[:middle])\n&LT/span>&LTspan> right &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>merge_sort(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[middle:])\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 最后一次合并\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>merge(left, right)\n&LT/span>&LTspan style=\"color:#75715e;\"># 合并\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">merge&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">left&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">right&LT/span>&LTspan>):\n&LT/span>&LTspan> l,r&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>,&LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> result&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>l&LT/span>&LTspan style=\"color:#f92672;\">&amplt;&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(left) &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>r&LT/span>&LTspan style=\"color:#f92672;\">&amplt;&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(right):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>left[l] &LT/span>&LTspan style=\"color:#f92672;\">&amplt;&LT/span>&LTspan>right[r]:\n&LT/span>&LTspan> result.append(left[l])\n&LT/span>&LTspan> l&LT/span>&LTspan style=\"color:#f92672;\">+=&LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> result.append(right[r])\n&LT/span>&LTspan> r &LT/span>&LTspan style=\"color:#f92672;\">+=&LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> reslut &LT/span>&LTspan style=\"color:#f92672;\">+=&LT/span>&LTspan>left[l:]\n&LT/span>&LTspan> result&LT/span>&LTspan style=\"color:#f92672;\">+=&LT/span>&LTspan>right[r:] \n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>result\n&LT/span>&LT/code>&LT/pre>\n&LTp>鄙人不才，不知归并排序的迭代法如何用Python实现，望指教。&LT/p>\n&LTh2 id=\"kuai-su-pai-xu\">快速排序&LT/h2>\n&LTh3 id=\"yuan-li-5\">原理&LT/h3>\n&LTp>快速排序使用分治法（Divide and conquer）策略来把一个序列（list）分为两个子序列（sub-lists）。&LT/p>\n&LTh3 id=\"bu-zou-5\">步骤&LT/h3>\n&LTol>\n&LTli>从数列中挑出一个元素，称为&ampquot;基准&ampquot;（pivot），&LT/li>\n&LTli>重新排序数列，所有元素比基准值小的摆放在基准前面，所有元素比基准值大的摆在基准的后面（相同的数可以到任一边）。在这个分区结束之后，该基准就处于数列的中间位置。这个称为分区（partition）操作。&LT/li>\n&LTli>递归地（recursive）把小于基准值元素的子数列和大于基准值元素的子数列排序。&LT/li>\n&LT/ol>\n&LTh3 id=\"dai-ma-5\">代码&LT/h3>\n&LTp>普通版&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">quick_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> less &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> pivotList &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> more &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 递归出口\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">&amplt;= &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 将第一个值做为基准\n&LT/span>&LTspan> pivot &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 将比急转小的值放到less数列\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan>pivot:\n&LT/span>&LTspan> less.append(i)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 将比基准打的值放到more数列\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">elif &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan>pivot:\n&LT/span>&LTspan> more.append(i)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 将和基准相同的值保存在基准数列\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> pivotList.append(i)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 对less数列和more数列继续进行排序\n&LT/span>&LTspan> less &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>quick_sort(less)\n&LT/span>&LTspan> more &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>quick_sort(more)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>less &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan>pivotList &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan>more\n&LT/span>&LT/code>&LT/pre>\n&LTp>咳咳，下面这段代码出自《Python cookbook 第二版》传说中的三行实现python快速排序。&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">qsort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">arr&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(arr) &LT/span>&LTspan style=\"color:#f92672;\">&amplt;= &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>arr\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> pivot &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>arr[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>qsort([x &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>arr[&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:] &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan>pivot]) &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan>\\\n&LT/span>&LTspan> [pivot] &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan>\\\n&LT/span>&LTspan> qsort([x &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>arr[&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:] &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;= &LT/span>&LTspan>pivot])\n&LT/span>&LT/code>&LT/pre>\n&LTp>当然还有一行语法糖版本:&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan>qs &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">lambda &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">xs &LT/span>&LTspan>: ( (&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(xs) &LT/span>&LTspan style=\"color:#f92672;\">&amplt;= &LT/span>&LTspan style=\"color:#ae81ff;\">1 &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>[xs]) &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan>[ qs( [x &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>xs[&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:] &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan>xs[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]] ) &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan>[xs[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]] &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan>qs( [x &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>xs[&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:] &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;= &LT/span>&LTspan>xs[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]] ) ] )[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]\n&LT/span>&LT/code>&LT/pre>\n&LTp>是不是感受到了Python的魅力？&LT/p>\n&LTh2 id=\"dui-pai-xu\">堆排序&LT/h2>\n&LTh3 id=\"yuan-li-6\">原理&LT/h3>\n&LTp>堆排序（Heapsort）是指利用堆这种数据结构所设计的一种排序算法。堆积是一个近似完全二叉树的结构，并同时满足堆积的性质：即子结点的键值或索引总是小于（或者大于）它的父节点。&LT/p>\n&LTh3 id=\"bu-zou-6\">步骤&LT/h3>\n&LTol>\n&LTli>创建最大堆:将堆所有数据重新排序，使其成为最大堆&LT/li>\n&LTli>最大堆调整:作用是保持最大堆的性质，是创建最大堆的核心子程序&LT/li>\n&LTli>堆排序:移除位在第一个数据的根节点，并做最大堆调整的递归运算&LT/li>\n&LT/ol>\n&LTh3 id=\"dai-ma-6\">代码&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">heap_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 创建最大堆\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>start &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>((&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">2&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">// &LT/span>&LTspan style=\"color:#ae81ff;\">2&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>):\n&LT/span>&LTspan> sift_down(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>, start, &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>)\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 堆排序\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>end &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>], &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[end] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[end], &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]\n&LT/span>&LTspan> sift_down(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>, end &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"color:#75715e;\"># 最大堆调整\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">sift_down&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">lst&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">start&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">end&LT/span>&LTspan>):\n&LT/span>&LTspan> root &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>start\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan style=\"color:#ae81ff;\">True&LT/span>&LTspan>:\n&LT/span>&LTspan> child &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">2 &LT/span>&LTspan style=\"color:#f92672;\">* &LT/span>&LTspan>root &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>child &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan>end:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">break\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>child &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#ae81ff;\">1 &LT/span>&LTspan style=\"color:#f92672;\">&amplt;= &LT/span>&LTspan>end &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>lst[child] &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan>lst[child &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]:\n&LT/span>&LTspan> child &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>lst[root] &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan>lst[child]:\n&LT/span>&LTspan> lst[root], lst[child] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>lst[child], lst[root]\n&LT/span>&LTspan> root &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>child\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">break\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"ji-shu-pai-xu\">计数排序&LT/h2>\n&LTh3 id=\"yuan-li-7\">原理&LT/h3>\n&LTp>当输入的元素是n个0到k之间的整数时，它的运行时间是Θ(n + k)。计数排序不是比较排序，排序的速度快于任何比较排序算法。&LT/p>\n&LTp>由于用来计数的数组C的长度取决于待排序数组中数据的范围（等于待排序数组的最大值与最小值的差加上1），这使得计数排序对于数据范围很大的数组，需要大量时间和内存。例如：计数排序是用来排序0到100之间的数字的最好的算法，但是它不适合按字母顺序排序人名。但是，计数排序可以用在基数排序算法中，能够更有效的排序数据范围很大的数组。&LT/p>\n&LTh3 id=\"bu-zou-7\">步骤&LT/h3>\n&LTol>\n&LTli>找出待排序的数组中最大和最小的元素&LT/li>\n&LTli>统计数组中每个值为i的元素出现的次数，存入数组 C 的第 i 项&LT/li>\n&LTli>对所有的计数累加（从C中的第一个元素开始，每一项和前一项相加）&LT/li>\n&LTli>反向填充目标数组：将每个元素i放在新数组的第C(i)项，每放一个元素就将C(i)减去1&LT/li>\n&LT/ol>\n&LTh3 id=\"dai-ma-7\">代码&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">count_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">min &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">2147483647\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">max &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 取得最大值和最小值\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan style=\"color:#66d9ef;\">min&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">min &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>x\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan style=\"color:#66d9ef;\">max&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">max &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>x\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 创建数组C\n&LT/span>&LTspan> count &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">* &LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">max &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#66d9ef;\">min &LT/span>&LTspan style=\"color:#f92672;\">+&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>index &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>:\n&LT/span>&LTspan> count[index &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#66d9ef;\">min&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> index &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 填值\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>a &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">max &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#66d9ef;\">min&LT/span>&LTspan style=\"color:#f92672;\">+&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>c &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(count[a]):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[index] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>a &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#66d9ef;\">min\n&LT/span>&LTspan> index &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"di-jiu-chong-pai-xu\">第九种排序&LT/h2>\n&LTp>None？\n当然不会\n自然就是系统自带的&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>.sort()\n&LT/span>&LT/code>&LT/pre>\n&LTp>以上所有源代码均在&LTa rel=\"nofollow\" href=\"https://github.com/EINDEX/Python-algorithm\">Github共享&LT/a>希望与大家共同进步!&LT/p>\n&LThr />\n&LTh2 id=\"can-kao-zi-liao\">参考资料&LT/h2>\n&LTul>\n&LTli>维基百科: &LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F\">冒泡排序&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F\">选择排序&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F\">插入排序&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F\">希尔排序&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F\">归并排序&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F#.E5.8E.9F.E5.9C.B0.EF.BC.88in-place.EF.BC.89.E5.88.86.E5.89.B2.E7.9A.84.E7.89.88.E6.9C.AC\">快速排序&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E5%A0%86%E6%8E%92%E5%BA%8F\">堆排序&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E8%AE%A1%E6%95%B0%E6%8E%92%E5%BA%8F\">计数排序&LT/a>&LT/li>\n&LTli>&LTa rel=\"nofollow\" href=\"http://python3-cookbook.readthedocs.io/zh_CN/latest/\">Python Cookbook&LT/a>&LT/li>\n&LT/ul>\n&LTh2 id=\"gan-xie\">感谢&LT/h2>\n&LTp>知乎用户:&LTa rel=\"nofollow\" href=\"https://www.zhihu.com/people/ding-yi-xing\">dhx1793516813&LT/a>、&LTa rel=\"nofollow\" href=\"https://www.zhihu.com/people/cai-hao-lun-58\">左鸢&LT/a>、&LTa rel=\"nofollow\" href=\"https://www.zhihu.com/people/ling-jian-94\">灵剑&LT/a>\n为本文缺漏之处提出建议&LT/p>\n","permalink":"https://eindex.me/cn/posts/sort-in-python/","slug":"sort-in-python","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"基本排序算法的Python实现","description":null,"updated":null,"date":"2017-10-05T14:34:54+08:00","year":2017,"month":10,"day":5,"taxonomies":{"tags":["Python","Sort"]},"extra":{},"path":"/cn/posts/sort-in-python/","components":["cn","posts","sort-in-python"],"summary":"&LTp>本篇主要实现九(八）大排序算法，分别是冒泡排序，插入排序，选择排序，希尔排序，归并排序，快速排序，堆排序,计数排序。希望大家回顾知识的时候也能从我的这篇文章得到帮助。&LT/p>\n","toc":[{"level":2,"id":"mou-pao-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#mou-pao-pai-xu","title":"冒泡排序","children":[{"level":3,"id":"yuan-li","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li","title":"原理","children":[]},{"level":3,"id":"bu-zou","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou","title":"步骤","children":[]},{"level":3,"id":"dai-ma","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma","title":"代码","children":[]}]},{"level":2,"id":"xuan-ze-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#xuan-ze-pai-xu","title":"选择排序","children":[{"level":3,"id":"yuan-li-1","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li-1","title":"原理","children":[]},{"level":3,"id":"bu-zou-1","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou-1","title":"步骤","children":[]},{"level":3,"id":"dai-ma-1","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma-1","title":"代码","children":[]}]},{"level":2,"id":"cha-ru-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#cha-ru-pai-xu","title":"插入排序","children":[{"level":3,"id":"yuan-li-2","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li-2","title":"原理","children":[]},{"level":3,"id":"bu-zou-2","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou-2","title":"步骤","children":[]},{"level":3,"id":"dai-ma-2","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma-2","title":"代码","children":[]}]},{"level":2,"id":"xi-er-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#xi-er-pai-xu","title":"希尔排序","children":[{"level":3,"id":"yuan-li-3","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li-3","title":"原理","children":[]},{"level":3,"id":"bu-zou-3","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou-3","title":"步骤","children":[]},{"level":3,"id":"dai-ma-3","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma-3","title":"代码","children":[]}]},{"level":2,"id":"gui-bing-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#gui-bing-pai-xu","title":"归并排序","children":[{"level":3,"id":"yuan-li-4","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li-4","title":"原理","children":[]},{"level":3,"id":"bu-zou-4","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou-4","title":"步骤","children":[{"level":4,"id":"die-dai-fa","permalink":"https://eindex.me/cn/posts/sort-in-python/#die-dai-fa","title":"迭代法","children":[]},{"level":4,"id":"di-gui-fa","permalink":"https://eindex.me/cn/posts/sort-in-python/#di-gui-fa","title":"递归法","children":[]}]},{"level":3,"id":"dai-ma-4","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma-4","title":"代码","children":[]}]},{"level":2,"id":"kuai-su-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#kuai-su-pai-xu","title":"快速排序","children":[{"level":3,"id":"yuan-li-5","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li-5","title":"原理","children":[]},{"level":3,"id":"bu-zou-5","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou-5","title":"步骤","children":[]},{"level":3,"id":"dai-ma-5","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma-5","title":"代码","children":[]}]},{"level":2,"id":"dui-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#dui-pai-xu","title":"堆排序","children":[{"level":3,"id":"yuan-li-6","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li-6","title":"原理","children":[]},{"level":3,"id":"bu-zou-6","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou-6","title":"步骤","children":[]},{"level":3,"id":"dai-ma-6","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma-6","title":"代码","children":[]}]},{"level":2,"id":"ji-shu-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#ji-shu-pai-xu","title":"计数排序","children":[{"level":3,"id":"yuan-li-7","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li-7","title":"原理","children":[]},{"level":3,"id":"bu-zou-7","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou-7","title":"步骤","children":[]},{"level":3,"id":"dai-ma-7","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma-7","title":"代码","children":[]}]},{"level":2,"id":"di-jiu-chong-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#di-jiu-chong-pai-xu","title":"第九种排序","children":[]},{"level":2,"id":"can-kao-zi-liao","permalink":"https://eindex.me/cn/posts/sort-in-python/#can-kao-zi-liao","title":"参考资料","children":[]},{"level":2,"id":"gan-xie","permalink":"https://eindex.me/cn/posts/sort-in-python/#gan-xie","title":"感谢","children":[]}],"word_count":3119,"reading_time":16,"assets":[],"draft":false,"lang":"cn","lower":{"relative_path":"posts/tree-in-python.cn.md","content":"&LTp>树是计算机科学中常用的数据结构之一,常见的地方有，Java 的继承树等。\n还有一些基于树的特殊数据结构，比如二叉树，B 树，等等。&LT/p>\n&LTp>本篇会讲述一些关于简单关于树的操作。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"shu-de-ding-yi\">树的定义&LT/h2>\n&LTblockquote>\n&LTp>树（英语：tree）是一种抽象数据类型（ADT）或是实作这种抽象数据类型的数据结构，用来模拟具有树状结构性质的数据集合。它是由n（n&ampgt;0）个有限节点组成一个具有层次关系的集合。把它叫做“树”是因为它看起来像一棵倒挂的树，也就是说它是根朝上，而叶朝下的。它具有以下的特点：&LT/p>\n&LT/blockquote>\n&LTblockquote>\n&LTul>\n&LTli>每个节点有零个或多个子节点&LT/li>\n&LTli>没有父节点的节点称为根节点&LT/li>\n&LTli>每一个非根节点有且只有一个父节点&LT/li>\n&LTli>除了根节点外，每个子节点可以分为多个不相交的子树&LT/li>\n&LT/ul>\n&LT/blockquote>\n&LTp>节选自 &LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E6%A0%91_(%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84)\">树(数据结构)&LT/a>&LT/p>\n&LTh2 id=\"ding-yi-shu-ju-jie-gou\">定义数据结构&LT/h2>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">class &LT/span>&LTspan style=\"text-decoration:underline;color:#a6e22e;\">TreeNode&LT/span>&LTspan>(&LT/span>&LTspan style=\"text-decoration:underline;font-style:italic;color:#a6e22e;\">object&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 一个树节点\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__init__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">value&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">children&LT/span>&LTspan>: &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\">\n&LT/span>&LTspan style=\"color:#75715e;\"> :param value: 节点的值\n&LT/span>&LTspan style=\"color:#75715e;\"> :param children: 节点的子节点，一个 TreeNode 的列表\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan>\n&LT/span>&LTspan> self.value &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>value\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>children:\n&LT/span>&LTspan> self.children &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">elif not &LT/span>&LTspan>self.value:\n&LT/span>&LTspan> self.children &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> self.children &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>children\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">class &LT/span>&LTspan style=\"text-decoration:underline;color:#a6e22e;\">Tree&LT/span>&LTspan>(&LT/span>&LTspan style=\"text-decoration:underline;font-style:italic;color:#a6e22e;\">object&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 树：基本树的数据结构\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__init__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">root&LT/span>&LTspan>: TreeNode &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 传入根节点\n&LT/span>&LTspan style=\"color:#75715e;\"> :param root: 如果为 TreeNode 为根节点， 如果为 None 为空书\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>(root &LT/span>&LTspan style=\"color:#f92672;\">is &LT/span>&LTspan style=\"color:#ae81ff;\">None &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(root, TreeNode)):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">raise &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">AttributeError&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;illegal root&amp#39;&LT/span>&LTspan>)\n&LT/span>&LTspan> self.root &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>root\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"qian-xu-bian-li\">前序遍历&LT/h2>\n&LTp>先遍历根节点。在遍历孩子节点。\n&LTimg src=\"https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E5%89%8D%E5%BA%8F%E9%81%8D%E5%8E%86.jpg\" alt=\"前序遍历\" />&LT/p>\n&LTh3 id=\"xun-huan-ban\">循环版&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">preorder_traversal_while&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 树的前序遍历\n&LT/span>&LTspan style=\"color:#75715e;\"> :return: list of tree node value\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>self.root:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LTspan> stack &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[self.root]\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack):\n&LT/span>&LTspan> node &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack.pop()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>node.value:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">continue\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>node.children[::&LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]:\n&LT/span>&LTspan> stack.append(sub_node)\n&LT/span>&LTspan> res.append(node.value)\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"di-gui-ban\">递归版&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">preorder_traversal_recursion&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 树的前序遍历\n&LT/span>&LTspan style=\"color:#75715e;\"> :return: list of tree node value\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>self.root:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">_inner&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">root&LT/span>&LTspan>):\n&LT/span>&LTspan> inner_res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>root.value:\n&LT/span>&LTspan> inner_res.append(root.value)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>root.children:\n&LT/span>&LTspan> inner_res &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan>_inner(sub_node)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>inner_res\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>_inner(self.root)\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"hou-xu-bian-li\">后序遍历&LT/h2>\n&LTp>先遍历孩子节点，最后遍历根节点。&LT/p>\n&LTp>&LTimg src=\"https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86.jpg\" alt=\"后序遍历\" />&LT/p>\n&LTh3 id=\"xun-huan-ban-1\">循环版&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">postorder_traversal_while&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 树的后序遍历\n&LT/span>&LTspan style=\"color:#75715e;\"> :return: list of tree node value\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>self.root:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LTspan>\n&LT/span>&LTspan> stack &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[self.root]\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack):\n&LT/span>&LTspan> node &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack.pop()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>node.value:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">continue\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>node.children:\n&LT/span>&LTspan> stack.append(sub_node)\n&LT/span>&LTspan> res.append(node.value)\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res[::&LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"di-gui-ban-1\">递归版&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">postorder_traversal_recursion&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 树的后序遍历\n&LT/span>&LTspan style=\"color:#75715e;\"> :return: list of tree node value\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>self.root:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">_inner&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">root&LT/span>&LTspan>):\n&LT/span>&LTspan> inner_res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>root.value:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>root.children:\n&LT/span>&LTspan> inner_res &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan>_inner(sub_node)\n&LT/span>&LTspan> inner_res.append(root.value)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>inner_res\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>_inner(self.root)\n&LT/span>&LTspan>\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"ceng-ci-bian-li\">层次遍历&LT/h2>\n&LTp>按层遍历节点。\n&LTimg src=\"https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E5%B1%82%E5%BA%8F%E9%81%8D%E5%8E%86.jpg\" alt=\"层序遍历\" />&LT/p>\n&LTh3 id=\"xun-huan-ban-2\">循环版&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">layer_while&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan style=\"color:#75715e;\"> 树的层序遍历\n&LT/span>&LTspan style=\"color:#75715e;\"> :return: list of tree node value\n&LT/span>&LTspan style=\"color:#75715e;\"> &ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>self.root:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LTspan>\n&LT/span>&LTspan> queue &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>Queue()\n&LT/span>&LTspan> queue.put(self.root)\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>queue.qsize():\n&LT/span>&LTspan> node &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>queue.get()\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>node.value:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">continue\n&LT/span>&LTspan> res.append(node.value)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>node.children:\n&LT/span>&LTspan> queue.put(sub_node)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"qiu-shu-de-shen-du\">求树的深度&LT/h2>\n&LTp>计算树的最大深度。&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">depth_recursion&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">_inner&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">root&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">depth&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>root.children:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>depth\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#66d9ef;\">max&LT/span>&LTspan>([_inner(sub_node, depth&LT/span>&LTspan style=\"color:#f92672;\">+&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>root.children])\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>_inner(self.root)\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"qiu-shu-de-jie-dian-shu\">求树的结点数&LT/h2>\n&LTp>计算树一共有多少节点。&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">node_count&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">_inner&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">root&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>root.children:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#ae81ff;\">1 &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#66d9ef;\">sum&LT/span>&LTspan>([_inner(sub_node) &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>root.children])\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>_inner(self.root)\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"qiu-shu-de-xie-zi-shu\">求树的叶子数&LT/h2>\n&LTp>计算书中有多少没有孩子的节点。&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">leaf_count&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">_inner&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">root&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>root.children:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#66d9ef;\">sum&LT/span>&LTspan>([_inner(sub_node) &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>root.children])\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>_inner(self.root)\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"qiu-liang-ge-jie-dian-de-zui-di-gong-gong-zu-xian-jie-dian\">求两个结点的最低公共祖先结点&LT/h2>\n&LTp>首先需要在树中找到两个结点。\n保存找到两个节点的链表。\n遍历两个链表的最长公共节点，就能找到最低的公共祖先节点。\n&LTimg src=\"https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E6%9C%80%E4%BD%8E%E5%85%AC%E5%85%B1%E7%A5%96%E5%85%88%E8%8A%82%E7%82%B9.jpg\" alt=\"最低公共祖先节点\" />&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">lowest_ancestor_node&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">node1&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">node2&LT/span>&LTspan>):\n&LT/span>&LTspan> stack &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[self.root]\n&LT/span>&LTspan> stack1 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> stack2 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack) &LT/span>&LTspan style=\"color:#f92672;\">and not &LT/span>&LTspan>(stack1 &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>stack2):\n&LT/span>&LTspan> node &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack.pop()\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>node &LT/span>&LTspan style=\"color:#f92672;\">is &LT/span>&LTspan>node1:\n&LT/span>&LTspan> stack1 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack[:]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>node &LT/span>&LTspan style=\"color:#f92672;\">is &LT/span>&LTspan>node2:\n&LT/span>&LTspan> stack2 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack[:]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>node.value:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">continue\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>node.children:\n&LT/span>&LTspan> stack.append(sub_node)\n&LT/span>&LTspan>\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>self.root\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack1)):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>stack1[i] &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan>stack2[i]:\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack1[i]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res.value\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>res.value\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"qiu-ren-yi-liang-jie-dian-ju-chi\">求任意两结点距离&LT/h2>\n&LTp>首先需要在树中找到两个结点。\n保存找到两个节点的链表。\n在判断剩余的长度\n&LTimg src=\"https://eindex.me/cn/posts/tree-in-python/media/15231560956719/%E4%BB%BB%E6%84%8F%E4%B8%A4%E8%8A%82%E7%82%B9%E8%B7%9D%E7%A6%BB.jpg\" alt=\"任意两节点距离\" />&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">two_node_distence&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">node1&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">node2&LT/span>&LTspan>):\n&LT/span>&LTspan> stack &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[self.root]\n&LT/span>&LTspan> stack1 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> stack2 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack) &LT/span>&LTspan style=\"color:#f92672;\">and not &LT/span>&LTspan>(stack1 &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>stack2):\n&LT/span>&LTspan> node &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack.pop()\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>node &LT/span>&LTspan style=\"color:#f92672;\">is &LT/span>&LTspan>node1:\n&LT/span>&LTspan> stack1 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack[:]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>node &LT/span>&LTspan style=\"color:#f92672;\">is &LT/span>&LTspan>node2:\n&LT/span>&LTspan> stack2 &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack[:]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if not &LT/span>&LTspan>node.value:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">continue\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>sub_node &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>node.children:\n&LT/span>&LTspan> stack.append(sub_node)\n&LT/span>&LTspan>\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>self.root\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack1)):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>stack1[i] &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan>stack2[i]:\n&LT/span>&LTspan> res &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack1[i]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack1) &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack2) &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">2&LT/span>&LTspan style=\"color:#f92672;\">*&LT/span>&LTspan>i\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack1) &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(stack2) &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">2&LT/span>&LTspan style=\"color:#f92672;\">*&LT/span>&LTspan>i\n&LT/span>&LTspan>\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"zong-shu\">综述&LT/h2>\n&LTp>以上就是和树有关联的简单代码。\n以上代码也在 Github 上发布 &LTa rel=\"nofollow\" href=\"https://github.com/EINDEX/Python-algorithm/blob/master/data_structure/tree/tree.py\">tree&LT/a>， 如有差错，欢迎提交 Issue 或 PR。&LT/p>\n&LTh2 id=\"geng-xin\">更新&LT/h2>\n&LTul>\n&LTli>修复图片的 Bug&LT/li>\n&LT/ul>\n","permalink":"https://eindex.me/cn/posts/tree-in-python/","slug":"tree-in-python","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"Tree in Python","description":null,"updated":null,"date":"2018-04-08T14:30:44+08:00","year":2018,"month":4,"day":8,"taxonomies":{"tags":["Python"],"series":["algorithm"]},"extra":{},"path":"/cn/posts/tree-in-python/","components":["cn","posts","tree-in-python"],"summary":"&LTp>树是计算机科学中常用的数据结构之一,常见的地方有，Java 的继承树等。\n还有一些基于树的特殊数据结构，比如二叉树，B 树，等等。&LT/p>\n&LTp>本篇会讲述一些关于简单关于树的操作。&LT/p>\n","toc":[{"level":2,"id":"shu-de-ding-yi","permalink":"https://eindex.me/cn/posts/tree-in-python/#shu-de-ding-yi","title":"树的定义","children":[]},{"level":2,"id":"ding-yi-shu-ju-jie-gou","permalink":"https://eindex.me/cn/posts/tree-in-python/#ding-yi-shu-ju-jie-gou","title":"定义数据结构","children":[]},{"level":2,"id":"qian-xu-bian-li","permalink":"https://eindex.me/cn/posts/tree-in-python/#qian-xu-bian-li","title":"前序遍历","children":[{"level":3,"id":"xun-huan-ban","permalink":"https://eindex.me/cn/posts/tree-in-python/#xun-huan-ban","title":"循环版","children":[]},{"level":3,"id":"di-gui-ban","permalink":"https://eindex.me/cn/posts/tree-in-python/#di-gui-ban","title":"递归版","children":[]}]},{"level":2,"id":"hou-xu-bian-li","permalink":"https://eindex.me/cn/posts/tree-in-python/#hou-xu-bian-li","title":"后序遍历","children":[{"level":3,"id":"xun-huan-ban-1","permalink":"https://eindex.me/cn/posts/tree-in-python/#xun-huan-ban-1","title":"循环版","children":[]},{"level":3,"id":"di-gui-ban-1","permalink":"https://eindex.me/cn/posts/tree-in-python/#di-gui-ban-1","title":"递归版","children":[]}]},{"level":2,"id":"ceng-ci-bian-li","permalink":"https://eindex.me/cn/posts/tree-in-python/#ceng-ci-bian-li","title":"层次遍历","children":[{"level":3,"id":"xun-huan-ban-2","permalink":"https://eindex.me/cn/posts/tree-in-python/#xun-huan-ban-2","title":"循环版","children":[]}]},{"level":2,"id":"qiu-shu-de-shen-du","permalink":"https://eindex.me/cn/posts/tree-in-python/#qiu-shu-de-shen-du","title":"求树的深度","children":[]},{"level":2,"id":"qiu-shu-de-jie-dian-shu","permalink":"https://eindex.me/cn/posts/tree-in-python/#qiu-shu-de-jie-dian-shu","title":"求树的结点数","children":[]},{"level":2,"id":"qiu-shu-de-xie-zi-shu","permalink":"https://eindex.me/cn/posts/tree-in-python/#qiu-shu-de-xie-zi-shu","title":"求树的叶子数","children":[]},{"level":2,"id":"qiu-liang-ge-jie-dian-de-zui-di-gong-gong-zu-xian-jie-dian","permalink":"https://eindex.me/cn/posts/tree-in-python/#qiu-liang-ge-jie-dian-de-zui-di-gong-gong-zu-xian-jie-dian","title":"求两个结点的最低公共祖先结点","children":[]},{"level":2,"id":"qiu-ren-yi-liang-jie-dian-ju-chi","permalink":"https://eindex.me/cn/posts/tree-in-python/#qiu-ren-yi-liang-jie-dian-ju-chi","title":"求任意两结点距离","children":[]},{"level":2,"id":"zong-shu","permalink":"https://eindex.me/cn/posts/tree-in-python/#zong-shu","title":"综述","children":[]},{"level":2,"id":"geng-xin","permalink":"https://eindex.me/cn/posts/tree-in-python/#geng-xin","title":"更新","children":[]}],"word_count":1210,"reading_time":7,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/tree-in-python/","title":"Tree in Python","path":"/home/runner/work/blog/blog/content/posts/tree-in-python.cn.md"}],"backlinks":[]},"higher":{"relative_path":"posts/thoughtworks-one-month.cn.md","content":"&LTp>距离加入 Thoughtworks 已有一个月。\n这家公司也并非互联网公司，没有高强度的工作节奏，没有996，有一些敏捷信仰。\n对于武汉来说，也算是一个优秀的公司。&LT/p>\n&LTp>同时正如网上所言：该有的缺点也是有的。好奇的同学可以去看一下我的编程引路人（也是我司黑粉头子）耗子叔（陈皓）的文章。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"ji-zhu-bian-geng\">技术变更&LT/h2>\n&LTp>通过一个月的折磨，本人成为一名勉强能用的 Salesforce 开发者。\n现在的技术栈新增了：&LT/p>\n&LTul>\n&LTli>Apex&LT/li>\n&LTli>SOQL&LT/li>\n&LTli>Lighting Web Content&LT/li>\n&LT/ul>\n&LTp>使用的产品新增了：&LT/p>\n&LTul>\n&LTli>AWS lambda&LT/li>\n&LTli>Salesforce&LT/li>\n&LT/ul>\n&LTp>但怎么说呢 Salesforce、Apex、SOQL 对开发者真的是非常不友善基本的功能都不完全。&LT/p>\n&LTp>先来说说 SOQL：&LT/p>\n&LTol>\n&LTli>不支持 update delete insert&LT/li>\n&LTli>不支持 join&LT/li>\n&LTli>子查询只能写一层（本人也不推荐多层）&LT/li>\n&LTli>select 结果不支持直接计算，需要在 object 上添加 field&LT/li>\n&LTli>group by 支持不够灵活&LT/li>\n&LTli>不支持 field = field 的查询方式&LT/li>\n&LT/ol>\n&LTp>在来吐槽一下 Apex：&LT/p>\n&LTol>\n&LTli>云开发，没有本地开发环境，别想在本地调试，调试需要上传代码，日志难以检索&LT/li>\n&LTli>资源受限，除了 Batchable 之外每一种都会要较为严苛的资源使用量限制&LT/li>\n&LTli>语法低级，感觉像是 Java6 时代&LT/li>\n&LT/ol>\n&LTp>最后吐槽 Salesforce：&LT/p>\n&LTol>\n&LTli>上面两个东西都是 Salesforce 系统自带的。&LT/li>\n&LTli>网络延时长。&LT/li>\n&LTli>测试运行效率低。&LT/li>\n&LT/ol>\n&LTh2 id=\"ye-wu-fa-zhan\">业务发展&LT/h2>\n&LTp>这是机密，我作为一头萌新，我只能说业务复杂度极高，技术复杂度倒是相对低很多，这么一比较，其实业务也没有多么复杂。&LT/p>\n&LTh2 id=\"dui-wei-lai-de-zhan-wang\">对未来的展望&LT/h2>\n&LTp>这 2019 年总是要完成我 2017 年定下的目标了嘛，在 965 的公司都不能完成的话。以后也是没有什么希望了嘛。&LT/p>\n&LTh2 id=\"end\">End&LT/h2>\n&LTp>Thoughtworks 在武汉还是一个非常值得加入的公司，有想要内推的小伙伴可以联系我。&LT/p>\n","permalink":"https://eindex.me/cn/posts/thoughtworks-one-month/","slug":"thoughtworks-one-month","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"Thoughtworks 一月","description":null,"updated":null,"date":"2017-10-05T14:34:54+08:00","year":2017,"month":10,"day":5,"taxonomies":{"tags":["Thoughtworks"]},"extra":{},"path":"/cn/posts/thoughtworks-one-month/","components":["cn","posts","thoughtworks-one-month"],"summary":"&LTp>距离加入 Thoughtworks 已有一个月。\n这家公司也并非互联网公司，没有高强度的工作节奏，没有996，有一些敏捷信仰。\n对于武汉来说，也算是一个优秀的公司。&LT/p>\n&LTp>同时正如网上所言：该有的缺点也是有的。好奇的同学可以去看一下我的编程引路人（也是我司黑粉头子）耗子叔（陈皓）的文章。&LT/p>\n","toc":[{"level":2,"id":"ji-zhu-bian-geng","permalink":"https://eindex.me/cn/posts/thoughtworks-one-month/#ji-zhu-bian-geng","title":"技术变更","children":[]},{"level":2,"id":"ye-wu-fa-zhan","permalink":"https://eindex.me/cn/posts/thoughtworks-one-month/#ye-wu-fa-zhan","title":"业务发展","children":[]},{"level":2,"id":"dui-wei-lai-de-zhan-wang","permalink":"https://eindex.me/cn/posts/thoughtworks-one-month/#dui-wei-lai-de-zhan-wang","title":"对未来的展望","children":[]},{"level":2,"id":"end","permalink":"https://eindex.me/cn/posts/thoughtworks-one-month/#end","title":"End","children":[]}],"word_count":512,"reading_time":3,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/thoughtworks-one-month/","title":"Thoughtworks 一月","path":"/home/runner/work/blog/blog/content/posts/thoughtworks-one-month.cn.md"}],"backlinks":[]},"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/sort-in-python/","title":"基本排序算法的Python实现","path":"/home/runner/work/blog/blog/content/posts/sort-in-python.cn.md"}],"backlinks":[]},{"relative_path":"posts/thoughtworks-one-month.cn.md","content":"&LTp>距离加入 Thoughtworks 已有一个月。\n这家公司也并非互联网公司，没有高强度的工作节奏，没有996，有一些敏捷信仰。\n对于武汉来说，也算是一个优秀的公司。&LT/p>\n&LTp>同时正如网上所言：该有的缺点也是有的。好奇的同学可以去看一下我的编程引路人（也是我司黑粉头子）耗子叔（陈皓）的文章。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"ji-zhu-bian-geng\">技术变更&LT/h2>\n&LTp>通过一个月的折磨，本人成为一名勉强能用的 Salesforce 开发者。\n现在的技术栈新增了：&LT/p>\n&LTul>\n&LTli>Apex&LT/li>\n&LTli>SOQL&LT/li>\n&LTli>Lighting Web Content&LT/li>\n&LT/ul>\n&LTp>使用的产品新增了：&LT/p>\n&LTul>\n&LTli>AWS lambda&LT/li>\n&LTli>Salesforce&LT/li>\n&LT/ul>\n&LTp>但怎么说呢 Salesforce、Apex、SOQL 对开发者真的是非常不友善基本的功能都不完全。&LT/p>\n&LTp>先来说说 SOQL：&LT/p>\n&LTol>\n&LTli>不支持 update delete insert&LT/li>\n&LTli>不支持 join&LT/li>\n&LTli>子查询只能写一层（本人也不推荐多层）&LT/li>\n&LTli>select 结果不支持直接计算，需要在 object 上添加 field&LT/li>\n&LTli>group by 支持不够灵活&LT/li>\n&LTli>不支持 field = field 的查询方式&LT/li>\n&LT/ol>\n&LTp>在来吐槽一下 Apex：&LT/p>\n&LTol>\n&LTli>云开发，没有本地开发环境，别想在本地调试，调试需要上传代码，日志难以检索&LT/li>\n&LTli>资源受限，除了 Batchable 之外每一种都会要较为严苛的资源使用量限制&LT/li>\n&LTli>语法低级，感觉像是 Java6 时代&LT/li>\n&LT/ol>\n&LTp>最后吐槽 Salesforce：&LT/p>\n&LTol>\n&LTli>上面两个东西都是 Salesforce 系统自带的。&LT/li>\n&LTli>网络延时长。&LT/li>\n&LTli>测试运行效率低。&LT/li>\n&LT/ol>\n&LTh2 id=\"ye-wu-fa-zhan\">业务发展&LT/h2>\n&LTp>这是机密，我作为一头萌新，我只能说业务复杂度极高，技术复杂度倒是相对低很多，这么一比较，其实业务也没有多么复杂。&LT/p>\n&LTh2 id=\"dui-wei-lai-de-zhan-wang\">对未来的展望&LT/h2>\n&LTp>这 2019 年总是要完成我 2017 年定下的目标了嘛，在 965 的公司都不能完成的话。以后也是没有什么希望了嘛。&LT/p>\n&LTh2 id=\"end\">End&LT/h2>\n&LTp>Thoughtworks 在武汉还是一个非常值得加入的公司，有想要内推的小伙伴可以联系我。&LT/p>\n","permalink":"https://eindex.me/cn/posts/thoughtworks-one-month/","slug":"thoughtworks-one-month","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"Thoughtworks 一月","description":null,"updated":null,"date":"2017-10-05T14:34:54+08:00","year":2017,"month":10,"day":5,"taxonomies":{"tags":["Thoughtworks"]},"extra":{},"path":"/cn/posts/thoughtworks-one-month/","components":["cn","posts","thoughtworks-one-month"],"summary":"&LTp>距离加入 Thoughtworks 已有一个月。\n这家公司也并非互联网公司，没有高强度的工作节奏，没有996，有一些敏捷信仰。\n对于武汉来说，也算是一个优秀的公司。&LT/p>\n&LTp>同时正如网上所言：该有的缺点也是有的。好奇的同学可以去看一下我的编程引路人（也是我司黑粉头子）耗子叔（陈皓）的文章。&LT/p>\n","toc":[{"level":2,"id":"ji-zhu-bian-geng","permalink":"https://eindex.me/cn/posts/thoughtworks-one-month/#ji-zhu-bian-geng","title":"技术变更","children":[]},{"level":2,"id":"ye-wu-fa-zhan","permalink":"https://eindex.me/cn/posts/thoughtworks-one-month/#ye-wu-fa-zhan","title":"业务发展","children":[]},{"level":2,"id":"dui-wei-lai-de-zhan-wang","permalink":"https://eindex.me/cn/posts/thoughtworks-one-month/#dui-wei-lai-de-zhan-wang","title":"对未来的展望","children":[]},{"level":2,"id":"end","permalink":"https://eindex.me/cn/posts/thoughtworks-one-month/#end","title":"End","children":[]}],"word_count":512,"reading_time":3,"assets":[],"draft":false,"lang":"cn","lower":{"relative_path":"posts/sort-in-python.cn.md","content":"&LTp>本篇主要实现九(八）大排序算法，分别是冒泡排序，插入排序，选择排序，希尔排序，归并排序，快速排序，堆排序,计数排序。希望大家回顾知识的时候也能从我的这篇文章得到帮助。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>\n&LTp>&LTstrong>为了防止误导读者，本文所有概念性内容均截取自对应Wiki&LT/strong>&LT/p>\n&LTh2 id=\"mou-pao-pai-xu\">冒泡排序&LT/h2>\n&LTh3 id=\"yuan-li\">原理&LT/h3>\n&LTp>冒泡排序(Bubble Sort)是一种简单的排序算法。它重复地走访过要排序的数列，一次比较两个元素，如果他们的顺序错误就把他们交换过来。走访数列的工作是重复地进行直到没有再需要交换，也就是说该数列已经排序完成。这个算法的名字由来是因为越小的元素会经由交换慢慢“浮”到数列的顶端。&LT/p>\n&LTh3 id=\"bu-zou\">步骤&LT/h3>\n&LTp>冒泡排序算法的运作如下：&LT/p>\n&LTol>\n&LTli>比较相邻的元素。如果第一个比第二个大，就交换他们两个。&LT/li>\n&LTli>对每一对相邻元素作同样的工作，从开始第一对到结尾的最后一对。这步做完后，最后的元素会是最大的数。&LT/li>\n&LTli>针对所有的元素重复以上的步骤，除了最后一个。&LT/li>\n&LTli>持续每次对越来越少的元素重复上面的步骤，直到没有任何一对数字需要比较。&LT/li>\n&LT/ol>\n&LTh3 id=\"dai-ma\">代码&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">bubble_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> length &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 第一级遍历\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>index &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(length):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 第二级遍历\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>j &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>, length &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>index):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j]:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 交换两者数据，这里没用temp是因为python 特性元组。\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>], &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j], &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LT/code>&LT/pre>\n&LTp>这种排序其实还可以稍微优化一下，添加一个标记，在排序已完成时，停止排序。&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">bubble_sort_flag&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> length &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>index &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(length):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 标志位\n&LT/span>&LTspan> flag &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">True\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>j &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>, length &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>index):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j]:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>], &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j], &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]\n&LT/span>&LTspan> flag &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">False\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>flag:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 没有发生交换，直接返回list\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"xuan-ze-pai-xu\">选择排序&LT/h2>\n&LTh3 id=\"yuan-li-1\">原理&LT/h3>\n&LTp>选择排序（Selection sort）是一种简单直观的排序算法。它的工作原理大致是将后面的元素最小元素一个个取出然后按顺序放置。&LT/p>\n&LTh3 id=\"bu-zou-1\">步骤&LT/h3>\n&LTol>\n&LTli>在未排序序列中找到最小（大）元素，存放到排序序列的起始位置，&LT/li>\n&LTli>再从剩余未排序元素中继续寻找最小（大）元素，然后放到已排序序列的末尾。&LT/li>\n&LTli>重复第二步，直到所有元素均排序完毕。&LT/li>\n&LT/ol>\n&LTh3 id=\"dai-ma-1\">代码&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">selection_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> n&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range &LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>,n):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">min &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>i\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>j &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(i&LT/span>&LTspan style=\"color:#f92672;\">+&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>,n):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j]&LT/span>&LTspan style=\"color:#f92672;\">&amplt;&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#66d9ef;\">min&LT/span>&LTspan>]:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">min&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan>j\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#66d9ef;\">min&LT/span>&LTspan>],&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[i]&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[i],&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#66d9ef;\">min&LT/span>&LTspan>]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"cha-ru-pai-xu\">插入排序&LT/h2>\n&LTh3 id=\"yuan-li-2\">原理&LT/h3>\n&LTp>插入排序（Insertion Sort）是一种简单直观的排序算法。它的工作原理是通过构建有序序列，对于未排序数据，在已排序序列中从后向前扫描，找到相应位置并插入。&LT/p>\n&LTh3 id=\"bu-zou-2\">步骤&LT/h3>\n&LTol>\n&LTli>从第一个元素开始，该元素可以认为已经被排序&LT/li>\n&LTli>取出下一个元素，在已经排序的元素序列中从后向前扫描&LT/li>\n&LTli>如果该元素（已排序）大于新元素，将该元素移到下一位置&LT/li>\n&LTli>重复步骤3，直到找到已排序的元素小于或者等于新元素的位置&LT/li>\n&LTli>将新元素插入到该位置后&LT/li>\n&LTli>重复步骤2~5&LT/li>\n&LT/ol>\n&LTh3 id=\"dai-ma-2\">代码&LT/h3>\n&LTpre data-lang=\"Python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-Python \">&LTcode class=\"language-Python\" data-lang=\"Python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">insert_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> n &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>, n):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 后一个元素和前一个元素比较\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 如果比前一个小\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[i] &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[i &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 将这个数取出\n&LT/span>&LTspan> temp &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[i]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 保存下标\n&LT/span>&LTspan> index &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>i\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 从后往前依次比较每个元素\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>j &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(i &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 和比取出元素大的元素交换\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j] &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan>temp:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j]\n&LT/span>&LTspan> index &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>j\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">break\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 插入元素\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[index] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>temp\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"xi-er-pai-xu\">希尔排序&LT/h2>\n&LTh3 id=\"yuan-li-3\">原理&LT/h3>\n&LTp>希尔排序，也称递减增量排序算法，是插入排序的一种更高效的改进版本。希尔排序是非稳定排序算法。\n希尔排序是基于插入排序的以下两点性质而提出改进方法的：\n插入排序在对几乎已经排好序的数据操作时，效率高，即可以达到线性排序的效率\n但插入排序一般来说是低效的，因为插入排序每次只能将数据移动一位。&LT/p>\n&LTh3 id=\"bu-zou-3\">步骤&LT/h3>\n&LTp>每次以一定步长(就是跳过等距的数)进行排序，直至步长为1.&LT/p>\n&LTh3 id=\"dai-ma-3\">代码&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">shell_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> n &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 初始步长\n&LT/span>&LTspan> gap &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">round&LT/span>&LTspan>(n &LT/span>&LTspan style=\"color:#f92672;\">/ &LT/span>&LTspan style=\"color:#ae81ff;\">2&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>gap &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(gap, n):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 每个步长进行插入排序\n&LT/span>&LTspan> temp &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[i]\n&LT/span>&LTspan> j &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>i\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 插入排序\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>j &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;= &LT/span>&LTspan>gap &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>gap] &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan>temp:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan>gap]\n&LT/span>&LTspan> j &LT/span>&LTspan style=\"color:#f92672;\">-= &LT/span>&LTspan>gap\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[j] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>temp\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 得到新的步长\n&LT/span>&LTspan> gap &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">round&LT/span>&LTspan>(gap &LT/span>&LTspan style=\"color:#f92672;\">/ &LT/span>&LTspan style=\"color:#ae81ff;\">2&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LT/code>&LT/pre>\n&LTblockquote>\n&LTp>步长使用的是Donald Shell的建议，另外步长还可以使用Sedgewick提出的(1, 5, 19, 41, 109,...)，该序列的项来自 {\\displaystyle 9\\times 4^{i}-9\\times 2^{i}+1} 9\\times 4^{i}-9\\times 2^{i}+1和 {\\displaystyle 2^{i+2}\\times (2^{i+2}-3)+1} 2^{{i+2}}\\times (2^{{i+2}}-3)+1这两个算式。\n也可以使用&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97\">斐波那契数列&LT/a>除去0和1将剩余的数以黄金分区比的两倍的幂进行运算得到的数列。&LT/p>\n&LT/blockquote>\n&LTh2 id=\"gui-bing-pai-xu\">归并排序&LT/h2>\n&LTh3 id=\"yuan-li-4\">原理&LT/h3>\n&LTp>归并操作(归并算法)，指的是将两个已经排序的序列合并成一个序列的操作。归并排序算法依赖归并操作。&LT/p>\n&LTh3 id=\"bu-zou-4\">步骤&LT/h3>\n&LTh4 id=\"die-dai-fa\">迭代法&LT/h4>\n&LTol>\n&LTli>申请空间，使其大小为两个已经排序序列之和，该空间用来存放合并后的序列&LT/li>\n&LTli>设定两个指针，最初位置分别为两个已经排序序列的起始位置&LT/li>\n&LTli>比较两个指针所指向的元素，选择相对小的元素放入到合并空间，并移动指针到下一位置&LT/li>\n&LTli>重复步骤3直到某一指针到达序列尾&LT/li>\n&LTli>将另一序列剩下的所有元素直接复制到合并序列尾&LT/li>\n&LT/ol>\n&LTh4 id=\"di-gui-fa\">递归法&LT/h4>\n&LTp>假设序列共有n个元素：&LT/p>\n&LTol>\n&LTli>将序列每相邻两个数字进行归并操作，形成 {\\displaystyle floor(n/2)} floor(n/2)个序列，排序后每个序列包含两个元素&LT/li>\n&LTli>将上述序列再次归并，形成 {\\displaystyle floor(n/4)} floor(n/4)个序列，每个序列包含四个元素&LT/li>\n&LTli>重复步骤2，直到所有元素排序完毕&LT/li>\n&LT/ol>\n&LTh3 id=\"dai-ma-4\">代码&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"color:#75715e;\"># 递归法\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">merge_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 认为长度不大于1的数列是有序的\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">&amplt;= &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 二分列表\n&LT/span>&LTspan> middle &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">// &LT/span>&LTspan style=\"color:#ae81ff;\">2\n&LT/span>&LTspan> left &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>merge_sort(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[:middle])\n&LT/span>&LTspan> right &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>merge_sort(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[middle:])\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 最后一次合并\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>merge(left, right)\n&LT/span>&LTspan style=\"color:#75715e;\"># 合并\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">merge&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">left&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">right&LT/span>&LTspan>):\n&LT/span>&LTspan> l,r&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>,&LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> result&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>l&LT/span>&LTspan style=\"color:#f92672;\">&amplt;&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(left) &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>r&LT/span>&LTspan style=\"color:#f92672;\">&amplt;&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(right):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>left[l] &LT/span>&LTspan style=\"color:#f92672;\">&amplt;&LT/span>&LTspan>right[r]:\n&LT/span>&LTspan> result.append(left[l])\n&LT/span>&LTspan> l&LT/span>&LTspan style=\"color:#f92672;\">+=&LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> result.append(right[r])\n&LT/span>&LTspan> r &LT/span>&LTspan style=\"color:#f92672;\">+=&LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> reslut &LT/span>&LTspan style=\"color:#f92672;\">+=&LT/span>&LTspan>left[l:]\n&LT/span>&LTspan> result&LT/span>&LTspan style=\"color:#f92672;\">+=&LT/span>&LTspan>right[r:] \n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>result\n&LT/span>&LT/code>&LT/pre>\n&LTp>鄙人不才，不知归并排序的迭代法如何用Python实现，望指教。&LT/p>\n&LTh2 id=\"kuai-su-pai-xu\">快速排序&LT/h2>\n&LTh3 id=\"yuan-li-5\">原理&LT/h3>\n&LTp>快速排序使用分治法（Divide and conquer）策略来把一个序列（list）分为两个子序列（sub-lists）。&LT/p>\n&LTh3 id=\"bu-zou-5\">步骤&LT/h3>\n&LTol>\n&LTli>从数列中挑出一个元素，称为&ampquot;基准&ampquot;（pivot），&LT/li>\n&LTli>重新排序数列，所有元素比基准值小的摆放在基准前面，所有元素比基准值大的摆在基准的后面（相同的数可以到任一边）。在这个分区结束之后，该基准就处于数列的中间位置。这个称为分区（partition）操作。&LT/li>\n&LTli>递归地（recursive）把小于基准值元素的子数列和大于基准值元素的子数列排序。&LT/li>\n&LT/ol>\n&LTh3 id=\"dai-ma-5\">代码&LT/h3>\n&LTp>普通版&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">quick_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> less &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> pivotList &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> more &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 递归出口\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">&amplt;= &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 将第一个值做为基准\n&LT/span>&LTspan> pivot &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 将比急转小的值放到less数列\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan>pivot:\n&LT/span>&LTspan> less.append(i)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 将比基准打的值放到more数列\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">elif &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan>pivot:\n&LT/span>&LTspan> more.append(i)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 将和基准相同的值保存在基准数列\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> pivotList.append(i)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 对less数列和more数列继续进行排序\n&LT/span>&LTspan> less &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>quick_sort(less)\n&LT/span>&LTspan> more &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>quick_sort(more)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>less &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan>pivotList &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan>more\n&LT/span>&LT/code>&LT/pre>\n&LTp>咳咳，下面这段代码出自《Python cookbook 第二版》传说中的三行实现python快速排序。&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">qsort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">arr&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(arr) &LT/span>&LTspan style=\"color:#f92672;\">&amplt;= &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>arr\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> pivot &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>arr[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>qsort([x &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>arr[&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:] &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan>pivot]) &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan>\\\n&LT/span>&LTspan> [pivot] &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan>\\\n&LT/span>&LTspan> qsort([x &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>arr[&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:] &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;= &LT/span>&LTspan>pivot])\n&LT/span>&LT/code>&LT/pre>\n&LTp>当然还有一行语法糖版本:&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan>qs &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">lambda &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">xs &LT/span>&LTspan>: ( (&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(xs) &LT/span>&LTspan style=\"color:#f92672;\">&amplt;= &LT/span>&LTspan style=\"color:#ae81ff;\">1 &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>[xs]) &LT/span>&LTspan style=\"color:#f92672;\">or &LT/span>&LTspan>[ qs( [x &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>xs[&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:] &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan>xs[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]] ) &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan>[xs[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]] &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan>qs( [x &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan>xs[&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>:] &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;= &LT/span>&LTspan>xs[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]] ) ] )[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]\n&LT/span>&LT/code>&LT/pre>\n&LTp>是不是感受到了Python的魅力？&LT/p>\n&LTh2 id=\"dui-pai-xu\">堆排序&LT/h2>\n&LTh3 id=\"yuan-li-6\">原理&LT/h3>\n&LTp>堆排序（Heapsort）是指利用堆这种数据结构所设计的一种排序算法。堆积是一个近似完全二叉树的结构，并同时满足堆积的性质：即子结点的键值或索引总是小于（或者大于）它的父节点。&LT/p>\n&LTh3 id=\"bu-zou-6\">步骤&LT/h3>\n&LTol>\n&LTli>创建最大堆:将堆所有数据重新排序，使其成为最大堆&LT/li>\n&LTli>最大堆调整:作用是保持最大堆的性质，是创建最大堆的核心子程序&LT/li>\n&LTli>堆排序:移除位在第一个数据的根节点，并做最大堆调整的递归运算&LT/li>\n&LT/ol>\n&LTh3 id=\"dai-ma-6\">代码&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">heap_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 创建最大堆\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>start &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>((&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">2&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">// &LT/span>&LTspan style=\"color:#ae81ff;\">2&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>):\n&LT/span>&LTspan> sift_down(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>, start, &LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>)\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 堆排序\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>end &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">len&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>) &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#f92672;\">-&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>], &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[end] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[end], &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>]\n&LT/span>&LTspan> sift_down(&LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>, &LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>, end &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"color:#75715e;\"># 最大堆调整\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">sift_down&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">lst&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">start&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">end&LT/span>&LTspan>):\n&LT/span>&LTspan> root &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>start\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan style=\"color:#ae81ff;\">True&LT/span>&LTspan>:\n&LT/span>&LTspan> child &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">2 &LT/span>&LTspan style=\"color:#f92672;\">* &LT/span>&LTspan>root &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>child &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan>end:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">break\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>child &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#ae81ff;\">1 &LT/span>&LTspan style=\"color:#f92672;\">&amplt;= &LT/span>&LTspan>end &LT/span>&LTspan style=\"color:#f92672;\">and &LT/span>&LTspan>lst[child] &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan>lst[child &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>]:\n&LT/span>&LTspan> child &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>lst[root] &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan>lst[child]:\n&LT/span>&LTspan> lst[root], lst[child] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>lst[child], lst[root]\n&LT/span>&LTspan> root &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>child\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">break\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"ji-shu-pai-xu\">计数排序&LT/h2>\n&LTh3 id=\"yuan-li-7\">原理&LT/h3>\n&LTp>当输入的元素是n个0到k之间的整数时，它的运行时间是Θ(n + k)。计数排序不是比较排序，排序的速度快于任何比较排序算法。&LT/p>\n&LTp>由于用来计数的数组C的长度取决于待排序数组中数据的范围（等于待排序数组的最大值与最小值的差加上1），这使得计数排序对于数据范围很大的数组，需要大量时间和内存。例如：计数排序是用来排序0到100之间的数字的最好的算法，但是它不适合按字母顺序排序人名。但是，计数排序可以用在基数排序算法中，能够更有效的排序数据范围很大的数组。&LT/p>\n&LTh3 id=\"bu-zou-7\">步骤&LT/h3>\n&LTol>\n&LTli>找出待排序的数组中最大和最小的元素&LT/li>\n&LTli>统计数组中每个值为i的元素出现的次数，存入数组 C 的第 i 项&LT/li>\n&LTli>对所有的计数累加（从C中的第一个元素开始，每一项和前一项相加）&LT/li>\n&LTli>反向填充目标数组：将每个元素i放在新数组的第C(i)项，每放一个元素就将C(i)减去1&LT/li>\n&LT/ol>\n&LTh3 id=\"dai-ma-7\">代码&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">count_sort&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">list&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">min &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">2147483647\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">max &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 取得最大值和最小值\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan style=\"color:#66d9ef;\">min&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">min &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>x\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>x &LT/span>&LTspan style=\"color:#f92672;\">&ampgt; &LT/span>&LTspan style=\"color:#66d9ef;\">max&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">max &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>x\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 创建数组C\n&LT/span>&LTspan> count &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>[&LT/span>&LTspan style=\"color:#ae81ff;\">0&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">* &LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">max &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#66d9ef;\">min &LT/span>&LTspan style=\"color:#f92672;\">+&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>index &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>:\n&LT/span>&LTspan> count[index &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#66d9ef;\">min&LT/span>&LTspan>] &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> index &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 填值\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>a &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#66d9ef;\">max &LT/span>&LTspan style=\"color:#f92672;\">- &LT/span>&LTspan style=\"color:#66d9ef;\">min&LT/span>&LTspan style=\"color:#f92672;\">+&LT/span>&LTspan style=\"color:#ae81ff;\">1&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">for &LT/span>&LTspan>c &LT/span>&LTspan style=\"color:#f92672;\">in &LT/span>&LTspan style=\"color:#66d9ef;\">range&LT/span>&LTspan>(count[a]):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>[index] &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>a &LT/span>&LTspan style=\"color:#f92672;\">+ &LT/span>&LTspan style=\"color:#66d9ef;\">min\n&LT/span>&LTspan> index &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">list\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"di-jiu-chong-pai-xu\">第九种排序&LT/h2>\n&LTp>None？\n当然不会\n自然就是系统自带的&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#66d9ef;\">list&LT/span>&LTspan>.sort()\n&LT/span>&LT/code>&LT/pre>\n&LTp>以上所有源代码均在&LTa rel=\"nofollow\" href=\"https://github.com/EINDEX/Python-algorithm\">Github共享&LT/a>希望与大家共同进步!&LT/p>\n&LThr />\n&LTh2 id=\"can-kao-zi-liao\">参考资料&LT/h2>\n&LTul>\n&LTli>维基百科: &LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F\">冒泡排序&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F\">选择排序&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F\">插入排序&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F\">希尔排序&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F\">归并排序&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F#.E5.8E.9F.E5.9C.B0.EF.BC.88in-place.EF.BC.89.E5.88.86.E5.89.B2.E7.9A.84.E7.89.88.E6.9C.AC\">快速排序&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E5%A0%86%E6%8E%92%E5%BA%8F\">堆排序&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E8%AE%A1%E6%95%B0%E6%8E%92%E5%BA%8F\">计数排序&LT/a>&LT/li>\n&LTli>&LTa rel=\"nofollow\" href=\"http://python3-cookbook.readthedocs.io/zh_CN/latest/\">Python Cookbook&LT/a>&LT/li>\n&LT/ul>\n&LTh2 id=\"gan-xie\">感谢&LT/h2>\n&LTp>知乎用户:&LTa rel=\"nofollow\" href=\"https://www.zhihu.com/people/ding-yi-xing\">dhx1793516813&LT/a>、&LTa rel=\"nofollow\" href=\"https://www.zhihu.com/people/cai-hao-lun-58\">左鸢&LT/a>、&LTa rel=\"nofollow\" href=\"https://www.zhihu.com/people/ling-jian-94\">灵剑&LT/a>\n为本文缺漏之处提出建议&LT/p>\n","permalink":"https://eindex.me/cn/posts/sort-in-python/","slug":"sort-in-python","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"基本排序算法的Python实现","description":null,"updated":null,"date":"2017-10-05T14:34:54+08:00","year":2017,"month":10,"day":5,"taxonomies":{"tags":["Python","Sort"]},"extra":{},"path":"/cn/posts/sort-in-python/","components":["cn","posts","sort-in-python"],"summary":"&LTp>本篇主要实现九(八）大排序算法，分别是冒泡排序，插入排序，选择排序，希尔排序，归并排序，快速排序，堆排序,计数排序。希望大家回顾知识的时候也能从我的这篇文章得到帮助。&LT/p>\n","toc":[{"level":2,"id":"mou-pao-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#mou-pao-pai-xu","title":"冒泡排序","children":[{"level":3,"id":"yuan-li","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li","title":"原理","children":[]},{"level":3,"id":"bu-zou","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou","title":"步骤","children":[]},{"level":3,"id":"dai-ma","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma","title":"代码","children":[]}]},{"level":2,"id":"xuan-ze-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#xuan-ze-pai-xu","title":"选择排序","children":[{"level":3,"id":"yuan-li-1","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li-1","title":"原理","children":[]},{"level":3,"id":"bu-zou-1","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou-1","title":"步骤","children":[]},{"level":3,"id":"dai-ma-1","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma-1","title":"代码","children":[]}]},{"level":2,"id":"cha-ru-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#cha-ru-pai-xu","title":"插入排序","children":[{"level":3,"id":"yuan-li-2","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li-2","title":"原理","children":[]},{"level":3,"id":"bu-zou-2","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou-2","title":"步骤","children":[]},{"level":3,"id":"dai-ma-2","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma-2","title":"代码","children":[]}]},{"level":2,"id":"xi-er-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#xi-er-pai-xu","title":"希尔排序","children":[{"level":3,"id":"yuan-li-3","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li-3","title":"原理","children":[]},{"level":3,"id":"bu-zou-3","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou-3","title":"步骤","children":[]},{"level":3,"id":"dai-ma-3","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma-3","title":"代码","children":[]}]},{"level":2,"id":"gui-bing-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#gui-bing-pai-xu","title":"归并排序","children":[{"level":3,"id":"yuan-li-4","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li-4","title":"原理","children":[]},{"level":3,"id":"bu-zou-4","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou-4","title":"步骤","children":[{"level":4,"id":"die-dai-fa","permalink":"https://eindex.me/cn/posts/sort-in-python/#die-dai-fa","title":"迭代法","children":[]},{"level":4,"id":"di-gui-fa","permalink":"https://eindex.me/cn/posts/sort-in-python/#di-gui-fa","title":"递归法","children":[]}]},{"level":3,"id":"dai-ma-4","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma-4","title":"代码","children":[]}]},{"level":2,"id":"kuai-su-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#kuai-su-pai-xu","title":"快速排序","children":[{"level":3,"id":"yuan-li-5","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li-5","title":"原理","children":[]},{"level":3,"id":"bu-zou-5","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou-5","title":"步骤","children":[]},{"level":3,"id":"dai-ma-5","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma-5","title":"代码","children":[]}]},{"level":2,"id":"dui-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#dui-pai-xu","title":"堆排序","children":[{"level":3,"id":"yuan-li-6","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li-6","title":"原理","children":[]},{"level":3,"id":"bu-zou-6","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou-6","title":"步骤","children":[]},{"level":3,"id":"dai-ma-6","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma-6","title":"代码","children":[]}]},{"level":2,"id":"ji-shu-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#ji-shu-pai-xu","title":"计数排序","children":[{"level":3,"id":"yuan-li-7","permalink":"https://eindex.me/cn/posts/sort-in-python/#yuan-li-7","title":"原理","children":[]},{"level":3,"id":"bu-zou-7","permalink":"https://eindex.me/cn/posts/sort-in-python/#bu-zou-7","title":"步骤","children":[]},{"level":3,"id":"dai-ma-7","permalink":"https://eindex.me/cn/posts/sort-in-python/#dai-ma-7","title":"代码","children":[]}]},{"level":2,"id":"di-jiu-chong-pai-xu","permalink":"https://eindex.me/cn/posts/sort-in-python/#di-jiu-chong-pai-xu","title":"第九种排序","children":[]},{"level":2,"id":"can-kao-zi-liao","permalink":"https://eindex.me/cn/posts/sort-in-python/#can-kao-zi-liao","title":"参考资料","children":[]},{"level":2,"id":"gan-xie","permalink":"https://eindex.me/cn/posts/sort-in-python/#gan-xie","title":"感谢","children":[]}],"word_count":3119,"reading_time":16,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/sort-in-python/","title":"基本排序算法的Python实现","path":"/home/runner/work/blog/blog/content/posts/sort-in-python.cn.md"}],"backlinks":[]},"higher":{"relative_path":"posts/liner-in-python.cn.md","content":"&LTp>本篇主要实现四种数据结构，分别是数组、堆栈、队列、链表。我不知道我为什么要用Python来干C干的事情，总之Python就是可以干。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>\n&LTp>&LTstrong>所有概念性内容可以在参考资料中找到出处&LT/strong>&LT/p>\n&LTh2 id=\"shu-zu\">数组&LT/h2>\n&LTh3 id=\"shu-zu-de-she-ji\">数组的设计&LT/h3>\n&LTp>数组设计之初是在形式上依赖内存分配而成的，所以必须在使用前预先请求空间。这使得数组有以下特性：&LT/p>\n&LTol>\n&LTli>请求空间以后大小固定，不能再改变（数据溢出问题）；&LT/li>\n&LTli>在内存中有空间连续性的表现，中间不会存在其他程序需要调用的数据，为此数组的专用内存空间；&LT/li>\n&LTli>在旧式编程语言中（如有中阶语言之称的C），程序不会对数组的操作做下界判断，也就有潜在的越界操作的风险（比如会把数据写在运行中程序需要调用的核心部分的内存上）。&LT/li>\n&LT/ol>\n&LTp>因为简单数组强烈倚赖电脑硬件之内存，所以不适用于现代的程序设计。欲使用可变大小、硬件无关性的数据类型，Java等程序设计语言均提供了更高级的数据结构：ArrayList、Vector等动态数组。&LT/p>\n&LTh3 id=\"pythonde-shu-zu\">Python的数组&LT/h3>\n&LTp>从严格意义上来说:Python里没有严格意义上的数组。\n&LTcode>List&LT/code>可以说是Python里的数组，下面这段代码是CPython的实现&LTcode>List&LT/code>的结构体:&LT/p>\n&LTpre data-lang=\"c\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-c \">&LTcode class=\"language-c\" data-lang=\"c\">&LTspan style=\"font-style:italic;color:#66d9ef;\">typedef struct &LT/span>&LTspan>{\n&LT/span>&LTspan> PyObject_VAR_HEAD\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">/* Vector of pointers to list elements. list[0] is ob_item[0], etc. */\n&LT/span>&LTspan> PyObject &LT/span>&LTspan style=\"color:#f92672;\">**&LT/span>&LTspan>ob_item;\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">/* ob_item contains space for &amp#39;allocated&amp#39; elements. The number\n&LT/span>&LTspan style=\"color:#75715e;\"> * currently in use is ob_size.\n&LT/span>&LTspan style=\"color:#75715e;\"> * Invariants:\n&LT/span>&LTspan style=\"color:#75715e;\"> * 0 &amplt;= ob_size &amplt;= allocated\n&LT/span>&LTspan style=\"color:#75715e;\"> * len(list) == ob_size\n&LT/span>&LTspan style=\"color:#75715e;\"> * ob_item == NULL implies ob_size == allocated == 0\n&LT/span>&LTspan style=\"color:#75715e;\"> * list.sort() temporarily sets allocated to -1 to detect mutations.\n&LT/span>&LTspan style=\"color:#75715e;\"> *\n&LT/span>&LTspan style=\"color:#75715e;\"> * Items must normally not be NULL, except during construction when\n&LT/span>&LTspan style=\"color:#75715e;\"> * the list is not yet visible outside the function that builds it.\n&LT/span>&LTspan style=\"color:#75715e;\"> */\n&LT/span>&LTspan> Py_ssize_t allocated;\n&LT/span>&LTspan>} PyListObject;\n&LT/span>&LT/code>&LT/pre>\n&LTp>取自&LTa rel=\"nofollow\" href=\"https://github.com/python/cpython/blob/f24143b25e4f83368ff6182bebe14f885073015c/Include/listobject.h\">CPython-Github&LT/a>&LT/p>\n&LTp>还有一篇文章讲&LTa rel=\"nofollow\" href=\"http://www.laurentluce.com/posts/python-list-implementation/\">&LTcode>List&LT/code>实现&LT/a>,感兴趣的朋友可以去看看。&LTa rel=\"nofollow\" href=\"http://python.jobbole.com/82549/\">中文版&LT/a>。&LT/p>\n&LTp>当然，在Python里它就是数组。\n后面的一些结构也将用&LTcode>List&LT/code>来实现。&LT/p>\n&LTh2 id=\"dui-zhan\">堆栈&LT/h2>\n&LTh3 id=\"shi-yao-shi-dui-zhan\">什么是堆栈&LT/h3>\n&LTp>堆栈（英语：stack），也可直接称栈，在计算机科学中，是一种特殊的串列形式的数据结构，它的特殊之处在于只能允许在链接串列或阵列的一端（称为堆叠顶端指标，英语：top）进行加入资料（英语：push）和输出资料（英语：pop）的运算。另外堆叠也可以用一维阵列或连结串列的形式来完成。堆叠的另外一个相对的操作方式称为伫列。&LT/p>\n&LTp>由于堆叠数据结构只允许在一端进行操作，因而按照后进先出（LIFO, Last In First Out）的原理运作。&LT/p>\n&LTh3 id=\"te-dian\">特点&LT/h3>\n&LTul>\n&LTli>先入后出，后入先出。&LT/li>\n&LTli>除头尾节点之外，每个元素有一个前驱，一个后继。&LT/li>\n&LT/ul>\n&LTh3 id=\"cao-zuo\">操作&LT/h3>\n&LTp>从原理可知，对堆栈(栈)可以进行的操作有:&LT/p>\n&LTul>\n&LTli>top():获取堆栈顶端对象&LT/li>\n&LTli>push():向栈里添加一个对象&LT/li>\n&LTli>pop():从栈里推出一个对象&LT/li>\n&LT/ul>\n&LTh3 id=\"shi-xian\">实现&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">class &LT/span>&LTspan style=\"text-decoration:underline;color:#a6e22e;\">my_stack&LT/span>&LTspan>(&LT/span>&LTspan style=\"text-decoration:underline;font-style:italic;color:#a6e22e;\">object&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__init__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">value&LT/span>&LTspan>):\n&LT/span>&LTspan> self.value &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>value\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 前驱\n&LT/span>&LTspan> self.before &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 后继\n&LT/span>&LTspan> self.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__str__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">str&LT/span>&LTspan>(self.value)\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">top&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">stack&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(stack, my_stack):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>stack.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>top(stack.behind)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>stack\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">push&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">stack&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">ele&LT/span>&LTspan>):\n&LT/span>&LTspan> push_ele &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>my_stack(ele)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(stack, my_stack):\n&LT/span>&LTspan> stack_top &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>top(stack)\n&LT/span>&LTspan> push_ele.before &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack_top\n&LT/span>&LTspan> push_ele.before.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>push_ele\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">raise &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">Exception&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;不要乱扔东西进来好么&amp#39;&LT/span>&LTspan>)\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">pop&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">stack&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(stack, my_stack):\n&LT/span>&LTspan> stack_top &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>top(stack)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>stack_top.before &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> stack_top.before.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> stack_top.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>stack_top\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">print&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;已经是栈顶了&amp#39;&LT/span>&LTspan>)\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"dui-lie\">队列&LT/h2>\n&LTh3 id=\"shi-yao-shi-dui-lie\">什么是队列&LT/h3>\n&LTp>和堆栈类似，唯一的区别是队列只能在队头进行出队操作，所以队列是是先进先出（FIFO, First-In-First-Out）的线性表&LT/p>\n&LTh3 id=\"te-dian-1\">特点&LT/h3>\n&LTul>\n&LTli>先入先出,后入后出&LT/li>\n&LTli>除尾节点外,每个节点有一个后继&LT/li>\n&LTli>（可选）除头节点外,每个节点有一个前驱&LT/li>\n&LT/ul>\n&LTh3 id=\"cao-zuo-1\">操作&LT/h3>\n&LTul>\n&LTli>push（）:入队&LT/li>\n&LTli>pop（）：出队&LT/li>\n&LT/ul>\n&LTh3 id=\"shi-xian-1\">实现&LT/h3>\n&LTh4 id=\"pu-tong-dui-lie\">普通队列&LT/h4>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">class &LT/span>&LTspan style=\"text-decoration:underline;color:#a6e22e;\">MyQueue&LT/span>&LTspan>():\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__init__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">value&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>):\n&LT/span>&LTspan> self.value &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>value\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 前驱\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># self.before = None\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 后继\n&LT/span>&LTspan> self.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__str__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>self.value &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">str&LT/span>&LTspan>(self.value)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;None&amp#39;\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">create_queue&LT/span>&LTspan>():\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;仅有队头&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>MyQueue()\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">last&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">queue&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(queue, MyQueue):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>queue.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>last(queue.behind)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>queue\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">push&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">queue&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">ele&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(queue, MyQueue):\n&LT/span>&LTspan> last_queue &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>last(queue)\n&LT/span>&LTspan> new_queue &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>MyQueue(ele)\n&LT/span>&LTspan> last_queue.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>new_queue\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">pop&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">queue&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>queue.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> get_queue &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>queue.behind\n&LT/span>&LTspan> queue.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>queue.behind.behind\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>get_queue\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">print&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;队列里已经没有元素了&amp#39;&LT/span>&LTspan>)\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">print_queue&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">queue&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">print&LT/span>&LTspan>(queue)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>queue.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> print_queue(queue.behind)\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"lian-biao\">链表&LT/h2>\n&LTh3 id=\"shi-yao-shi-lian-biao\">什么是链表&LT/h3>\n&LTp>链表（Linked list）是一种常见的基础数据结构，是一种线性表，但是并不会按线性的顺序存储数据，而是在每一个节点里存到下一个节点的指针(Pointer)。由于不必须按顺序存储，链表在插入的时候可以达到O(1)的复杂度，比另一种线性表顺序表快得多，但是查找一个节点或者访问特定编号的节点则需要O(n)的时间，而顺序表相应的时间复杂度分别是O(logn)和O(1)。&LT/p>\n&LTh3 id=\"te-dian-2\">特点&LT/h3>\n&LTp>使用链表结构可以克服数组链表需要预先知道数据大小的缺点，链表结构可以充分利用计算机内存空间，实现灵活的内存动态管理。但是链表失去了数组随机读取的优点，同时链表由于增加了结点的指针域，空间开销比较大。&LT/p>\n&LTh3 id=\"cao-zuo-2\">操作&LT/h3>\n&LTul>\n&LTli>init():初始化&LT/li>\n&LTli>insert(): 插入&LT/li>\n&LTli>trave(): 遍历&LT/li>\n&LTli>delete(): 删除&LT/li>\n&LTli>find(): 查找&LT/li>\n&LT/ul>\n&LTh3 id=\"shi-xian-2\">实现&LT/h3>\n&LTp>此处仅实现双向列表&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">class &LT/span>&LTspan style=\"text-decoration:underline;color:#a6e22e;\">LinkedList&LT/span>&LTspan>():\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__init__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">value&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>):\n&LT/span>&LTspan> self.value &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>value\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 前驱\n&LT/span>&LTspan> self.before &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 后继\n&LT/span>&LTspan> self.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__str__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>self.value &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">str&LT/span>&LTspan>(self.value)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;None&amp#39;\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">init&LT/span>&LTspan>():\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>LinkedList(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;HEAD&amp#39;&LT/span>&LTspan>)\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">delete&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">linked_list&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(linked_list, LinkedList):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> delete(linked_list.behind)\n&LT/span>&LTspan> linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> linked_list.before &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> linked_list.value &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">insert&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">linked_list&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">index&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">node&LT/span>&LTspan>):\n&LT/span>&LTspan> node &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>LinkedList(node)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(linked_list, LinkedList):\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan>index:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">break\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> linked_list &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>linked_list.behind\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> node.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>linked_list.behind\n&LT/span>&LTspan> linked_list.behind.before &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>node\n&LT/span>&LTspan> node.before, linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>linked_list, node\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">remove&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">linked_list&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">index&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(linked_list, LinkedList):\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan>index:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">break\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> linked_list &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>linked_list.behind\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> linked_list.behind.before &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>linked_list.before\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>linked_list.before &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> linked_list.before.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>linked_list.behind\n&LT/span>&LTspan> linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> linked_list.before &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> linked_list.value &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">trave&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">linked_list&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(linked_list, LinkedList):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">print&LT/span>&LTspan>(linked_list)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> trave(linked_list.behind)\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">find&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">linked_list&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">index&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(linked_list, LinkedList):\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan>index:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>linked_list\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> linked_list &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>linked_list.behind\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan>index:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">raise &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">Exception&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#ae81ff;\">404&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>linked_list\n&LT/span>&LT/code>&LT/pre>\n&LTp>以上所有源代码均在&LTa rel=\"nofollow\" href=\"https://github.com/EINDEX/Python-algorithm\">Github&LT/a>共享，欢迎提出issue或PR，希望与大家共同进步!&LT/p>\n&LThr />\n&LTh2 id=\"can-kao-zi-liao\">参考资料&LT/h2>\n&LTp>Wiki百科: &LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84\">数据结构&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E6%95%B0%E7%BB%84\">数组&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E9%98%9F%E5%88%97\">队列&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E9%93%BE%E8%A1%A8#.E5.88.9D.E5.A7.8B.E5.8C.96.E5.92.8C.E9.94.80.E6.AF.81\">链表&LT/a>&LT/p>\n","permalink":"https://eindex.me/cn/posts/liner-in-python/","slug":"liner-in-python","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"基本线性数据结构的Python实现","description":null,"updated":null,"date":"2017-10-05T14:33:39+08:00","year":2017,"month":10,"day":5,"taxonomies":{"tags":["Python","Data structure","Linear"],"series":["algorithm"]},"extra":{},"path":"/cn/posts/liner-in-python/","components":["cn","posts","liner-in-python"],"summary":"&LTp>本篇主要实现四种数据结构，分别是数组、堆栈、队列、链表。我不知道我为什么要用Python来干C干的事情，总之Python就是可以干。&LT/p>\n","toc":[{"level":2,"id":"shu-zu","permalink":"https://eindex.me/cn/posts/liner-in-python/#shu-zu","title":"数组","children":[{"level":3,"id":"shu-zu-de-she-ji","permalink":"https://eindex.me/cn/posts/liner-in-python/#shu-zu-de-she-ji","title":"数组的设计","children":[]},{"level":3,"id":"pythonde-shu-zu","permalink":"https://eindex.me/cn/posts/liner-in-python/#pythonde-shu-zu","title":"Python的数组","children":[]}]},{"level":2,"id":"dui-zhan","permalink":"https://eindex.me/cn/posts/liner-in-python/#dui-zhan","title":"堆栈","children":[{"level":3,"id":"shi-yao-shi-dui-zhan","permalink":"https://eindex.me/cn/posts/liner-in-python/#shi-yao-shi-dui-zhan","title":"什么是堆栈","children":[]},{"level":3,"id":"te-dian","permalink":"https://eindex.me/cn/posts/liner-in-python/#te-dian","title":"特点","children":[]},{"level":3,"id":"cao-zuo","permalink":"https://eindex.me/cn/posts/liner-in-python/#cao-zuo","title":"操作","children":[]},{"level":3,"id":"shi-xian","permalink":"https://eindex.me/cn/posts/liner-in-python/#shi-xian","title":"实现","children":[]}]},{"level":2,"id":"dui-lie","permalink":"https://eindex.me/cn/posts/liner-in-python/#dui-lie","title":"队列","children":[{"level":3,"id":"shi-yao-shi-dui-lie","permalink":"https://eindex.me/cn/posts/liner-in-python/#shi-yao-shi-dui-lie","title":"什么是队列","children":[]},{"level":3,"id":"te-dian-1","permalink":"https://eindex.me/cn/posts/liner-in-python/#te-dian-1","title":"特点","children":[]},{"level":3,"id":"cao-zuo-1","permalink":"https://eindex.me/cn/posts/liner-in-python/#cao-zuo-1","title":"操作","children":[]},{"level":3,"id":"shi-xian-1","permalink":"https://eindex.me/cn/posts/liner-in-python/#shi-xian-1","title":"实现","children":[{"level":4,"id":"pu-tong-dui-lie","permalink":"https://eindex.me/cn/posts/liner-in-python/#pu-tong-dui-lie","title":"普通队列","children":[]}]}]},{"level":2,"id":"lian-biao","permalink":"https://eindex.me/cn/posts/liner-in-python/#lian-biao","title":"链表","children":[{"level":3,"id":"shi-yao-shi-lian-biao","permalink":"https://eindex.me/cn/posts/liner-in-python/#shi-yao-shi-lian-biao","title":"什么是链表","children":[]},{"level":3,"id":"te-dian-2","permalink":"https://eindex.me/cn/posts/liner-in-python/#te-dian-2","title":"特点","children":[]},{"level":3,"id":"cao-zuo-2","permalink":"https://eindex.me/cn/posts/liner-in-python/#cao-zuo-2","title":"操作","children":[]},{"level":3,"id":"shi-xian-2","permalink":"https://eindex.me/cn/posts/liner-in-python/#shi-xian-2","title":"实现","children":[]}]},{"level":2,"id":"can-kao-zi-liao","permalink":"https://eindex.me/cn/posts/liner-in-python/#can-kao-zi-liao","title":"参考资料","children":[]}],"word_count":1661,"reading_time":9,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/liner-in-python/","title":"基本线性数据结构的Python实现","path":"/home/runner/work/blog/blog/content/posts/liner-in-python.cn.md"}],"backlinks":[]},"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/thoughtworks-one-month/","title":"Thoughtworks 一月","path":"/home/runner/work/blog/blog/content/posts/thoughtworks-one-month.cn.md"}],"backlinks":[]},{"relative_path":"posts/liner-in-python.cn.md","content":"&LTp>本篇主要实现四种数据结构，分别是数组、堆栈、队列、链表。我不知道我为什么要用Python来干C干的事情，总之Python就是可以干。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>\n&LTp>&LTstrong>所有概念性内容可以在参考资料中找到出处&LT/strong>&LT/p>\n&LTh2 id=\"shu-zu\">数组&LT/h2>\n&LTh3 id=\"shu-zu-de-she-ji\">数组的设计&LT/h3>\n&LTp>数组设计之初是在形式上依赖内存分配而成的，所以必须在使用前预先请求空间。这使得数组有以下特性：&LT/p>\n&LTol>\n&LTli>请求空间以后大小固定，不能再改变（数据溢出问题）；&LT/li>\n&LTli>在内存中有空间连续性的表现，中间不会存在其他程序需要调用的数据，为此数组的专用内存空间；&LT/li>\n&LTli>在旧式编程语言中（如有中阶语言之称的C），程序不会对数组的操作做下界判断，也就有潜在的越界操作的风险（比如会把数据写在运行中程序需要调用的核心部分的内存上）。&LT/li>\n&LT/ol>\n&LTp>因为简单数组强烈倚赖电脑硬件之内存，所以不适用于现代的程序设计。欲使用可变大小、硬件无关性的数据类型，Java等程序设计语言均提供了更高级的数据结构：ArrayList、Vector等动态数组。&LT/p>\n&LTh3 id=\"pythonde-shu-zu\">Python的数组&LT/h3>\n&LTp>从严格意义上来说:Python里没有严格意义上的数组。\n&LTcode>List&LT/code>可以说是Python里的数组，下面这段代码是CPython的实现&LTcode>List&LT/code>的结构体:&LT/p>\n&LTpre data-lang=\"c\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-c \">&LTcode class=\"language-c\" data-lang=\"c\">&LTspan style=\"font-style:italic;color:#66d9ef;\">typedef struct &LT/span>&LTspan>{\n&LT/span>&LTspan> PyObject_VAR_HEAD\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">/* Vector of pointers to list elements. list[0] is ob_item[0], etc. */\n&LT/span>&LTspan> PyObject &LT/span>&LTspan style=\"color:#f92672;\">**&LT/span>&LTspan>ob_item;\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">/* ob_item contains space for &amp#39;allocated&amp#39; elements. The number\n&LT/span>&LTspan style=\"color:#75715e;\"> * currently in use is ob_size.\n&LT/span>&LTspan style=\"color:#75715e;\"> * Invariants:\n&LT/span>&LTspan style=\"color:#75715e;\"> * 0 &amplt;= ob_size &amplt;= allocated\n&LT/span>&LTspan style=\"color:#75715e;\"> * len(list) == ob_size\n&LT/span>&LTspan style=\"color:#75715e;\"> * ob_item == NULL implies ob_size == allocated == 0\n&LT/span>&LTspan style=\"color:#75715e;\"> * list.sort() temporarily sets allocated to -1 to detect mutations.\n&LT/span>&LTspan style=\"color:#75715e;\"> *\n&LT/span>&LTspan style=\"color:#75715e;\"> * Items must normally not be NULL, except during construction when\n&LT/span>&LTspan style=\"color:#75715e;\"> * the list is not yet visible outside the function that builds it.\n&LT/span>&LTspan style=\"color:#75715e;\"> */\n&LT/span>&LTspan> Py_ssize_t allocated;\n&LT/span>&LTspan>} PyListObject;\n&LT/span>&LT/code>&LT/pre>\n&LTp>取自&LTa rel=\"nofollow\" href=\"https://github.com/python/cpython/blob/f24143b25e4f83368ff6182bebe14f885073015c/Include/listobject.h\">CPython-Github&LT/a>&LT/p>\n&LTp>还有一篇文章讲&LTa rel=\"nofollow\" href=\"http://www.laurentluce.com/posts/python-list-implementation/\">&LTcode>List&LT/code>实现&LT/a>,感兴趣的朋友可以去看看。&LTa rel=\"nofollow\" href=\"http://python.jobbole.com/82549/\">中文版&LT/a>。&LT/p>\n&LTp>当然，在Python里它就是数组。\n后面的一些结构也将用&LTcode>List&LT/code>来实现。&LT/p>\n&LTh2 id=\"dui-zhan\">堆栈&LT/h2>\n&LTh3 id=\"shi-yao-shi-dui-zhan\">什么是堆栈&LT/h3>\n&LTp>堆栈（英语：stack），也可直接称栈，在计算机科学中，是一种特殊的串列形式的数据结构，它的特殊之处在于只能允许在链接串列或阵列的一端（称为堆叠顶端指标，英语：top）进行加入资料（英语：push）和输出资料（英语：pop）的运算。另外堆叠也可以用一维阵列或连结串列的形式来完成。堆叠的另外一个相对的操作方式称为伫列。&LT/p>\n&LTp>由于堆叠数据结构只允许在一端进行操作，因而按照后进先出（LIFO, Last In First Out）的原理运作。&LT/p>\n&LTh3 id=\"te-dian\">特点&LT/h3>\n&LTul>\n&LTli>先入后出，后入先出。&LT/li>\n&LTli>除头尾节点之外，每个元素有一个前驱，一个后继。&LT/li>\n&LT/ul>\n&LTh3 id=\"cao-zuo\">操作&LT/h3>\n&LTp>从原理可知，对堆栈(栈)可以进行的操作有:&LT/p>\n&LTul>\n&LTli>top():获取堆栈顶端对象&LT/li>\n&LTli>push():向栈里添加一个对象&LT/li>\n&LTli>pop():从栈里推出一个对象&LT/li>\n&LT/ul>\n&LTh3 id=\"shi-xian\">实现&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">class &LT/span>&LTspan style=\"text-decoration:underline;color:#a6e22e;\">my_stack&LT/span>&LTspan>(&LT/span>&LTspan style=\"text-decoration:underline;font-style:italic;color:#a6e22e;\">object&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__init__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">value&LT/span>&LTspan>):\n&LT/span>&LTspan> self.value &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>value\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 前驱\n&LT/span>&LTspan> self.before &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 后继\n&LT/span>&LTspan> self.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__str__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">str&LT/span>&LTspan>(self.value)\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">top&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">stack&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(stack, my_stack):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>stack.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>top(stack.behind)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>stack\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">push&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">stack&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">ele&LT/span>&LTspan>):\n&LT/span>&LTspan> push_ele &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>my_stack(ele)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(stack, my_stack):\n&LT/span>&LTspan> stack_top &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>top(stack)\n&LT/span>&LTspan> push_ele.before &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack_top\n&LT/span>&LTspan> push_ele.before.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>push_ele\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">raise &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">Exception&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;不要乱扔东西进来好么&amp#39;&LT/span>&LTspan>)\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">pop&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">stack&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(stack, my_stack):\n&LT/span>&LTspan> stack_top &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>top(stack)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>stack_top.before &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> stack_top.before.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> stack_top.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>stack_top\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">print&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;已经是栈顶了&amp#39;&LT/span>&LTspan>)\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"dui-lie\">队列&LT/h2>\n&LTh3 id=\"shi-yao-shi-dui-lie\">什么是队列&LT/h3>\n&LTp>和堆栈类似，唯一的区别是队列只能在队头进行出队操作，所以队列是是先进先出（FIFO, First-In-First-Out）的线性表&LT/p>\n&LTh3 id=\"te-dian-1\">特点&LT/h3>\n&LTul>\n&LTli>先入先出,后入后出&LT/li>\n&LTli>除尾节点外,每个节点有一个后继&LT/li>\n&LTli>（可选）除头节点外,每个节点有一个前驱&LT/li>\n&LT/ul>\n&LTh3 id=\"cao-zuo-1\">操作&LT/h3>\n&LTul>\n&LTli>push（）:入队&LT/li>\n&LTli>pop（）：出队&LT/li>\n&LT/ul>\n&LTh3 id=\"shi-xian-1\">实现&LT/h3>\n&LTh4 id=\"pu-tong-dui-lie\">普通队列&LT/h4>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">class &LT/span>&LTspan style=\"text-decoration:underline;color:#a6e22e;\">MyQueue&LT/span>&LTspan>():\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__init__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">value&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>):\n&LT/span>&LTspan> self.value &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>value\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 前驱\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># self.before = None\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 后继\n&LT/span>&LTspan> self.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__str__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>self.value &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">str&LT/span>&LTspan>(self.value)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;None&amp#39;\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">create_queue&LT/span>&LTspan>():\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;仅有队头&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>MyQueue()\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">last&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">queue&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(queue, MyQueue):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>queue.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>last(queue.behind)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>queue\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">push&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">queue&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">ele&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(queue, MyQueue):\n&LT/span>&LTspan> last_queue &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>last(queue)\n&LT/span>&LTspan> new_queue &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>MyQueue(ele)\n&LT/span>&LTspan> last_queue.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>new_queue\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">pop&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">queue&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>queue.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> get_queue &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>queue.behind\n&LT/span>&LTspan> queue.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>queue.behind.behind\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>get_queue\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">print&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;队列里已经没有元素了&amp#39;&LT/span>&LTspan>)\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">print_queue&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">queue&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">print&LT/span>&LTspan>(queue)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>queue.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> print_queue(queue.behind)\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"lian-biao\">链表&LT/h2>\n&LTh3 id=\"shi-yao-shi-lian-biao\">什么是链表&LT/h3>\n&LTp>链表（Linked list）是一种常见的基础数据结构，是一种线性表，但是并不会按线性的顺序存储数据，而是在每一个节点里存到下一个节点的指针(Pointer)。由于不必须按顺序存储，链表在插入的时候可以达到O(1)的复杂度，比另一种线性表顺序表快得多，但是查找一个节点或者访问特定编号的节点则需要O(n)的时间，而顺序表相应的时间复杂度分别是O(logn)和O(1)。&LT/p>\n&LTh3 id=\"te-dian-2\">特点&LT/h3>\n&LTp>使用链表结构可以克服数组链表需要预先知道数据大小的缺点，链表结构可以充分利用计算机内存空间，实现灵活的内存动态管理。但是链表失去了数组随机读取的优点，同时链表由于增加了结点的指针域，空间开销比较大。&LT/p>\n&LTh3 id=\"cao-zuo-2\">操作&LT/h3>\n&LTul>\n&LTli>init():初始化&LT/li>\n&LTli>insert(): 插入&LT/li>\n&LTli>trave(): 遍历&LT/li>\n&LTli>delete(): 删除&LT/li>\n&LTli>find(): 查找&LT/li>\n&LT/ul>\n&LTh3 id=\"shi-xian-2\">实现&LT/h3>\n&LTp>此处仅实现双向列表&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">class &LT/span>&LTspan style=\"text-decoration:underline;color:#a6e22e;\">LinkedList&LT/span>&LTspan>():\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__init__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">value&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>):\n&LT/span>&LTspan> self.value &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>value\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 前驱\n&LT/span>&LTspan> self.before &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 后继\n&LT/span>&LTspan> self.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__str__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>self.value &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">str&LT/span>&LTspan>(self.value)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;None&amp#39;\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">init&LT/span>&LTspan>():\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>LinkedList(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;HEAD&amp#39;&LT/span>&LTspan>)\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">delete&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">linked_list&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(linked_list, LinkedList):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> delete(linked_list.behind)\n&LT/span>&LTspan> linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> linked_list.before &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> linked_list.value &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">insert&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">linked_list&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">index&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">node&LT/span>&LTspan>):\n&LT/span>&LTspan> node &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>LinkedList(node)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(linked_list, LinkedList):\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan>index:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">break\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> linked_list &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>linked_list.behind\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> node.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>linked_list.behind\n&LT/span>&LTspan> linked_list.behind.before &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>node\n&LT/span>&LTspan> node.before, linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>linked_list, node\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">remove&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">linked_list&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">index&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(linked_list, LinkedList):\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan>index:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">break\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> linked_list &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>linked_list.behind\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> linked_list.behind.before &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>linked_list.before\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>linked_list.before &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> linked_list.before.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>linked_list.behind\n&LT/span>&LTspan> linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> linked_list.before &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> linked_list.value &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">trave&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">linked_list&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(linked_list, LinkedList):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">print&LT/span>&LTspan>(linked_list)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> trave(linked_list.behind)\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">find&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">linked_list&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">index&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(linked_list, LinkedList):\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan>index:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>linked_list\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> linked_list &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>linked_list.behind\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan>index:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">raise &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">Exception&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#ae81ff;\">404&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>linked_list\n&LT/span>&LT/code>&LT/pre>\n&LTp>以上所有源代码均在&LTa rel=\"nofollow\" href=\"https://github.com/EINDEX/Python-algorithm\">Github&LT/a>共享，欢迎提出issue或PR，希望与大家共同进步!&LT/p>\n&LThr />\n&LTh2 id=\"can-kao-zi-liao\">参考资料&LT/h2>\n&LTp>Wiki百科: &LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84\">数据结构&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E6%95%B0%E7%BB%84\">数组&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E9%98%9F%E5%88%97\">队列&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E9%93%BE%E8%A1%A8#.E5.88.9D.E5.A7.8B.E5.8C.96.E5.92.8C.E9.94.80.E6.AF.81\">链表&LT/a>&LT/p>\n","permalink":"https://eindex.me/cn/posts/liner-in-python/","slug":"liner-in-python","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"基本线性数据结构的Python实现","description":null,"updated":null,"date":"2017-10-05T14:33:39+08:00","year":2017,"month":10,"day":5,"taxonomies":{"tags":["Python","Data structure","Linear"],"series":["algorithm"]},"extra":{},"path":"/cn/posts/liner-in-python/","components":["cn","posts","liner-in-python"],"summary":"&LTp>本篇主要实现四种数据结构，分别是数组、堆栈、队列、链表。我不知道我为什么要用Python来干C干的事情，总之Python就是可以干。&LT/p>\n","toc":[{"level":2,"id":"shu-zu","permalink":"https://eindex.me/cn/posts/liner-in-python/#shu-zu","title":"数组","children":[{"level":3,"id":"shu-zu-de-she-ji","permalink":"https://eindex.me/cn/posts/liner-in-python/#shu-zu-de-she-ji","title":"数组的设计","children":[]},{"level":3,"id":"pythonde-shu-zu","permalink":"https://eindex.me/cn/posts/liner-in-python/#pythonde-shu-zu","title":"Python的数组","children":[]}]},{"level":2,"id":"dui-zhan","permalink":"https://eindex.me/cn/posts/liner-in-python/#dui-zhan","title":"堆栈","children":[{"level":3,"id":"shi-yao-shi-dui-zhan","permalink":"https://eindex.me/cn/posts/liner-in-python/#shi-yao-shi-dui-zhan","title":"什么是堆栈","children":[]},{"level":3,"id":"te-dian","permalink":"https://eindex.me/cn/posts/liner-in-python/#te-dian","title":"特点","children":[]},{"level":3,"id":"cao-zuo","permalink":"https://eindex.me/cn/posts/liner-in-python/#cao-zuo","title":"操作","children":[]},{"level":3,"id":"shi-xian","permalink":"https://eindex.me/cn/posts/liner-in-python/#shi-xian","title":"实现","children":[]}]},{"level":2,"id":"dui-lie","permalink":"https://eindex.me/cn/posts/liner-in-python/#dui-lie","title":"队列","children":[{"level":3,"id":"shi-yao-shi-dui-lie","permalink":"https://eindex.me/cn/posts/liner-in-python/#shi-yao-shi-dui-lie","title":"什么是队列","children":[]},{"level":3,"id":"te-dian-1","permalink":"https://eindex.me/cn/posts/liner-in-python/#te-dian-1","title":"特点","children":[]},{"level":3,"id":"cao-zuo-1","permalink":"https://eindex.me/cn/posts/liner-in-python/#cao-zuo-1","title":"操作","children":[]},{"level":3,"id":"shi-xian-1","permalink":"https://eindex.me/cn/posts/liner-in-python/#shi-xian-1","title":"实现","children":[{"level":4,"id":"pu-tong-dui-lie","permalink":"https://eindex.me/cn/posts/liner-in-python/#pu-tong-dui-lie","title":"普通队列","children":[]}]}]},{"level":2,"id":"lian-biao","permalink":"https://eindex.me/cn/posts/liner-in-python/#lian-biao","title":"链表","children":[{"level":3,"id":"shi-yao-shi-lian-biao","permalink":"https://eindex.me/cn/posts/liner-in-python/#shi-yao-shi-lian-biao","title":"什么是链表","children":[]},{"level":3,"id":"te-dian-2","permalink":"https://eindex.me/cn/posts/liner-in-python/#te-dian-2","title":"特点","children":[]},{"level":3,"id":"cao-zuo-2","permalink":"https://eindex.me/cn/posts/liner-in-python/#cao-zuo-2","title":"操作","children":[]},{"level":3,"id":"shi-xian-2","permalink":"https://eindex.me/cn/posts/liner-in-python/#shi-xian-2","title":"实现","children":[]}]},{"level":2,"id":"can-kao-zi-liao","permalink":"https://eindex.me/cn/posts/liner-in-python/#can-kao-zi-liao","title":"参考资料","children":[]}],"word_count":1661,"reading_time":9,"assets":[],"draft":false,"lang":"cn","lower":{"relative_path":"posts/thoughtworks-one-month.cn.md","content":"&LTp>距离加入 Thoughtworks 已有一个月。\n这家公司也并非互联网公司，没有高强度的工作节奏，没有996，有一些敏捷信仰。\n对于武汉来说，也算是一个优秀的公司。&LT/p>\n&LTp>同时正如网上所言：该有的缺点也是有的。好奇的同学可以去看一下我的编程引路人（也是我司黑粉头子）耗子叔（陈皓）的文章。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"ji-zhu-bian-geng\">技术变更&LT/h2>\n&LTp>通过一个月的折磨，本人成为一名勉强能用的 Salesforce 开发者。\n现在的技术栈新增了：&LT/p>\n&LTul>\n&LTli>Apex&LT/li>\n&LTli>SOQL&LT/li>\n&LTli>Lighting Web Content&LT/li>\n&LT/ul>\n&LTp>使用的产品新增了：&LT/p>\n&LTul>\n&LTli>AWS lambda&LT/li>\n&LTli>Salesforce&LT/li>\n&LT/ul>\n&LTp>但怎么说呢 Salesforce、Apex、SOQL 对开发者真的是非常不友善基本的功能都不完全。&LT/p>\n&LTp>先来说说 SOQL：&LT/p>\n&LTol>\n&LTli>不支持 update delete insert&LT/li>\n&LTli>不支持 join&LT/li>\n&LTli>子查询只能写一层（本人也不推荐多层）&LT/li>\n&LTli>select 结果不支持直接计算，需要在 object 上添加 field&LT/li>\n&LTli>group by 支持不够灵活&LT/li>\n&LTli>不支持 field = field 的查询方式&LT/li>\n&LT/ol>\n&LTp>在来吐槽一下 Apex：&LT/p>\n&LTol>\n&LTli>云开发，没有本地开发环境，别想在本地调试，调试需要上传代码，日志难以检索&LT/li>\n&LTli>资源受限，除了 Batchable 之外每一种都会要较为严苛的资源使用量限制&LT/li>\n&LTli>语法低级，感觉像是 Java6 时代&LT/li>\n&LT/ol>\n&LTp>最后吐槽 Salesforce：&LT/p>\n&LTol>\n&LTli>上面两个东西都是 Salesforce 系统自带的。&LT/li>\n&LTli>网络延时长。&LT/li>\n&LTli>测试运行效率低。&LT/li>\n&LT/ol>\n&LTh2 id=\"ye-wu-fa-zhan\">业务发展&LT/h2>\n&LTp>这是机密，我作为一头萌新，我只能说业务复杂度极高，技术复杂度倒是相对低很多，这么一比较，其实业务也没有多么复杂。&LT/p>\n&LTh2 id=\"dui-wei-lai-de-zhan-wang\">对未来的展望&LT/h2>\n&LTp>这 2019 年总是要完成我 2017 年定下的目标了嘛，在 965 的公司都不能完成的话。以后也是没有什么希望了嘛。&LT/p>\n&LTh2 id=\"end\">End&LT/h2>\n&LTp>Thoughtworks 在武汉还是一个非常值得加入的公司，有想要内推的小伙伴可以联系我。&LT/p>\n","permalink":"https://eindex.me/cn/posts/thoughtworks-one-month/","slug":"thoughtworks-one-month","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"Thoughtworks 一月","description":null,"updated":null,"date":"2017-10-05T14:34:54+08:00","year":2017,"month":10,"day":5,"taxonomies":{"tags":["Thoughtworks"]},"extra":{},"path":"/cn/posts/thoughtworks-one-month/","components":["cn","posts","thoughtworks-one-month"],"summary":"&LTp>距离加入 Thoughtworks 已有一个月。\n这家公司也并非互联网公司，没有高强度的工作节奏，没有996，有一些敏捷信仰。\n对于武汉来说，也算是一个优秀的公司。&LT/p>\n&LTp>同时正如网上所言：该有的缺点也是有的。好奇的同学可以去看一下我的编程引路人（也是我司黑粉头子）耗子叔（陈皓）的文章。&LT/p>\n","toc":[{"level":2,"id":"ji-zhu-bian-geng","permalink":"https://eindex.me/cn/posts/thoughtworks-one-month/#ji-zhu-bian-geng","title":"技术变更","children":[]},{"level":2,"id":"ye-wu-fa-zhan","permalink":"https://eindex.me/cn/posts/thoughtworks-one-month/#ye-wu-fa-zhan","title":"业务发展","children":[]},{"level":2,"id":"dui-wei-lai-de-zhan-wang","permalink":"https://eindex.me/cn/posts/thoughtworks-one-month/#dui-wei-lai-de-zhan-wang","title":"对未来的展望","children":[]},{"level":2,"id":"end","permalink":"https://eindex.me/cn/posts/thoughtworks-one-month/#end","title":"End","children":[]}],"word_count":512,"reading_time":3,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/thoughtworks-one-month/","title":"Thoughtworks 一月","path":"/home/runner/work/blog/blog/content/posts/thoughtworks-one-month.cn.md"}],"backlinks":[]},"higher":{"relative_path":"posts/archlinux-install-guide.cn.md","content":"&LTp>ArchLinux 是一个非常符合我个人哲学的操作系统，深得与我一样的大部分 Pythonista 之心(不好意思代表你们了)。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"shi-yao-shi-archlinux\">什么是 ArchLinux&LT/h2>\n&LTblockquote>\n&LTh2 id=\"yuan-ze\">原则&LT/h2>\n&LTp>以下核心原则构成了我们通常所指的 Arch 之道，或者说 Arch 的哲学，或许最好的结词是 Keep It Simple, Stupid（对应中文为“保持简单，且一目了然”）。&LT/p>\n&LTh3 id=\"jian-ji\">简洁&LT/h3>\n&LTp>Arch Linux 将简洁定义为：&LTstrong>避免任何不必要的添加、修改和复杂增加&LT/strong>。它提供的软件都来自原始开发者(&LTa rel=\"nofollow\" title=\"wikipedia:Upstream (software development)\" href=\"https://en.wikipedia.org/wiki/Upstream_(software_development)\">上游&LT/a>)，仅进行和发行版(下游)相关的最小修改。&LT/p>\n&LTul>\n&LTli>不包含上游不愿意接受的补丁。绝大部分 Arch 下游补丁都已经被上游接受，下一个正式版本里会包含。&LT/li>\n&LTli>配置文件也是来自上游，仅包含发行版必须的调整，比如特殊的文件系统路径变动。Arch 不会在安装一个软件包后就自动启动服务。&LT/li>\n&LTli>软件包通常都和一个上游项目直接对应。仅在极少数情况下才会拆分软件包。&LT/li>\n&LTli>官方不支持图形化配置界面，建议用户使用命令行或文本编辑器修改设置。&LT/li>\n&LT/ul>\n&LTh3 id=\"xian-dai\">现代&LT/h3>\n&LTp>Arch尽全力保持软件处于最新的稳定版本，只要不出现系统软件包破损，都尽量用最新版本。Arch采用&LTa rel=\"nofollow\" title=\"wikipedia:Rolling release\" href=\"https://en.wikipedia.org/wiki/Rolling_release\">滚动升级&LT/a>策略，安装之后可以持续升级。\nArch向GNU/Linux用户提供了许多新特性，包括&LTa rel=\"nofollow\" title=\"Systemd (简体中文)\" href=\"https://wiki.archlinux.org/index.php/Systemd_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)\">systemd&LT/a>初始化系统、现代的&LTa rel=\"nofollow\" title=\"File systems\" href=\"https://wiki.archlinux.org/index.php/File_systems\">文件系统&LT/a>、LVM2/EVMS、软件磁盘阵列（软RAID）、udev支持、initcpio（附带mkinitcpio）以及最新的内核。&LT/p>\n&LTh3 id=\"shi-yong\">实用&LT/h3>\n&LTp>Arch 注重实用性，避免意识形态之争。最终的设计决策都是由开发者的共识决定。开发者依赖基于事实的技术分析和讨论，避免政治因素，不会被流行观点左右。\nArch Linux 的仓库中包含大量的软件包和编译脚本。用户可以按照需要进行自由选择。仓库中既提供了开源、自由的软件，也提供了闭源软件。&LTstrong>实用性大于意识形态&LT/strong>.&LT/p>\n&LTh3 id=\"yi-yong-hu-wei-zhong-xin\">以用户为中心&LT/h3>\n&LTp>许多 Linux 发行版都试图变得更“用户友好”，Arch Linux 则一直是，永远会是“以用户为中心”。此发行版是为了满足贡献者的需求，而不是为了吸引尽可能多的用户。Arch 适用于乐于自己动手的用户，他们愿意花时间阅读文档，解决自己的问题。\n报告问题、完善 Wiki 社区文档、为其它用户提供技术支持。&LTa rel=\"nofollow\" title=\"Arch User Repository (简体中文)\" href=\"https://wiki.archlinux.org/index.php/Arch_User_Repository_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)\">Arch 用户仓库&LT/a> 收集用户贡献的软件包。Arch 开发者都是志愿者，活跃的贡献者很快就能称为开发人员。\nArch 鼓励每一个用户 &LTa rel=\"nofollow\" title=\"Getting involved\" href=\"https://wiki.archlinux.org/index.php/Getting_involved\">参与&LT/a> 和贡献，报告和帮助修复 &LTa rel=\"nofollow\" href=\"https://bugs.archlinux.org/\">bugs&LT/a>，提供软件包补丁和参加核心 &LTa rel=\"nofollow\" href=\"https://projects.archlinux.org/\">项目&LT/a>：Arch 开发者都是志愿者，通过持续的贡献成为团队的一员。&LTem>Archers&LT/em> 可以自行贡献软件包到 &LTa rel=\"nofollow\" title=\"Arch User Repository\" href=\"https://wiki.archlinux.org/index.php/Arch_User_Repository\">Arch User Repository&LT/a>, 提升 &LTa rel=\"nofollow\" title=\"Main page\" href=\"https://wiki.archlinux.org/index.php/Main_page\">ArchWiki 文档质量&LT/a>, 在 &LTa rel=\"nofollow\" href=\"https://bbs.archlinux.org/\">论坛&LT/a>, &LTa rel=\"nofollow\" href=\"https://mailman.archlinux.org/mailman/listinfo/\">邮件列表&LT/a>, &LTa rel=\"nofollow\" title=\"IRC channels\" href=\"https://wiki.archlinux.org/index.php/IRC_channels\">IRC&LT/a> 中给其它用户提供技术支持. Arch Linux 是全球很多用户的选择，已经有很多 &LTa rel=\"nofollow\" title=\"International communities\" href=\"https://wiki.archlinux.org/index.php/International_communities\">国际社区&LT/a>提供帮助和文档翻译。\n—— 以上内容来自 &LTa rel=\"nofollow\" href=\"https://wiki.archlinux.org/index.php/Arch_Linux_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)\">《 ArchWiki 简介》&LT/a>&LT/p>\n&LT/blockquote>\n&LTh2 id=\"an-zhuang\">安装&LT/h2>\n&LTh3 id=\"mu-de\">目的&LT/h3>\n&LTp>在 VMware 的环境下安装 ArchLinux，以及 GUI。&LT/p>\n&LTh3 id=\"zhun-bei-jie-duan\">准备阶段&LT/h3>\n&LTp>在开始安装系统之前，我们需要准备这么几样东西。&LT/p>\n&LTul>\n&LTli>Vmware&LT/li>\n&LTli>&LTa rel=\"nofollow\" href=\"https://mirror.tuna.tsinghua.edu.cn/archlinux/iso/\">ArchLinux 镜像&LT/a>&LT/li>\n&LTli>&LTa rel=\"nofollow\" href=\"https://wiki.archlinux.org/index.php/Installation_guide_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)\">官方安装向导&LT/a>&LT/li>\n&LTli>(可选) 安装小视频 &LTa rel=\"nofollow\" href=\"https://www.bilibili.com/video/av12933746/\">Bilibili&LT/a> &LT/li>\n&LT/ul>\n&LTh3 id=\"chuang-jian-xu-ni-ji\">创建虚拟机&LT/h3>\n&LTp>创建一个 Linux 虚拟机，选择其他 Linux x64 3.6内核，分配至少 1G 内存以及 8G 存储空间。\n将刚才下好的镜像添加到光驱中。&LT/p>\n&LTh3 id=\"wang-luo\">网络&LT/h3>\n&LTp>等待系统进入命令行后，首先检测网络。&LT/p>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>ping www.baidu.com\n&LT/span>&LTspan style=\"color:#75715e;\"># 可以换为你自己所在地区稳定链接的网站\n&LT/span>&LT/code>&LT/pre>\n&LTp>然后更新系统时间。&LT/p>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>timedatectl set-ntp true\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"fen-qu\">分区&LT/h3>\n&LTp>通常 Linux 系统需要一个引导 Boot 分区，一个主分区，一个 Swap 分区，一个 home (用户)分区，(可选) var 分区。\n顺便讲讲各个分区的作用:&LT/p>\n&LTul>\n&LTli>引导分区：用于引导系统启动，加载内核能操作，独立分区可以方便多系统引导等。&LT/li>\n&LTli>主分区：系统文件主要存放的地方，一般操作都需要 root 权限。&LT/li>\n&LTli>Swap 分区：类似于虚拟内存，如果个人电脑内存足够大 8G 以上，不需要虚拟内存，如果多于 4G 小于 8G ，和内存保持 1 比 1 ，如果小于 4G ，和内存保持 1 比 2 较好。当然也可以不使用此分区。&LT/li>\n&LTli>home 分区：通常用于存储个人数据，单独分出来主要是为了。\n&LTol>\n&LTli>系统重装或崩溃后，不会影响该分区的数据。&LT/li>\n&LTli>长时间使用必然会有很多零碎文件产生，可能导致 ArchLinux 无法滚动更新等等。&LT/li>\n&LTli>分区单独加密。&LT/li>\n&LT/ol>\n&LT/li>\n&LTli>var 分区：用于存放系统日志，各种应用的日志，当你系统 boom 了之后，还可以通过查看日志来分析 boom 原因，又或者日志填满了 var 分区，也不会影响主分区的空间。&LT/li>\n&LT/ul>\n&LThr />\n&LTp>本次由于是安装在 Vmware 中，分一个主分区就好了。&LT/p>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>fdisk /dev/sdX &LT/span>&LTspan style=\"color:#75715e;\"># 将 X 更换为你的磁盘\n&LT/span>&LT/code>&LT/pre>\n&LTp>使用 fdisk (&LTa rel=\"nofollow\" href=\"https://wiki.archlinux.org/index.php/Fdisk_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)\">教程&LT/a>)一顿操作，最终得到你想要的分区结果。\n那么怎么查看是不是真的操作对了呢。&LT/p>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>lsblk &LT/span>&LTspan style=\"color:#75715e;\"># 可以查看磁盘分区以及挂载信息\n&LT/span>&LT/code>&LT/pre>\n&LTp>接下来格式化分区就好了&LT/p>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>mkfs.ext4 /dev/sdX1 &LT/span>&LTspan style=\"color:#75715e;\">#通常除了 Boot 分区和 Swap 分区需要特殊处理，其他分区都使用 ext4 文件系统。\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"an-zhuang-1\">安装&LT/h2>\n&LTh3 id=\"geng-huan-jing-xiang\">更换镜像&LT/h3>\n&LTp>修改文件 &LTcode>/etc/pacman.d/mirrorlist&LT/code>&LT/p>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan style=\"color:#75715e;\"># 这行代码可以快速选出所有中国镜像\n&LT/span>&LTspan>awk &LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;/^## China$/ {f=1} f==0 {next} /^$/ {exit} {print substr($0, 2)}&amp#39; &LT/span>&LTspan>\\\n&LT/span>&LTspan> /etc/pacman.d/mirrorlist.pacnew\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"gua-zai-ci-pan\">挂载磁盘&LT/h3>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>mount /dev/sdX1 /mnt\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"an-zhuang-xi-tong\">安装系统&LT/h3>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>pacstrap /mnt base base-devel vim zsh git &LT/span>&LTspan style=\"color:#75715e;\"># 顺便安装一些常用工具\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"pei-zhi\">配置&LT/h2>\n&LTh3 id=\"fstab\">Fstab&LT/h3>\n&LTp>Fstab 定义了存储设备和分区整合系统的方式。详情可见 &LTa rel=\"nofollow\" href=\"https://en.wikipedia.org/wiki/Fstab\">Wiki&LT/a>&LT/p>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>genfstab&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\"> -L&LT/span>&LTspan> /mnt &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;&ampgt;&LT/span>&LTspan> /met/etc/fstab\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"chroot\">Chroot&LT/h3>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>arch-chroot /mnt &LT/span>&LTspan style=\"color:#75715e;\"># 使用 Arch Chroot 进入刚安装的白板系统\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"shi-qu\">时区&LT/h3>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>ln&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\"> -sf&LT/span>&LTspan> /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &LT/span>&LTspan style=\"color:#75715e;\"># 设置时区为上海\n&LT/span>&LTspan>hwclock&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\"> --systohc --utc &LT/span>&LTspan style=\"font-style:italic;color:#75715e;\"># 同步时钟\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"ben-di-hua\">本地化&LT/h3>\n&LTp>只使用英文 tty 避免报错的时候全是方块或者不能识别的的奇妙符号。&LT/p>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan style=\"color:#66d9ef;\">echo &LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;en_US.UTF-8 UTF-8&amp#39; &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;&ampgt;&LT/span>&LTspan> /etc/locale.gen\n&LT/span>&LTspan style=\"color:#66d9ef;\">echo &LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;zh_CN.UTF-8 UTF-8&amp#39; &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;&ampgt;&LT/span>&LTspan> /etc/locale.gen\n&LT/span>&LTspan>locale-gen\n&LT/span>&LTspan style=\"color:#66d9ef;\">echo&LT/span>&LTspan> LANG=en_US.UTF-8 &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;&LT/span>&LTspan> /etc/locale.conf\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"hostname\">Hostname&LT/h3>\n&LTp>设置主机名称\n要设置 &LTcode>hostname&LT/code>，将其添加 到 &LTcode>/etc/hostname&LT/code>,&LTcode>myhostname&LT/code> 是需要的主机名&LT/p>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan style=\"color:#66d9ef;\">echo&LT/span>&LTspan> myhostname &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;&LT/span>&LTspan> /etc/hostname\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"dhcp-fu-wu\">Dhcp 服务&LT/h3>\n&LTp>这个关系到装好之后能否&LTstrong>上网&LT/strong>，由于 Vmware 不需要无限 WiFi 什么的所以这里只有有限安装。\nWiFi 驱动安装见这里&LT/p>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>ip link &LT/span>&LTspan style=\"color:#75715e;\"># 查看你的网卡\n&LT/span>&LTspan>systemctl enable dhcpd@ens33 &LT/span>&LTspan style=\"color:#75715e;\"># ens33 通常是你非 lo 的另外一个，可能与我的不一样。\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"she-zhi-mi-ma\">设置密码&LT/h3>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>passwd\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"tian-jia-yong-hu\">添加用户&LT/h3>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>useradd&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\"> -m&LT/span>&LTspan> username &LT/span>&LTspan style=\"color:#75715e;\"># 创建用户的同时创建 Home 目录\n&LT/span>&LTspan>passwd username &LT/span>&LTspan style=\"color:#75715e;\"># 设置用户密码\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"zhong-qi\">重启&LT/h3>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan style=\"color:#66d9ef;\">exit\n&LT/span>&LTspan>umount&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\"> -R&LT/span>&LTspan> /mnt\n&LT/span>&LTspan>reboot\n&LT/span>&LT/code>&LT/pre>\n&LThr />\n&LTp>那么系统安装就告一段落了，如果还是不理解可以看下面的这段视频。（配音很尴尬。。）\n&LTembed height=\"415\" width=\"544\" quality=\"high\" allowfullscreen=\"true\" type=\"application/x-shockwave-flash\" src=\"//static.hdslb.com/miniloader.swf\" flashvars=\"aid=12933746&page=1\" pluginspage=\"//www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash\">&LT/embed>&LT/p>\n&LTh2 id=\"wei-wan-dai-xu\">未完待续&LT/h2>\n&LTp>下次将会更新 ArchLinux 安装的 GUI 部分&LT/p>\n","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/","slug":"archlinux-install-guide","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"小白也能上手的 ArchLinux 安装教程","description":null,"updated":null,"date":"2017-10-05T14:24:21+08:00","year":2017,"month":10,"day":5,"taxonomies":{"tags":["ArchLinux"]},"extra":{},"path":"/cn/posts/archlinux-install-guide/","components":["cn","posts","archlinux-install-guide"],"summary":"&LTp>ArchLinux 是一个非常符合我个人哲学的操作系统，深得与我一样的大部分 Pythonista 之心(不好意思代表你们了)。&LT/p>\n","toc":[{"level":2,"id":"shi-yao-shi-archlinux","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#shi-yao-shi-archlinux","title":"什么是 ArchLinux","children":[]},{"level":2,"id":"yuan-ze","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#yuan-ze","title":"原则","children":[{"level":3,"id":"jian-ji","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#jian-ji","title":"简洁","children":[]},{"level":3,"id":"xian-dai","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#xian-dai","title":"现代","children":[]},{"level":3,"id":"shi-yong","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#shi-yong","title":"实用","children":[]},{"level":3,"id":"yi-yong-hu-wei-zhong-xin","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#yi-yong-hu-wei-zhong-xin","title":"以用户为中心","children":[]}]},{"level":2,"id":"an-zhuang","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#an-zhuang","title":"安装","children":[{"level":3,"id":"mu-de","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#mu-de","title":"目的","children":[]},{"level":3,"id":"zhun-bei-jie-duan","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#zhun-bei-jie-duan","title":"准备阶段","children":[]},{"level":3,"id":"chuang-jian-xu-ni-ji","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#chuang-jian-xu-ni-ji","title":"创建虚拟机","children":[]},{"level":3,"id":"wang-luo","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#wang-luo","title":"网络","children":[]},{"level":3,"id":"fen-qu","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#fen-qu","title":"分区","children":[]}]},{"level":2,"id":"an-zhuang-1","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#an-zhuang-1","title":"安装","children":[{"level":3,"id":"geng-huan-jing-xiang","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#geng-huan-jing-xiang","title":"更换镜像","children":[]},{"level":3,"id":"gua-zai-ci-pan","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#gua-zai-ci-pan","title":"挂载磁盘","children":[]},{"level":3,"id":"an-zhuang-xi-tong","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#an-zhuang-xi-tong","title":"安装系统","children":[]}]},{"level":2,"id":"pei-zhi","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#pei-zhi","title":"配置","children":[{"level":3,"id":"fstab","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#fstab","title":"Fstab","children":[]},{"level":3,"id":"chroot","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#chroot","title":"Chroot","children":[]},{"level":3,"id":"shi-qu","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#shi-qu","title":"时区","children":[]},{"level":3,"id":"ben-di-hua","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#ben-di-hua","title":"本地化","children":[]},{"level":3,"id":"hostname","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#hostname","title":"Hostname","children":[]},{"level":3,"id":"dhcp-fu-wu","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#dhcp-fu-wu","title":"Dhcp 服务","children":[]},{"level":3,"id":"she-zhi-mi-ma","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#she-zhi-mi-ma","title":"设置密码","children":[]},{"level":3,"id":"tian-jia-yong-hu","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#tian-jia-yong-hu","title":"添加用户","children":[]},{"level":3,"id":"zhong-qi","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#zhong-qi","title":"重启","children":[]}]},{"level":2,"id":"wei-wan-dai-xu","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#wei-wan-dai-xu","title":"未完待续","children":[]}],"word_count":2074,"reading_time":11,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/","title":"小白也能上手的 ArchLinux 安装教程","path":"/home/runner/work/blog/blog/content/posts/archlinux-install-guide.cn.md"}],"backlinks":[]},"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/liner-in-python/","title":"基本线性数据结构的Python实现","path":"/home/runner/work/blog/blog/content/posts/liner-in-python.cn.md"}],"backlinks":[]},{"relative_path":"posts/archlinux-install-guide.cn.md","content":"&LTp>ArchLinux 是一个非常符合我个人哲学的操作系统，深得与我一样的大部分 Pythonista 之心(不好意思代表你们了)。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>&LTh2 id=\"shi-yao-shi-archlinux\">什么是 ArchLinux&LT/h2>\n&LTblockquote>\n&LTh2 id=\"yuan-ze\">原则&LT/h2>\n&LTp>以下核心原则构成了我们通常所指的 Arch 之道，或者说 Arch 的哲学，或许最好的结词是 Keep It Simple, Stupid（对应中文为“保持简单，且一目了然”）。&LT/p>\n&LTh3 id=\"jian-ji\">简洁&LT/h3>\n&LTp>Arch Linux 将简洁定义为：&LTstrong>避免任何不必要的添加、修改和复杂增加&LT/strong>。它提供的软件都来自原始开发者(&LTa rel=\"nofollow\" title=\"wikipedia:Upstream (software development)\" href=\"https://en.wikipedia.org/wiki/Upstream_(software_development)\">上游&LT/a>)，仅进行和发行版(下游)相关的最小修改。&LT/p>\n&LTul>\n&LTli>不包含上游不愿意接受的补丁。绝大部分 Arch 下游补丁都已经被上游接受，下一个正式版本里会包含。&LT/li>\n&LTli>配置文件也是来自上游，仅包含发行版必须的调整，比如特殊的文件系统路径变动。Arch 不会在安装一个软件包后就自动启动服务。&LT/li>\n&LTli>软件包通常都和一个上游项目直接对应。仅在极少数情况下才会拆分软件包。&LT/li>\n&LTli>官方不支持图形化配置界面，建议用户使用命令行或文本编辑器修改设置。&LT/li>\n&LT/ul>\n&LTh3 id=\"xian-dai\">现代&LT/h3>\n&LTp>Arch尽全力保持软件处于最新的稳定版本，只要不出现系统软件包破损，都尽量用最新版本。Arch采用&LTa rel=\"nofollow\" title=\"wikipedia:Rolling release\" href=\"https://en.wikipedia.org/wiki/Rolling_release\">滚动升级&LT/a>策略，安装之后可以持续升级。\nArch向GNU/Linux用户提供了许多新特性，包括&LTa rel=\"nofollow\" title=\"Systemd (简体中文)\" href=\"https://wiki.archlinux.org/index.php/Systemd_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)\">systemd&LT/a>初始化系统、现代的&LTa rel=\"nofollow\" title=\"File systems\" href=\"https://wiki.archlinux.org/index.php/File_systems\">文件系统&LT/a>、LVM2/EVMS、软件磁盘阵列（软RAID）、udev支持、initcpio（附带mkinitcpio）以及最新的内核。&LT/p>\n&LTh3 id=\"shi-yong\">实用&LT/h3>\n&LTp>Arch 注重实用性，避免意识形态之争。最终的设计决策都是由开发者的共识决定。开发者依赖基于事实的技术分析和讨论，避免政治因素，不会被流行观点左右。\nArch Linux 的仓库中包含大量的软件包和编译脚本。用户可以按照需要进行自由选择。仓库中既提供了开源、自由的软件，也提供了闭源软件。&LTstrong>实用性大于意识形态&LT/strong>.&LT/p>\n&LTh3 id=\"yi-yong-hu-wei-zhong-xin\">以用户为中心&LT/h3>\n&LTp>许多 Linux 发行版都试图变得更“用户友好”，Arch Linux 则一直是，永远会是“以用户为中心”。此发行版是为了满足贡献者的需求，而不是为了吸引尽可能多的用户。Arch 适用于乐于自己动手的用户，他们愿意花时间阅读文档，解决自己的问题。\n报告问题、完善 Wiki 社区文档、为其它用户提供技术支持。&LTa rel=\"nofollow\" title=\"Arch User Repository (简体中文)\" href=\"https://wiki.archlinux.org/index.php/Arch_User_Repository_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)\">Arch 用户仓库&LT/a> 收集用户贡献的软件包。Arch 开发者都是志愿者，活跃的贡献者很快就能称为开发人员。\nArch 鼓励每一个用户 &LTa rel=\"nofollow\" title=\"Getting involved\" href=\"https://wiki.archlinux.org/index.php/Getting_involved\">参与&LT/a> 和贡献，报告和帮助修复 &LTa rel=\"nofollow\" href=\"https://bugs.archlinux.org/\">bugs&LT/a>，提供软件包补丁和参加核心 &LTa rel=\"nofollow\" href=\"https://projects.archlinux.org/\">项目&LT/a>：Arch 开发者都是志愿者，通过持续的贡献成为团队的一员。&LTem>Archers&LT/em> 可以自行贡献软件包到 &LTa rel=\"nofollow\" title=\"Arch User Repository\" href=\"https://wiki.archlinux.org/index.php/Arch_User_Repository\">Arch User Repository&LT/a>, 提升 &LTa rel=\"nofollow\" title=\"Main page\" href=\"https://wiki.archlinux.org/index.php/Main_page\">ArchWiki 文档质量&LT/a>, 在 &LTa rel=\"nofollow\" href=\"https://bbs.archlinux.org/\">论坛&LT/a>, &LTa rel=\"nofollow\" href=\"https://mailman.archlinux.org/mailman/listinfo/\">邮件列表&LT/a>, &LTa rel=\"nofollow\" title=\"IRC channels\" href=\"https://wiki.archlinux.org/index.php/IRC_channels\">IRC&LT/a> 中给其它用户提供技术支持. Arch Linux 是全球很多用户的选择，已经有很多 &LTa rel=\"nofollow\" title=\"International communities\" href=\"https://wiki.archlinux.org/index.php/International_communities\">国际社区&LT/a>提供帮助和文档翻译。\n—— 以上内容来自 &LTa rel=\"nofollow\" href=\"https://wiki.archlinux.org/index.php/Arch_Linux_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)\">《 ArchWiki 简介》&LT/a>&LT/p>\n&LT/blockquote>\n&LTh2 id=\"an-zhuang\">安装&LT/h2>\n&LTh3 id=\"mu-de\">目的&LT/h3>\n&LTp>在 VMware 的环境下安装 ArchLinux，以及 GUI。&LT/p>\n&LTh3 id=\"zhun-bei-jie-duan\">准备阶段&LT/h3>\n&LTp>在开始安装系统之前，我们需要准备这么几样东西。&LT/p>\n&LTul>\n&LTli>Vmware&LT/li>\n&LTli>&LTa rel=\"nofollow\" href=\"https://mirror.tuna.tsinghua.edu.cn/archlinux/iso/\">ArchLinux 镜像&LT/a>&LT/li>\n&LTli>&LTa rel=\"nofollow\" href=\"https://wiki.archlinux.org/index.php/Installation_guide_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)\">官方安装向导&LT/a>&LT/li>\n&LTli>(可选) 安装小视频 &LTa rel=\"nofollow\" href=\"https://www.bilibili.com/video/av12933746/\">Bilibili&LT/a> &LT/li>\n&LT/ul>\n&LTh3 id=\"chuang-jian-xu-ni-ji\">创建虚拟机&LT/h3>\n&LTp>创建一个 Linux 虚拟机，选择其他 Linux x64 3.6内核，分配至少 1G 内存以及 8G 存储空间。\n将刚才下好的镜像添加到光驱中。&LT/p>\n&LTh3 id=\"wang-luo\">网络&LT/h3>\n&LTp>等待系统进入命令行后，首先检测网络。&LT/p>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>ping www.baidu.com\n&LT/span>&LTspan style=\"color:#75715e;\"># 可以换为你自己所在地区稳定链接的网站\n&LT/span>&LT/code>&LT/pre>\n&LTp>然后更新系统时间。&LT/p>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>timedatectl set-ntp true\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"fen-qu\">分区&LT/h3>\n&LTp>通常 Linux 系统需要一个引导 Boot 分区，一个主分区，一个 Swap 分区，一个 home (用户)分区，(可选) var 分区。\n顺便讲讲各个分区的作用:&LT/p>\n&LTul>\n&LTli>引导分区：用于引导系统启动，加载内核能操作，独立分区可以方便多系统引导等。&LT/li>\n&LTli>主分区：系统文件主要存放的地方，一般操作都需要 root 权限。&LT/li>\n&LTli>Swap 分区：类似于虚拟内存，如果个人电脑内存足够大 8G 以上，不需要虚拟内存，如果多于 4G 小于 8G ，和内存保持 1 比 1 ，如果小于 4G ，和内存保持 1 比 2 较好。当然也可以不使用此分区。&LT/li>\n&LTli>home 分区：通常用于存储个人数据，单独分出来主要是为了。\n&LTol>\n&LTli>系统重装或崩溃后，不会影响该分区的数据。&LT/li>\n&LTli>长时间使用必然会有很多零碎文件产生，可能导致 ArchLinux 无法滚动更新等等。&LT/li>\n&LTli>分区单独加密。&LT/li>\n&LT/ol>\n&LT/li>\n&LTli>var 分区：用于存放系统日志，各种应用的日志，当你系统 boom 了之后，还可以通过查看日志来分析 boom 原因，又或者日志填满了 var 分区，也不会影响主分区的空间。&LT/li>\n&LT/ul>\n&LThr />\n&LTp>本次由于是安装在 Vmware 中，分一个主分区就好了。&LT/p>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>fdisk /dev/sdX &LT/span>&LTspan style=\"color:#75715e;\"># 将 X 更换为你的磁盘\n&LT/span>&LT/code>&LT/pre>\n&LTp>使用 fdisk (&LTa rel=\"nofollow\" href=\"https://wiki.archlinux.org/index.php/Fdisk_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)\">教程&LT/a>)一顿操作，最终得到你想要的分区结果。\n那么怎么查看是不是真的操作对了呢。&LT/p>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>lsblk &LT/span>&LTspan style=\"color:#75715e;\"># 可以查看磁盘分区以及挂载信息\n&LT/span>&LT/code>&LT/pre>\n&LTp>接下来格式化分区就好了&LT/p>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>mkfs.ext4 /dev/sdX1 &LT/span>&LTspan style=\"color:#75715e;\">#通常除了 Boot 分区和 Swap 分区需要特殊处理，其他分区都使用 ext4 文件系统。\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"an-zhuang-1\">安装&LT/h2>\n&LTh3 id=\"geng-huan-jing-xiang\">更换镜像&LT/h3>\n&LTp>修改文件 &LTcode>/etc/pacman.d/mirrorlist&LT/code>&LT/p>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan style=\"color:#75715e;\"># 这行代码可以快速选出所有中国镜像\n&LT/span>&LTspan>awk &LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;/^## China$/ {f=1} f==0 {next} /^$/ {exit} {print substr($0, 2)}&amp#39; &LT/span>&LTspan>\\\n&LT/span>&LTspan> /etc/pacman.d/mirrorlist.pacnew\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"gua-zai-ci-pan\">挂载磁盘&LT/h3>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>mount /dev/sdX1 /mnt\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"an-zhuang-xi-tong\">安装系统&LT/h3>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>pacstrap /mnt base base-devel vim zsh git &LT/span>&LTspan style=\"color:#75715e;\"># 顺便安装一些常用工具\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"pei-zhi\">配置&LT/h2>\n&LTh3 id=\"fstab\">Fstab&LT/h3>\n&LTp>Fstab 定义了存储设备和分区整合系统的方式。详情可见 &LTa rel=\"nofollow\" href=\"https://en.wikipedia.org/wiki/Fstab\">Wiki&LT/a>&LT/p>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>genfstab&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\"> -L&LT/span>&LTspan> /mnt &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;&ampgt;&LT/span>&LTspan> /met/etc/fstab\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"chroot\">Chroot&LT/h3>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>arch-chroot /mnt &LT/span>&LTspan style=\"color:#75715e;\"># 使用 Arch Chroot 进入刚安装的白板系统\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"shi-qu\">时区&LT/h3>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>ln&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\"> -sf&LT/span>&LTspan> /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &LT/span>&LTspan style=\"color:#75715e;\"># 设置时区为上海\n&LT/span>&LTspan>hwclock&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\"> --systohc --utc &LT/span>&LTspan style=\"font-style:italic;color:#75715e;\"># 同步时钟\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"ben-di-hua\">本地化&LT/h3>\n&LTp>只使用英文 tty 避免报错的时候全是方块或者不能识别的的奇妙符号。&LT/p>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan style=\"color:#66d9ef;\">echo &LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;en_US.UTF-8 UTF-8&amp#39; &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;&ampgt;&LT/span>&LTspan> /etc/locale.gen\n&LT/span>&LTspan style=\"color:#66d9ef;\">echo &LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;zh_CN.UTF-8 UTF-8&amp#39; &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;&ampgt;&LT/span>&LTspan> /etc/locale.gen\n&LT/span>&LTspan>locale-gen\n&LT/span>&LTspan style=\"color:#66d9ef;\">echo&LT/span>&LTspan> LANG=en_US.UTF-8 &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;&LT/span>&LTspan> /etc/locale.conf\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"hostname\">Hostname&LT/h3>\n&LTp>设置主机名称\n要设置 &LTcode>hostname&LT/code>，将其添加 到 &LTcode>/etc/hostname&LT/code>,&LTcode>myhostname&LT/code> 是需要的主机名&LT/p>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan style=\"color:#66d9ef;\">echo&LT/span>&LTspan> myhostname &LT/span>&LTspan style=\"color:#f92672;\">&ampgt;&LT/span>&LTspan> /etc/hostname\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"dhcp-fu-wu\">Dhcp 服务&LT/h3>\n&LTp>这个关系到装好之后能否&LTstrong>上网&LT/strong>，由于 Vmware 不需要无限 WiFi 什么的所以这里只有有限安装。\nWiFi 驱动安装见这里&LT/p>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>ip link &LT/span>&LTspan style=\"color:#75715e;\"># 查看你的网卡\n&LT/span>&LTspan>systemctl enable dhcpd@ens33 &LT/span>&LTspan style=\"color:#75715e;\"># ens33 通常是你非 lo 的另外一个，可能与我的不一样。\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"she-zhi-mi-ma\">设置密码&LT/h3>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>passwd\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"tian-jia-yong-hu\">添加用户&LT/h3>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan>useradd&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\"> -m&LT/span>&LTspan> username &LT/span>&LTspan style=\"color:#75715e;\"># 创建用户的同时创建 Home 目录\n&LT/span>&LTspan>passwd username &LT/span>&LTspan style=\"color:#75715e;\"># 设置用户密码\n&LT/span>&LT/code>&LT/pre>\n&LTh3 id=\"zhong-qi\">重启&LT/h3>\n&LTpre data-lang=\"bash\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-bash \">&LTcode class=\"language-bash\" data-lang=\"bash\">&LTspan style=\"color:#66d9ef;\">exit\n&LT/span>&LTspan>umount&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\"> -R&LT/span>&LTspan> /mnt\n&LT/span>&LTspan>reboot\n&LT/span>&LT/code>&LT/pre>\n&LThr />\n&LTp>那么系统安装就告一段落了，如果还是不理解可以看下面的这段视频。（配音很尴尬。。）\n&LTembed height=\"415\" width=\"544\" quality=\"high\" allowfullscreen=\"true\" type=\"application/x-shockwave-flash\" src=\"//static.hdslb.com/miniloader.swf\" flashvars=\"aid=12933746&page=1\" pluginspage=\"//www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash\">&LT/embed>&LT/p>\n&LTh2 id=\"wei-wan-dai-xu\">未完待续&LT/h2>\n&LTp>下次将会更新 ArchLinux 安装的 GUI 部分&LT/p>\n","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/","slug":"archlinux-install-guide","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"小白也能上手的 ArchLinux 安装教程","description":null,"updated":null,"date":"2017-10-05T14:24:21+08:00","year":2017,"month":10,"day":5,"taxonomies":{"tags":["ArchLinux"]},"extra":{},"path":"/cn/posts/archlinux-install-guide/","components":["cn","posts","archlinux-install-guide"],"summary":"&LTp>ArchLinux 是一个非常符合我个人哲学的操作系统，深得与我一样的大部分 Pythonista 之心(不好意思代表你们了)。&LT/p>\n","toc":[{"level":2,"id":"shi-yao-shi-archlinux","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#shi-yao-shi-archlinux","title":"什么是 ArchLinux","children":[]},{"level":2,"id":"yuan-ze","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#yuan-ze","title":"原则","children":[{"level":3,"id":"jian-ji","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#jian-ji","title":"简洁","children":[]},{"level":3,"id":"xian-dai","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#xian-dai","title":"现代","children":[]},{"level":3,"id":"shi-yong","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#shi-yong","title":"实用","children":[]},{"level":3,"id":"yi-yong-hu-wei-zhong-xin","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#yi-yong-hu-wei-zhong-xin","title":"以用户为中心","children":[]}]},{"level":2,"id":"an-zhuang","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#an-zhuang","title":"安装","children":[{"level":3,"id":"mu-de","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#mu-de","title":"目的","children":[]},{"level":3,"id":"zhun-bei-jie-duan","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#zhun-bei-jie-duan","title":"准备阶段","children":[]},{"level":3,"id":"chuang-jian-xu-ni-ji","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#chuang-jian-xu-ni-ji","title":"创建虚拟机","children":[]},{"level":3,"id":"wang-luo","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#wang-luo","title":"网络","children":[]},{"level":3,"id":"fen-qu","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#fen-qu","title":"分区","children":[]}]},{"level":2,"id":"an-zhuang-1","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#an-zhuang-1","title":"安装","children":[{"level":3,"id":"geng-huan-jing-xiang","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#geng-huan-jing-xiang","title":"更换镜像","children":[]},{"level":3,"id":"gua-zai-ci-pan","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#gua-zai-ci-pan","title":"挂载磁盘","children":[]},{"level":3,"id":"an-zhuang-xi-tong","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#an-zhuang-xi-tong","title":"安装系统","children":[]}]},{"level":2,"id":"pei-zhi","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#pei-zhi","title":"配置","children":[{"level":3,"id":"fstab","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#fstab","title":"Fstab","children":[]},{"level":3,"id":"chroot","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#chroot","title":"Chroot","children":[]},{"level":3,"id":"shi-qu","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#shi-qu","title":"时区","children":[]},{"level":3,"id":"ben-di-hua","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#ben-di-hua","title":"本地化","children":[]},{"level":3,"id":"hostname","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#hostname","title":"Hostname","children":[]},{"level":3,"id":"dhcp-fu-wu","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#dhcp-fu-wu","title":"Dhcp 服务","children":[]},{"level":3,"id":"she-zhi-mi-ma","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#she-zhi-mi-ma","title":"设置密码","children":[]},{"level":3,"id":"tian-jia-yong-hu","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#tian-jia-yong-hu","title":"添加用户","children":[]},{"level":3,"id":"zhong-qi","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#zhong-qi","title":"重启","children":[]}]},{"level":2,"id":"wei-wan-dai-xu","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/#wei-wan-dai-xu","title":"未完待续","children":[]}],"word_count":2074,"reading_time":11,"assets":[],"draft":false,"lang":"cn","lower":{"relative_path":"posts/liner-in-python.cn.md","content":"&LTp>本篇主要实现四种数据结构，分别是数组、堆栈、队列、链表。我不知道我为什么要用Python来干C干的事情，总之Python就是可以干。&LT/p>\n&LTspan id=\"continue-reading\">&LT/span>\n&LTp>&LTstrong>所有概念性内容可以在参考资料中找到出处&LT/strong>&LT/p>\n&LTh2 id=\"shu-zu\">数组&LT/h2>\n&LTh3 id=\"shu-zu-de-she-ji\">数组的设计&LT/h3>\n&LTp>数组设计之初是在形式上依赖内存分配而成的，所以必须在使用前预先请求空间。这使得数组有以下特性：&LT/p>\n&LTol>\n&LTli>请求空间以后大小固定，不能再改变（数据溢出问题）；&LT/li>\n&LTli>在内存中有空间连续性的表现，中间不会存在其他程序需要调用的数据，为此数组的专用内存空间；&LT/li>\n&LTli>在旧式编程语言中（如有中阶语言之称的C），程序不会对数组的操作做下界判断，也就有潜在的越界操作的风险（比如会把数据写在运行中程序需要调用的核心部分的内存上）。&LT/li>\n&LT/ol>\n&LTp>因为简单数组强烈倚赖电脑硬件之内存，所以不适用于现代的程序设计。欲使用可变大小、硬件无关性的数据类型，Java等程序设计语言均提供了更高级的数据结构：ArrayList、Vector等动态数组。&LT/p>\n&LTh3 id=\"pythonde-shu-zu\">Python的数组&LT/h3>\n&LTp>从严格意义上来说:Python里没有严格意义上的数组。\n&LTcode>List&LT/code>可以说是Python里的数组，下面这段代码是CPython的实现&LTcode>List&LT/code>的结构体:&LT/p>\n&LTpre data-lang=\"c\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-c \">&LTcode class=\"language-c\" data-lang=\"c\">&LTspan style=\"font-style:italic;color:#66d9ef;\">typedef struct &LT/span>&LTspan>{\n&LT/span>&LTspan> PyObject_VAR_HEAD\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">/* Vector of pointers to list elements. list[0] is ob_item[0], etc. */\n&LT/span>&LTspan> PyObject &LT/span>&LTspan style=\"color:#f92672;\">**&LT/span>&LTspan>ob_item;\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">/* ob_item contains space for &amp#39;allocated&amp#39; elements. The number\n&LT/span>&LTspan style=\"color:#75715e;\"> * currently in use is ob_size.\n&LT/span>&LTspan style=\"color:#75715e;\"> * Invariants:\n&LT/span>&LTspan style=\"color:#75715e;\"> * 0 &amplt;= ob_size &amplt;= allocated\n&LT/span>&LTspan style=\"color:#75715e;\"> * len(list) == ob_size\n&LT/span>&LTspan style=\"color:#75715e;\"> * ob_item == NULL implies ob_size == allocated == 0\n&LT/span>&LTspan style=\"color:#75715e;\"> * list.sort() temporarily sets allocated to -1 to detect mutations.\n&LT/span>&LTspan style=\"color:#75715e;\"> *\n&LT/span>&LTspan style=\"color:#75715e;\"> * Items must normally not be NULL, except during construction when\n&LT/span>&LTspan style=\"color:#75715e;\"> * the list is not yet visible outside the function that builds it.\n&LT/span>&LTspan style=\"color:#75715e;\"> */\n&LT/span>&LTspan> Py_ssize_t allocated;\n&LT/span>&LTspan>} PyListObject;\n&LT/span>&LT/code>&LT/pre>\n&LTp>取自&LTa rel=\"nofollow\" href=\"https://github.com/python/cpython/blob/f24143b25e4f83368ff6182bebe14f885073015c/Include/listobject.h\">CPython-Github&LT/a>&LT/p>\n&LTp>还有一篇文章讲&LTa rel=\"nofollow\" href=\"http://www.laurentluce.com/posts/python-list-implementation/\">&LTcode>List&LT/code>实现&LT/a>,感兴趣的朋友可以去看看。&LTa rel=\"nofollow\" href=\"http://python.jobbole.com/82549/\">中文版&LT/a>。&LT/p>\n&LTp>当然，在Python里它就是数组。\n后面的一些结构也将用&LTcode>List&LT/code>来实现。&LT/p>\n&LTh2 id=\"dui-zhan\">堆栈&LT/h2>\n&LTh3 id=\"shi-yao-shi-dui-zhan\">什么是堆栈&LT/h3>\n&LTp>堆栈（英语：stack），也可直接称栈，在计算机科学中，是一种特殊的串列形式的数据结构，它的特殊之处在于只能允许在链接串列或阵列的一端（称为堆叠顶端指标，英语：top）进行加入资料（英语：push）和输出资料（英语：pop）的运算。另外堆叠也可以用一维阵列或连结串列的形式来完成。堆叠的另外一个相对的操作方式称为伫列。&LT/p>\n&LTp>由于堆叠数据结构只允许在一端进行操作，因而按照后进先出（LIFO, Last In First Out）的原理运作。&LT/p>\n&LTh3 id=\"te-dian\">特点&LT/h3>\n&LTul>\n&LTli>先入后出，后入先出。&LT/li>\n&LTli>除头尾节点之外，每个元素有一个前驱，一个后继。&LT/li>\n&LT/ul>\n&LTh3 id=\"cao-zuo\">操作&LT/h3>\n&LTp>从原理可知，对堆栈(栈)可以进行的操作有:&LT/p>\n&LTul>\n&LTli>top():获取堆栈顶端对象&LT/li>\n&LTli>push():向栈里添加一个对象&LT/li>\n&LTli>pop():从栈里推出一个对象&LT/li>\n&LT/ul>\n&LTh3 id=\"shi-xian\">实现&LT/h3>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">class &LT/span>&LTspan style=\"text-decoration:underline;color:#a6e22e;\">my_stack&LT/span>&LTspan>(&LT/span>&LTspan style=\"text-decoration:underline;font-style:italic;color:#a6e22e;\">object&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__init__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">value&LT/span>&LTspan>):\n&LT/span>&LTspan> self.value &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>value\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 前驱\n&LT/span>&LTspan> self.before &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 后继\n&LT/span>&LTspan> self.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__str__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">str&LT/span>&LTspan>(self.value)\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">top&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">stack&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(stack, my_stack):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>stack.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>top(stack.behind)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>stack\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">push&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">stack&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">ele&LT/span>&LTspan>):\n&LT/span>&LTspan> push_ele &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>my_stack(ele)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(stack, my_stack):\n&LT/span>&LTspan> stack_top &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>top(stack)\n&LT/span>&LTspan> push_ele.before &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>stack_top\n&LT/span>&LTspan> push_ele.before.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>push_ele\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">raise &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">Exception&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;不要乱扔东西进来好么&amp#39;&LT/span>&LTspan>)\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">pop&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">stack&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(stack, my_stack):\n&LT/span>&LTspan> stack_top &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>top(stack)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>stack_top.before &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> stack_top.before.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> stack_top.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>stack_top\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">print&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;已经是栈顶了&amp#39;&LT/span>&LTspan>)\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"dui-lie\">队列&LT/h2>\n&LTh3 id=\"shi-yao-shi-dui-lie\">什么是队列&LT/h3>\n&LTp>和堆栈类似，唯一的区别是队列只能在队头进行出队操作，所以队列是是先进先出（FIFO, First-In-First-Out）的线性表&LT/p>\n&LTh3 id=\"te-dian-1\">特点&LT/h3>\n&LTul>\n&LTli>先入先出,后入后出&LT/li>\n&LTli>除尾节点外,每个节点有一个后继&LT/li>\n&LTli>（可选）除头节点外,每个节点有一个前驱&LT/li>\n&LT/ul>\n&LTh3 id=\"cao-zuo-1\">操作&LT/h3>\n&LTul>\n&LTli>push（）:入队&LT/li>\n&LTli>pop（）：出队&LT/li>\n&LT/ul>\n&LTh3 id=\"shi-xian-1\">实现&LT/h3>\n&LTh4 id=\"pu-tong-dui-lie\">普通队列&LT/h4>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">class &LT/span>&LTspan style=\"text-decoration:underline;color:#a6e22e;\">MyQueue&LT/span>&LTspan>():\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__init__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">value&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>):\n&LT/span>&LTspan> self.value &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>value\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 前驱\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># self.before = None\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 后继\n&LT/span>&LTspan> self.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__str__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>self.value &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">str&LT/span>&LTspan>(self.value)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;None&amp#39;\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">create_queue&LT/span>&LTspan>():\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\">&ampquot;&ampquot;&ampquot;仅有队头&ampquot;&ampquot;&ampquot;\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>MyQueue()\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">last&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">queue&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(queue, MyQueue):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>queue.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>last(queue.behind)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>queue\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">push&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">queue&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">ele&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(queue, MyQueue):\n&LT/span>&LTspan> last_queue &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>last(queue)\n&LT/span>&LTspan> new_queue &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>MyQueue(ele)\n&LT/span>&LTspan> last_queue.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>new_queue\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">pop&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">queue&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>queue.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> get_queue &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>queue.behind\n&LT/span>&LTspan> queue.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>queue.behind.behind\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>get_queue\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">print&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;队列里已经没有元素了&amp#39;&LT/span>&LTspan>)\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">print_queue&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">queue&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">print&LT/span>&LTspan>(queue)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>queue.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> print_queue(queue.behind)\n&LT/span>&LT/code>&LT/pre>\n&LTh2 id=\"lian-biao\">链表&LT/h2>\n&LTh3 id=\"shi-yao-shi-lian-biao\">什么是链表&LT/h3>\n&LTp>链表（Linked list）是一种常见的基础数据结构，是一种线性表，但是并不会按线性的顺序存储数据，而是在每一个节点里存到下一个节点的指针(Pointer)。由于不必须按顺序存储，链表在插入的时候可以达到O(1)的复杂度，比另一种线性表顺序表快得多，但是查找一个节点或者访问特定编号的节点则需要O(n)的时间，而顺序表相应的时间复杂度分别是O(logn)和O(1)。&LT/p>\n&LTh3 id=\"te-dian-2\">特点&LT/h3>\n&LTp>使用链表结构可以克服数组链表需要预先知道数据大小的缺点，链表结构可以充分利用计算机内存空间，实现灵活的内存动态管理。但是链表失去了数组随机读取的优点，同时链表由于增加了结点的指针域，空间开销比较大。&LT/p>\n&LTh3 id=\"cao-zuo-2\">操作&LT/h3>\n&LTul>\n&LTli>init():初始化&LT/li>\n&LTli>insert(): 插入&LT/li>\n&LTli>trave(): 遍历&LT/li>\n&LTli>delete(): 删除&LT/li>\n&LTli>find(): 查找&LT/li>\n&LT/ul>\n&LTh3 id=\"shi-xian-2\">实现&LT/h3>\n&LTp>此处仅实现双向列表&LT/p>\n&LTpre data-lang=\"python\" style=\"background-color:#272822;color:#f8f8f2;\" class=\"language-python \">&LTcode class=\"language-python\" data-lang=\"python\">&LTspan style=\"font-style:italic;color:#f92672;\">class &LT/span>&LTspan style=\"text-decoration:underline;color:#a6e22e;\">LinkedList&LT/span>&LTspan>():\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__init__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">value&LT/span>&LTspan style=\"color:#f92672;\">=&LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>):\n&LT/span>&LTspan> self.value &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>value\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 前驱\n&LT/span>&LTspan> self.before &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#75715e;\"># 后继\n&LT/span>&LTspan> self.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan>\n&LT/span>&LTspan> &LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#66d9ef;\">__str__&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">self&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>self.value &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">str&LT/span>&LTspan>(self.value)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;None&amp#39;\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">init&LT/span>&LTspan>():\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>LinkedList(&LT/span>&LTspan style=\"color:#e6db74;\">&amp#39;HEAD&amp#39;&LT/span>&LTspan>)\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">delete&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">linked_list&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(linked_list, LinkedList):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> delete(linked_list.behind)\n&LT/span>&LTspan> linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> linked_list.before &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> linked_list.value &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">insert&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">linked_list&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">index&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">node&LT/span>&LTspan>):\n&LT/span>&LTspan> node &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>LinkedList(node)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(linked_list, LinkedList):\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan>index:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">break\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> linked_list &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>linked_list.behind\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> node.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>linked_list.behind\n&LT/span>&LTspan> linked_list.behind.before &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>node\n&LT/span>&LTspan> node.before, linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>linked_list, node\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">remove&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">linked_list&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">index&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(linked_list, LinkedList):\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan>index:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">break\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> linked_list &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>linked_list.behind\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> linked_list.behind.before &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>linked_list.before\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>linked_list.before &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> linked_list.before.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>linked_list.behind\n&LT/span>&LTspan> linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> linked_list.before &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan> linked_list.value &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">None\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">trave&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">linked_list&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(linked_list, LinkedList):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#66d9ef;\">print&LT/span>&LTspan>(linked_list)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> trave(linked_list.behind)\n&LT/span>&LTspan>\n&LT/span>&LTspan>\n&LT/span>&LTspan style=\"font-style:italic;color:#f92672;\">def &LT/span>&LTspan style=\"color:#a6e22e;\">find&LT/span>&LTspan>(&LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">linked_list&LT/span>&LTspan>, &LT/span>&LTspan style=\"font-style:italic;color:#fd971f;\">index&LT/span>&LTspan>):\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan style=\"color:#66d9ef;\">isinstance&LT/span>&LTspan>(linked_list, LinkedList):\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan style=\"color:#ae81ff;\">0\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">while &LT/span>&LTspan>linked_list.behind &LT/span>&LTspan style=\"color:#f92672;\">is not &LT/span>&LTspan style=\"color:#ae81ff;\">None&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">== &LT/span>&LTspan>index:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>linked_list\n&LT/span>&LTspan> i &LT/span>&LTspan style=\"color:#f92672;\">+= &LT/span>&LTspan style=\"color:#ae81ff;\">1\n&LT/span>&LTspan> linked_list &LT/span>&LTspan style=\"color:#f92672;\">= &LT/span>&LTspan>linked_list.behind\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">else&LT/span>&LTspan>:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">if &LT/span>&LTspan>i &LT/span>&LTspan style=\"color:#f92672;\">&amplt; &LT/span>&LTspan>index:\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">raise &LT/span>&LTspan style=\"font-style:italic;color:#66d9ef;\">Exception&LT/span>&LTspan>(&LT/span>&LTspan style=\"color:#ae81ff;\">404&LT/span>&LTspan>)\n&LT/span>&LTspan> &LT/span>&LTspan style=\"color:#f92672;\">return &LT/span>&LTspan>linked_list\n&LT/span>&LT/code>&LT/pre>\n&LTp>以上所有源代码均在&LTa rel=\"nofollow\" href=\"https://github.com/EINDEX/Python-algorithm\">Github&LT/a>共享，欢迎提出issue或PR，希望与大家共同进步!&LT/p>\n&LThr />\n&LTh2 id=\"can-kao-zi-liao\">参考资料&LT/h2>\n&LTp>Wiki百科: &LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84\">数据结构&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E6%95%B0%E7%BB%84\">数组&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E9%98%9F%E5%88%97\">队列&LT/a>、&LTa rel=\"nofollow\" href=\"https://zh.wikipedia.org/wiki/%E9%93%BE%E8%A1%A8#.E5.88.9D.E5.A7.8B.E5.8C.96.E5.92.8C.E9.94.80.E6.AF.81\">链表&LT/a>&LT/p>\n","permalink":"https://eindex.me/cn/posts/liner-in-python/","slug":"liner-in-python","ancestors":["_index.cn.md","posts/_index.cn.md"],"title":"基本线性数据结构的Python实现","description":null,"updated":null,"date":"2017-10-05T14:33:39+08:00","year":2017,"month":10,"day":5,"taxonomies":{"tags":["Python","Data structure","Linear"],"series":["algorithm"]},"extra":{},"path":"/cn/posts/liner-in-python/","components":["cn","posts","liner-in-python"],"summary":"&LTp>本篇主要实现四种数据结构，分别是数组、堆栈、队列、链表。我不知道我为什么要用Python来干C干的事情，总之Python就是可以干。&LT/p>\n","toc":[{"level":2,"id":"shu-zu","permalink":"https://eindex.me/cn/posts/liner-in-python/#shu-zu","title":"数组","children":[{"level":3,"id":"shu-zu-de-she-ji","permalink":"https://eindex.me/cn/posts/liner-in-python/#shu-zu-de-she-ji","title":"数组的设计","children":[]},{"level":3,"id":"pythonde-shu-zu","permalink":"https://eindex.me/cn/posts/liner-in-python/#pythonde-shu-zu","title":"Python的数组","children":[]}]},{"level":2,"id":"dui-zhan","permalink":"https://eindex.me/cn/posts/liner-in-python/#dui-zhan","title":"堆栈","children":[{"level":3,"id":"shi-yao-shi-dui-zhan","permalink":"https://eindex.me/cn/posts/liner-in-python/#shi-yao-shi-dui-zhan","title":"什么是堆栈","children":[]},{"level":3,"id":"te-dian","permalink":"https://eindex.me/cn/posts/liner-in-python/#te-dian","title":"特点","children":[]},{"level":3,"id":"cao-zuo","permalink":"https://eindex.me/cn/posts/liner-in-python/#cao-zuo","title":"操作","children":[]},{"level":3,"id":"shi-xian","permalink":"https://eindex.me/cn/posts/liner-in-python/#shi-xian","title":"实现","children":[]}]},{"level":2,"id":"dui-lie","permalink":"https://eindex.me/cn/posts/liner-in-python/#dui-lie","title":"队列","children":[{"level":3,"id":"shi-yao-shi-dui-lie","permalink":"https://eindex.me/cn/posts/liner-in-python/#shi-yao-shi-dui-lie","title":"什么是队列","children":[]},{"level":3,"id":"te-dian-1","permalink":"https://eindex.me/cn/posts/liner-in-python/#te-dian-1","title":"特点","children":[]},{"level":3,"id":"cao-zuo-1","permalink":"https://eindex.me/cn/posts/liner-in-python/#cao-zuo-1","title":"操作","children":[]},{"level":3,"id":"shi-xian-1","permalink":"https://eindex.me/cn/posts/liner-in-python/#shi-xian-1","title":"实现","children":[{"level":4,"id":"pu-tong-dui-lie","permalink":"https://eindex.me/cn/posts/liner-in-python/#pu-tong-dui-lie","title":"普通队列","children":[]}]}]},{"level":2,"id":"lian-biao","permalink":"https://eindex.me/cn/posts/liner-in-python/#lian-biao","title":"链表","children":[{"level":3,"id":"shi-yao-shi-lian-biao","permalink":"https://eindex.me/cn/posts/liner-in-python/#shi-yao-shi-lian-biao","title":"什么是链表","children":[]},{"level":3,"id":"te-dian-2","permalink":"https://eindex.me/cn/posts/liner-in-python/#te-dian-2","title":"特点","children":[]},{"level":3,"id":"cao-zuo-2","permalink":"https://eindex.me/cn/posts/liner-in-python/#cao-zuo-2","title":"操作","children":[]},{"level":3,"id":"shi-xian-2","permalink":"https://eindex.me/cn/posts/liner-in-python/#shi-xian-2","title":"实现","children":[]}]},{"level":2,"id":"can-kao-zi-liao","permalink":"https://eindex.me/cn/posts/liner-in-python/#can-kao-zi-liao","title":"参考资料","children":[]}],"word_count":1661,"reading_time":9,"assets":[],"draft":false,"lang":"cn","lower":null,"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/liner-in-python/","title":"基本线性数据结构的Python实现","path":"/home/runner/work/blog/blog/content/posts/liner-in-python.cn.md"}],"backlinks":[]},"higher":null,"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/archlinux-install-guide/","title":"小白也能上手的 ArchLinux 安装教程","path":"/home/runner/work/blog/blog/content/posts/archlinux-install-guide.cn.md"}],"backlinks":[]}],"subsections":[],"translations":[{"lang":"cn","permalink":"https://eindex.me/cn/posts/","title":"Posts","path":"/home/runner/work/blog/blog/content/posts/_index.cn.md"},{"lang":"en","permalink":"https://eindex.me/posts/","title":"Posts","path":"/home/runner/work/blog/blog/content/posts/_index.md"}],"backlinks":[]} <ul class=posts><li><article class=h-entry><section class=header><section class=title-area><a class="series p-category" href=https://eindex.me/cn/series/blog-enhance-plan/>Blog Enhance Plan</a><h1 class="title p-name"><a class=u-url href=https://eindex.me/cn/posts/webmentions/>加入 Webmentions 社区: 新手指导</a></h1></section><section class=meta-area><p style="display: none;" class=p-summary>了解如何加入 Webmentions 社区，提高你的博客与其他网站及其用户的互动性和参与度。</p><span><iconify-icon icon=ant-design:calendar-outlined></iconify-icon> <time class=dt-published>2022-11-06</time> </span><span><iconify-icon icon=bx:time-five></iconify-icon> 6 mins</span><span style=display:none><iconify-icon icon=mdi:eye-outline></iconify-icon> <span id=pv></span> views</span></section></section><div class="p-author h-card" style="display: none;"><img class="u-logo u-photo" src=https://eindex.me/images/avatar.png><a class="p-nickname p-name u-url" href=https://eindex.me>EINDEX</a><p class=p-note>My goal is make happy.</div><section class=main><blockquote><p>本文通过 DeepL 翻译自 <a href=https://eindex.me/posts/webmentions/>Joining the Webmentions Community: A Beginner's Guide</a></blockquote><p>最近我看到了<a href=https://www.owenyoung.com/en/blog/indieweb/ rel=nofollow>Now, I'm in IndieWeb?</a>，了解到了 Webmentions。我发现这个概念非常有趣，于是决定加入我的博客的 Webmentions 社区。<p><a class="-mx-3 font-sm" href=https://eindex.me/cn/posts/webmentions/#continue-reading>Read more →</a></section></article><li><article class=h-entry><section class=header><section class=title-area><h1 class="title p-name"><a class=u-url href=https://eindex.me/cn/posts/my-homelab-introduce/>My HomeLab</a></h1></section><section class=meta-area><p style="display: none;" class=p-summary>&LTp>这篇文章将会介绍一下我的 HomeLab。&LT/p> &LTp>为什么会建设 HomeLab，它给我带来了什么价值？以及为什么是现在的结构，解决了什么问题。&LT/p></p><span><iconify-icon icon=ant-design:calendar-outlined></iconify-icon> <time class=dt-published>2022-05-15</time> </span><span><iconify-icon icon=bx:time-five></iconify-icon> 8 mins</span><span style=display:none><iconify-icon icon=mdi:eye-outline></iconify-icon> <span id=pv></span> views</span></section></section><div class="p-author h-card" style="display: none;"><img class="u-logo u-photo" src=https://eindex.me/images/avatar.png><a class="p-nickname p-name u-url" href=https://eindex.me>EINDEX</a><p class=p-note>My goal is make happy.</div><section class=main><p>这篇文章将会介绍一下我的 HomeLab。<p>为什么会建设 HomeLab，它给我带来了什么价值？以及为什么是现在的结构，解决了什么问题。<p><a class="-mx-3 font-sm" href=https://eindex.me/cn/posts/my-homelab-introduce/#continue-reading>Read more →</a></section></article><li><article class=h-entry><section class=header><section class=title-area><h1 class="title p-name"><a class=u-url href=https://eindex.me/cn/posts/introspection/>反躬自问</a></h1></section><section class=meta-area><p style="display: none;" class=p-summary>&LTh2 id="yuan-qi">缘起&LT/h2> &LTp>事情还得从一次因防疫政策变化导致的“特殊”出差说起。&LT/p> &LTp>人在远离舒适圈的时候，总会经历种种困难与不适，噪音、拥挤、打卡、隔离、被缩短的工期、不合理的政策……都让“出差”成为了一项挑战，而“疫情”和“三年第一次出差”，这两重因素的叠加，更让我对这次出差中将面临的未知感到恐惧，这种恐惧甚至大于好奇。&LT/p> &LTp>下面我会尝试用“自我问答”的方式，记录这次出差的体验与感想。&LT/p></p><span><iconify-icon icon=ant-design:calendar-outlined></iconify-icon> <time class=dt-published>2022-05-02</time> </span><span><iconify-icon icon=bx:time-five></iconify-icon> 9 mins</span><span style=display:none><iconify-icon icon=mdi:eye-outline></iconify-icon> <span id=pv></span> views</span></section></section><div class="p-author h-card" style="display: none;"><img class="u-logo u-photo" src=https://eindex.me/images/avatar.png><a class="p-nickname p-name u-url" href=https://eindex.me>EINDEX</a><p class=p-note>My goal is make happy.</div><section class=main><h2 id=yuan-qi>缘起</h2><p>事情还得从一次因防疫政策变化导致的“特殊”出差说起。<p>人在远离舒适圈的时候，总会经历种种困难与不适，噪音、拥挤、打卡、隔离、被缩短的工期、不合理的政策……都让“出差”成为了一项挑战，而“疫情”和“三年第一次出差”，这两重因素的叠加，更让我对这次出差中将面临的未知感到恐惧，这种恐惧甚至大于好奇。<p>下面我会尝试用“自我问答”的方式，记录这次出差的体验与感想。<p><a class="-mx-3 font-sm" href=https://eindex.me/cn/posts/introspection/#continue-reading>Read more →</a></section></article><li><article class=h-entry><section class=header><section class=title-area><h1 class="title p-name"><a class=u-url href=https://eindex.me/cn/posts/2021-ending/>2021 Ending</a></h1></section><section class=meta-area><p style="display: none;" class=p-summary>&LTp>2021年就要过去了，分享一下我今年都干了些什么事请。 下面会分为几个维度来说。&LT/p> &LTh2 id="zhi-ye">职业&LT/h2> &LTp>今年无缝转职成了安全从业人员，学习到了很多 DevSecOps 的知识，同时了解到安全不仅仅是技术开发，有时候流程安全能比应用安全起到更多更大的作用。这里也要感谢一下我的领导们。&LT/p></p><span><iconify-icon icon=ant-design:calendar-outlined></iconify-icon> <time class=dt-published>2021-12-29</time> </span><span><iconify-icon icon=bx:time-five></iconify-icon> 7 mins</span><span style=display:none><iconify-icon icon=mdi:eye-outline></iconify-icon> <span id=pv></span> views</span></section></section><div class="p-author h-card" style="display: none;"><img class="u-logo u-photo" src=https://eindex.me/images/avatar.png><a class="p-nickname p-name u-url" href=https://eindex.me>EINDEX</a><p class=p-note>My goal is make happy.</div><section class=main><p>2021年就要过去了，分享一下我今年都干了些什么事请。 下面会分为几个维度来说。<h2 id=zhi-ye>职业</h2><p>今年无缝转职成了安全从业人员，学习到了很多 DevSecOps 的知识，同时了解到安全不仅仅是技术开发，有时候流程安全能比应用安全起到更多更大的作用。这里也要感谢一下我的领导们。<p><a class="-mx-3 font-sm" href=https://eindex.me/cn/posts/2021-ending/#continue-reading>Read more →</a></section></article><li><article class=h-entry><section class=header><section class=title-area><a class="series p-category" href=https://eindex.me/cn/series/algorithm/>Algorithm</a><h1 class="title p-name"><a class=u-url href=https://eindex.me/cn/posts/beancount-introduce/>复式记账工具 Beancount</a></h1></section><section class=meta-area><p style="display: none;" class=p-summary>&LTp>本文简单介绍一下复式记账和 Beancount 的使用方法。&LT/p></p><span><iconify-icon icon=ant-design:calendar-outlined></iconify-icon> <time class=dt-published>2019-11-30</time> </span><span><iconify-icon icon=bx:time-five></iconify-icon> 6 mins</span><span style=display:none><iconify-icon icon=mdi:eye-outline></iconify-icon> <span id=pv></span> views</span></section></section><div class="p-author h-card" style="display: none;"><img class="u-logo u-photo" src=https://eindex.me/images/avatar.png><a class="p-nickname p-name u-url" href=https://eindex.me>EINDEX</a><p class=p-note>My goal is make happy.</div><section class=main><p>本文简单介绍一下复式记账和 Beancount 的使用方法。<p><a class="-mx-3 font-sm" href=https://eindex.me/cn/posts/beancount-introduce/#continue-reading>Read more →</a></section></article><li><article class=h-entry><section class=header><section class=title-area><h1 class="title p-name"><a class=u-url href=https://eindex.me/cn/posts/one-hundred-line-async-crawler/>一百行代码实现异步爬虫</a></h1></section><section class=meta-area><p style="display: none;" class=p-summary>&LTp>一个优雅的爬虫需要一下这些东西：&LT/p> &LTul> &LTli>请求器&LT/li> &LTli>页面解析器&LT/li> &LTli>链接生成器&LT/li> &LTli>调度器&LT/li> &LT/ul></p><span><iconify-icon icon=ant-design:calendar-outlined></iconify-icon> <time class=dt-published>2019-09-07</time> </span><span><iconify-icon icon=bx:time-five></iconify-icon> 3 mins</span><span style=display:none><iconify-icon icon=mdi:eye-outline></iconify-icon> <span id=pv></span> views</span></section></section><div class="p-author h-card" style="display: none;"><img class="u-logo u-photo" src=https://eindex.me/images/avatar.png><a class="p-nickname p-name u-url" href=https://eindex.me>EINDEX</a><p class=p-note>My goal is make happy.</div><section class=main><p>一个优雅的爬虫需要一下这些东西：<ul><li>请求器<li>页面解析器<li>链接生成器<li>调度器</ul><p><a class="-mx-3 font-sm" href=https://eindex.me/cn/posts/one-hundred-line-async-crawler/#continue-reading>Read more →</a></section></article><li><article class=h-entry><section class=header><section class=title-area><h1 class="title p-name"><a class=u-url href=https://eindex.me/cn/posts/1984-after-reading/>1984</a></h1></section><section class=meta-area><p style="display: none;" class=p-summary>&LTp>这本书看了很久了，下面这句话一直环绕在我脑中，始终不能忘记。&LT/p> &LTblockquote> &LTp>“老大哥在看着你。”&LT/p> &LT/blockquote></p><span><iconify-icon icon=ant-design:calendar-outlined></iconify-icon> <time class=dt-published>2019-09-02</time> </span><span><iconify-icon icon=bx:time-five></iconify-icon> 4 mins</span><span style=display:none><iconify-icon icon=mdi:eye-outline></iconify-icon> <span id=pv></span> views</span></section></section><div class="p-author h-card" style="display: none;"><img class="u-logo u-photo" src=https://eindex.me/images/avatar.png><a class="p-nickname p-name u-url" href=https://eindex.me>EINDEX</a><p class=p-note>My goal is make happy.</div><section class=main><p>这本书看了很久了，下面这句话一直环绕在我脑中，始终不能忘记。<blockquote><p>“老大哥在看着你。”</blockquote><p><a class="-mx-3 font-sm" href=https://eindex.me/cn/posts/1984-after-reading/#continue-reading>Read more →</a></section></article><li><article class=h-entry><section class=header><section class=title-area><a class="series p-category" href=https://eindex.me/cn/series/algorithm/>Algorithm</a><h1 class="title p-name"><a class=u-url href=https://eindex.me/cn/posts/inverted-index/>倒排索引</a></h1></section><section class=meta-area><p style="display: none;" class=p-summary>&LTp>世界上最伟大的互联网产品,说是搜索引擎,绝对没有别的产品可以替代,尤其是伟大的先在市场占用率最高的搜索引擎,Google Search.&LT/p> &LTp>还有很多差一大截的,比如 Bing, Yahoo 和 YANDEX.&LT/p></p><span><iconify-icon icon=ant-design:calendar-outlined></iconify-icon> <time class=dt-published>2019-08-27</time> </span><span><iconify-icon icon=bx:time-five></iconify-icon> 5 mins</span><span style=display:none><iconify-icon icon=mdi:eye-outline></iconify-icon> <span id=pv></span> views</span></section></section><div class="p-author h-card" style="display: none;"><img class="u-logo u-photo" src=https://eindex.me/images/avatar.png><a class="p-nickname p-name u-url" href=https://eindex.me>EINDEX</a><p class=p-note>My goal is make happy.</div><section class=main><p>世界上最伟大的互联网产品,说是搜索引擎,绝对没有别的产品可以替代,尤其是伟大的先在市场占用率最高的搜索引擎,Google Search.<p>还有很多差一大截的,比如 Bing, Yahoo 和 YANDEX.<p><a class="-mx-3 font-sm" href=https://eindex.me/cn/posts/inverted-index/#continue-reading>Read more →</a></section></article><li><article class=h-entry><section class=header><section class=title-area><h1 class="title p-name"><a class=u-url href=https://eindex.me/cn/posts/tornado-auto-etag/>Tornado Auto Etag 机制</a></h1></section><section class=meta-area><p style="display: none;" class=p-summary>&LTp>为了研究缓存看了 tornado &LTcode>web.py&LT/code> 里的 &LTcode>finish&LT/code> 函数&LT/p></p><span><iconify-icon icon=ant-design:calendar-outlined></iconify-icon> <time class=dt-published>2019-04-24</time> </span><span><iconify-icon icon=bx:time-five></iconify-icon> 2 mins</span><span style=display:none><iconify-icon icon=mdi:eye-outline></iconify-icon> <span id=pv></span> views</span></section></section><div class="p-author h-card" style="display: none;"><img class="u-logo u-photo" src=https://eindex.me/images/avatar.png><a class="p-nickname p-name u-url" href=https://eindex.me>EINDEX</a><p class=p-note>My goal is make happy.</div><section class=main><p>为了研究缓存看了 tornado <code>web.py</code> 里的 <code>finish</code> 函数<p><a class="-mx-3 font-sm" href=https://eindex.me/cn/posts/tornado-auto-etag/#continue-reading>Read more →</a></section></article><li><article class=h-entry><section class=header><section class=title-area><h1 class="title p-name"><a class=u-url href=https://eindex.me/cn/posts/pipenv-autoenv/>Pipenv + Autoenv 更友善的工作环境</a></h1></section><section class=meta-area><p style="display: none;" class=p-summary>&LTp>Python 包管理一直都是一个问题，如今 3.6 推荐采用 Pipenv 出自 Requests 的大牛做所。配合上他写的 Autoenv 切换环境再也不是问题。&LT/p></p><span><iconify-icon icon=ant-design:calendar-outlined></iconify-icon> <time class=dt-published>2018-09-05</time> </span><span><iconify-icon icon=bx:time-five></iconify-icon> 2 mins</span><span style=display:none><iconify-icon icon=mdi:eye-outline></iconify-icon> <span id=pv></span> views</span></section></section><div class="p-author h-card" style="display: none;"><img class="u-logo u-photo" src=https://eindex.me/images/avatar.png><a class="p-nickname p-name u-url" href=https://eindex.me>EINDEX</a><p class=p-note>My goal is make happy.</div><section class=main><p>Python 包管理一直都是一个问题，如今 3.6 推荐采用 Pipenv 出自 Requests 的大牛做所。配合上他写的 Autoenv 切换环境再也不是问题。<p><a class="-mx-3 font-sm" href=https://eindex.me/cn/posts/pipenv-autoenv/#continue-reading>Read more →</a></section></article><li><article class=h-entry><section class=header><section class=title-area><a class="series p-category" href=https://eindex.me/cn/series/algorithm/>Algorithm</a><h1 class="title p-name"><a class=u-url href=https://eindex.me/cn/posts/kmp/>KMP 算法</a></h1></section><section class=meta-area><p style="display: none;" class=p-summary>&LTblockquote> &LTp>在计算机科学中，Knuth-Morris-Pratt字符串查找算法（简称为KMP算法）可在一个主文本字符串S内查找一个词W的出现位置。此算法通过运用对这个词在不匹配时本身就包含足够的信息来确定下一个匹配将在哪里开始的发现，从而避免重新检查先前匹配的字符。&LT/p> &LT/blockquote></p><span><iconify-icon icon=ant-design:calendar-outlined></iconify-icon> <time class=dt-published>2018-05-11</time> </span><span><iconify-icon icon=bx:time-five></iconify-icon> 4 mins</span><span style=display:none><iconify-icon icon=mdi:eye-outline></iconify-icon> <span id=pv></span> views</span></section></section><div class="p-author h-card" style="display: none;"><img class="u-logo u-photo" src=https://eindex.me/images/avatar.png><a class="p-nickname p-name u-url" href=https://eindex.me>EINDEX</a><p class=p-note>My goal is make happy.</div><section class=main><blockquote><p>在计算机科学中，Knuth-Morris-Pratt字符串查找算法（简称为KMP算法）可在一个主文本字符串S内查找一个词W的出现位置。此算法通过运用对这个词在不匹配时本身就包含足够的信息来确定下一个匹配将在哪里开始的发现，从而避免重新检查先前匹配的字符。</blockquote><p><a class="-mx-3 font-sm" href=https://eindex.me/cn/posts/kmp/#continue-reading>Read more →</a></section></article><li><article class=h-entry><section class=header><section class=title-area><a class="series p-category" href=https://eindex.me/cn/series/algorithm/>Algorithm</a><h1 class="title p-name"><a class=u-url href=https://eindex.me/cn/posts/tree-in-python/>Tree in Python</a></h1></section><section class=meta-area><p style="display: none;" class=p-summary>&LTp>树是计算机科学中常用的数据结构之一,常见的地方有，Java 的继承树等。 还有一些基于树的特殊数据结构，比如二叉树，B 树，等等。&LT/p> &LTp>本篇会讲述一些关于简单关于树的操作。&LT/p></p><span><iconify-icon icon=ant-design:calendar-outlined></iconify-icon> <time class=dt-published>2018-04-08</time> </span><span><iconify-icon icon=bx:time-five></iconify-icon> 7 mins</span><span style=display:none><iconify-icon icon=mdi:eye-outline></iconify-icon> <span id=pv></span> views</span></section></section><div class="p-author h-card" style="display: none;"><img class="u-logo u-photo" src=https://eindex.me/images/avatar.png><a class="p-nickname p-name u-url" href=https://eindex.me>EINDEX</a><p class=p-note>My goal is make happy.</div><section class=main><p>树是计算机科学中常用的数据结构之一,常见的地方有，Java 的继承树等。 还有一些基于树的特殊数据结构，比如二叉树，B 树，等等。<p>本篇会讲述一些关于简单关于树的操作。<p><a class="-mx-3 font-sm" href=https://eindex.me/cn/posts/tree-in-python/#continue-reading>Read more →</a></section></article><li><article class=h-entry><section class=header><section class=title-area><h1 class="title p-name"><a class=u-url href=https://eindex.me/cn/posts/sort-in-python/>基本排序算法的Python实现</a></h1></section><section class=meta-area><p style="display: none;" class=p-summary>&LTp>本篇主要实现九(八）大排序算法，分别是冒泡排序，插入排序，选择排序，希尔排序，归并排序，快速排序，堆排序,计数排序。希望大家回顾知识的时候也能从我的这篇文章得到帮助。&LT/p></p><span><iconify-icon icon=ant-design:calendar-outlined></iconify-icon> <time class=dt-published>2017-10-05</time> </span><span><iconify-icon icon=bx:time-five></iconify-icon> 16 mins</span><span style=display:none><iconify-icon icon=mdi:eye-outline></iconify-icon> <span id=pv></span> views</span></section></section><div class="p-author h-card" style="display: none;"><img class="u-logo u-photo" src=https://eindex.me/images/avatar.png><a class="p-nickname p-name u-url" href=https://eindex.me>EINDEX</a><p class=p-note>My goal is make happy.</div><section class=main><p>本篇主要实现九(八）大排序算法，分别是冒泡排序，插入排序，选择排序，希尔排序，归并排序，快速排序，堆排序,计数排序。希望大家回顾知识的时候也能从我的这篇文章得到帮助。<p><a class="-mx-3 font-sm" href=https://eindex.me/cn/posts/sort-in-python/#continue-reading>Read more →</a></section></article><li><article class=h-entry><section class=header><section class=title-area><h1 class="title p-name"><a class=u-url href=https://eindex.me/cn/posts/thoughtworks-one-month/>Thoughtworks 一月</a></h1></section><section class=meta-area><p style="display: none;" class=p-summary>&LTp>距离加入 Thoughtworks 已有一个月。 这家公司也并非互联网公司，没有高强度的工作节奏，没有996，有一些敏捷信仰。 对于武汉来说，也算是一个优秀的公司。&LT/p> &LTp>同时正如网上所言：该有的缺点也是有的。好奇的同学可以去看一下我的编程引路人（也是我司黑粉头子）耗子叔（陈皓）的文章。&LT/p></p><span><iconify-icon icon=ant-design:calendar-outlined></iconify-icon> <time class=dt-published>2017-10-05</time> </span><span><iconify-icon icon=bx:time-five></iconify-icon> 3 mins</span><span style=display:none><iconify-icon icon=mdi:eye-outline></iconify-icon> <span id=pv></span> views</span></section></section><div class="p-author h-card" style="display: none;"><img class="u-logo u-photo" src=https://eindex.me/images/avatar.png><a class="p-nickname p-name u-url" href=https://eindex.me>EINDEX</a><p class=p-note>My goal is make happy.</div><section class=main><p>距离加入 Thoughtworks 已有一个月。 这家公司也并非互联网公司，没有高强度的工作节奏，没有996，有一些敏捷信仰。 对于武汉来说，也算是一个优秀的公司。<p>同时正如网上所言：该有的缺点也是有的。好奇的同学可以去看一下我的编程引路人（也是我司黑粉头子）耗子叔（陈皓）的文章。<p><a class="-mx-3 font-sm" href=https://eindex.me/cn/posts/thoughtworks-one-month/#continue-reading>Read more →</a></section></article><li><article class=h-entry><section class=header><section class=title-area><a class="series p-category" href=https://eindex.me/cn/series/algorithm/>Algorithm</a><h1 class="title p-name"><a class=u-url href=https://eindex.me/cn/posts/liner-in-python/>基本线性数据结构的Python实现</a></h1></section><section class=meta-area><p style="display: none;" class=p-summary>&LTp>本篇主要实现四种数据结构，分别是数组、堆栈、队列、链表。我不知道我为什么要用Python来干C干的事情，总之Python就是可以干。&LT/p></p><span><iconify-icon icon=ant-design:calendar-outlined></iconify-icon> <time class=dt-published>2017-10-05</time> </span><span><iconify-icon icon=bx:time-five></iconify-icon> 9 mins</span><span style=display:none><iconify-icon icon=mdi:eye-outline></iconify-icon> <span id=pv></span> views</span></section></section><div class="p-author h-card" style="display: none;"><img class="u-logo u-photo" src=https://eindex.me/images/avatar.png><a class="p-nickname p-name u-url" href=https://eindex.me>EINDEX</a><p class=p-note>My goal is make happy.</div><section class=main><p>本篇主要实现四种数据结构，分别是数组、堆栈、队列、链表。我不知道我为什么要用Python来干C干的事情，总之Python就是可以干。<p><a class="-mx-3 font-sm" href=https://eindex.me/cn/posts/liner-in-python/#continue-reading>Read more →</a></section></article><li><article class=h-entry><section class=header><section class=title-area><h1 class="title p-name"><a class=u-url href=https://eindex.me/cn/posts/archlinux-install-guide/>小白也能上手的 ArchLinux 安装教程</a></h1></section><section class=meta-area><p style="display: none;" class=p-summary>&LTp>ArchLinux 是一个非常符合我个人哲学的操作系统，深得与我一样的大部分 Pythonista 之心(不好意思代表你们了)。&LT/p></p><span><iconify-icon icon=ant-design:calendar-outlined></iconify-icon> <time class=dt-published>2017-10-05</time> </span><span><iconify-icon icon=bx:time-five></iconify-icon> 11 mins</span><span style=display:none><iconify-icon icon=mdi:eye-outline></iconify-icon> <span id=pv></span> views</span></section></section><div class="p-author h-card" style="display: none;"><img class="u-logo u-photo" src=https://eindex.me/images/avatar.png><a class="p-nickname p-name u-url" href=https://eindex.me>EINDEX</a><p class=p-note>My goal is make happy.</div><section class=main><p>ArchLinux 是一个非常符合我个人哲学的操作系统，深得与我一样的大部分 Pythonista 之心(不好意思代表你们了)。<p><a class="-mx-3 font-sm" href=https://eindex.me/cn/posts/archlinux-install-guide/#continue-reading>Read more →</a></section></article></ul></main><aside></aside></div><footer class=footer><span class=webring> <a href=https://xn--sr8hvo.ws/%F0%9F%95%90%F0%9F%89%91%F0%9F%88%B6/previous>←</a> An IndieWeb Webring 🕸💍 <a href=https://xn--sr8hvo.ws/%F0%9F%95%90%F0%9F%89%91%F0%9F%88%B6/next>→</a> </span><link href=https://github.com/EINDEX rel=me></footer></div></body><script async data-domains=eindex.me data-host-url=https://u.eindex.me data-website-id=692d9153-7341-4370-b652-60df196f2b31 defer src=/js/umami.js></script><script>window.twttr = (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0],
      t = window.twttr || {};
    if (d.getElementById(id)) return t;
    js = d.createElement(s);
    js.id = id;
    js.src = "https://platform.twitter.com/widgets.js?omit_script=true";
    fjs.parentNode.insertBefore(js, fjs);
  
    t._e = [];
    t.ready = function(f) {
      t._e.push(f);
    };
  
    return t;
  }(document, "script", "twitter-wjs"));</script>