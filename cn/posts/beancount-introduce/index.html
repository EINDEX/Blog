<!doctype html><html charset=utf-8 lang=en><head><link href=https://eindex.me/cn/feed.xml rel=alternate title=RSS type=application/rss+xml><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="text/html; charset=utf-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1.0,maximum-scale=1" name=viewport><meta content=EINDEX itemprop=author name=author><title>复式记账工具 Beancount • EINDEX's Blog</title><meta content="复式记账工具 Beancount • EINDEX's Blog" property=og:title><meta charset=utf-8><link href="https://eindex.me/css/index.css?h=eaa229b7f71aaaaf4aa90c7f6087c589cc85e1ee3c3e4cc1c34d307e887dcf70" rel=stylesheet><style>@-moz-document url-prefix() {.lazy:-moz-loading {visibility:hidden;}}.ieOnly {display: none;}@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {.ieOnly {display: block;}}</style><link href=https://webmention.io/eindex.me/webmention rel=webmention><link href=https://webmention.io/eindex.me/xmlrpc rel=pingback><script src=https://cdn.jsdelivr.net/npm/iconify-icon@1.0.1/dist/iconify-icon.min.js></script><link href=/favicon-512.png rel=apple-touch-icon sizes=512x512><link href=/favicon-512.png rel=icon sizes=512x512 type=image/png><link href=/favicon-192.png rel=icon sizes=192x192 type=image/png><link href=/manifest.json rel=manifest><meta content=https://eindex.me/cn/posts/beancount-introduce/ property=og:url><meta content="EINDEX's Blog" property=og:site_name><meta content=https://eindex.me/images/avatar.png property=og:image><meta content=summary name=twitter:card><meta content="复式记账工具 Beancount" name=twitter:title><meta content=@eindex_li name=twitter:site><meta content=@eindex_li name=twitter:creator><meta content=https://eindex.me/images/avatar.png name=twitter:image><script type=application/ld+json>
{
  "@context": "https://schema.org/",
  "@type": "BlogPosting",
  "headline": "复式记账工具 Beancount",
  "image": "https://eindex.me/images/avatar.png",
  
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://eindex.me/cn/posts/beancount-introduce/"
  },
  
  "datePublished": "2019-11-30",
  
  
  "author": {
    "@type": "Person",
    "name": "EINDEX",
    "url": "https://eindex.me/about"
  },
  "publisher": {
    "@type": "Organization",
    "name": "EINDEX's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://eindex.me/images/avatar.png"
    }
  },
  "keywords": ["投资","Beancount"]
}
</script><script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1265138627025369" async crossorigin=anonymous></script><body><div class=all><header><nav class=navbar><div class=avatar><a class=site-link href=https://eindex.me/cn/><img alt=Workflow class=avatar src=https://eindex.me/processed_images/e75389feba7c019600.png></a></div><div class=menus><a href=https://eindex.me/cn/gallery/>相册</a><a href=https://eindex.me/cn/archive/>归档</a></div><div class=switcher><a class="language switch" href=https://eindex.me/><iconify-icon icon=ri:english-input></iconify-icon></a></div></nav></header><div class=content><main><article class=h-entry data-clarity-region=article><section class=header><section class=title-area><h1 class="title p-name"><a class=u-url href=https://eindex.me/cn/posts/beancount-introduce/>复式记账工具 Beancount</a></h1></section><section class=meta-area><p style="display: none;" class=p-summary>&LTp>本文简单介绍一下复式记账和 Beancount 的使用方法。&LT/p></p><span><iconify-icon icon=ant-design:calendar-outlined></iconify-icon> <time class=dt-published>2019-11-30</time></span><span><iconify-icon icon=fluent:mail-inbox-16-regular></iconify-icon><a class=categories href=https://eindex.me/cn/categories/tou-zi/>投资</a></span><span><iconify-icon icon=bx:time-five></iconify-icon> 6 mins</span></section></section><div class="p-author h-card" style="display: none;"><img class="u-logo u-photo" src=https://eindex.me/images/avatar.png><a class="p-nickname p-name u-url" href=https://eindex.me>EINDEX</a><p class=p-note>My goal is make happy.</div><section class="main e-content"><p>本文简单介绍一下复式记账和 Beancount 的使用方法。</p><span id=continue-reading></span><h2 id=wei-shi-yao-yao-ji-zhang>为什么要记账</h2><p>记账是理财的第一步，熟话说得好：”你不理财，才不理你。“<p>记账可以明确自己每一笔钱花在哪去了，这个月最大的开销是什么，以及对自己的冲动消费、不必要消费能有一个反思。<p>我曾使用过很多记账软件如：挖财、随手记、网易有钱、MoneyWiz、MOZE 等，其实记账最大的问题在于很难坚持下来，因为短期来看记账的收益并不高，而从长远来看，账本也能体现经济的健康状况。<h2 id=fu-shi-ji-zhang-shi-shi-yao>复式记账是什么</h2><p>复式记账（Double Entry Bookkeeping）是以资产与权益平衡关系作为记账基础，对每一笔账单，都要以相等的金额在两个相互联系的账户中进行记录。<p>原理： <code>资产 = 负债 + 所有者权益</code><p>复式记账的优点是：<ul><li>账户对应关系清楚，可以鲜明的表示各种经济活动的来龙去脉。<li>有借必有贷，借贷必相等的记账方式，对于检查账单是否记对非常有帮助。</ul><h2 id=he-wei-beancount>何为 Beancount</h2><p>Beancount 是一个用 Python 实现的开源复式记账软件。<p>数据文件基于纯文本，所以不用担心程序出问题，数据没法看懂。<p>Beancount（fava）的界面大概是这个样子。 <img alt=-w2638 src=https://eindex.me/cn/posts/beancount-introduce/media/15676038764861/15676114899083.jpg> <img alt=-w1319 src=https://eindex.me/cn/posts/beancount-introduce/media/15676038764861/15676115071325.jpg><p>Beancount 的优点：<ol><li>开源，可以自己写功能。<li>数据基于纯文本，自己掌握所有数据，不担心隐私泄露。<li>支持各种图标，支持SQL查询生成报表。<li>支持预算（fava）。<li>支持无限账本、无限账户、无限币种。<li>可以导入各种账单文件（有些需要写代码支持）。<li>可以用 Git、iCloud 等工具来管理账本。</ol><p>不仅如此，Beancount 还可以量化年假，产假等等非标准金融标的。<p>例如讲公司年假记为一笔收入，从公司账户转入到个人账户，成为资产。使用掉年假，则把年假从个人资产转出到消费即可。这样就相当于把年假消费掉了。而年假的货币单位可以设置成 Day。<p>写在 Beancount 里大概是这个样子。<pre class=language-beancount data-lang=beancount style=background-color:#272822;color:#f8f8f2;><code class=language-beancount data-lang=beancount><span>2019-04-24 * "CompanyName" "请假一天休息"
</span><span>  Assets:Leave                              -1.00 DAY
</span><span>  Expenses:Health
</span><span>
</span><span>2019-04-01 * "CompanyName" "年假-初始化"
</span><span>  Income:Job:CompanyName:Leave
</span><span>  Assets:Leave                                 +7.00 DAY
</span></code></pre><h2 id=ji-ben-yu-fa>基本语法</h2><h3 id=ji-ben-ge-shi>基本格式</h3><pre style=background-color:#272822;color:#f8f8f2;><code><span>YYYY-MM-DD &LTdirective> &LTarguments...>
</span></code></pre><h3 id=chuang-jian-huo-bi>创建货币</h3><pre style=background-color:#272822;color:#f8f8f2;><code><span>option "operating_currency" "CNY"
</span></code></pre><h3 id=zhang-hu-xiang-guan>账户相关</h3><p>创建账户<pre style=background-color:#272822;color:#f8f8f2;><code><span>1970-01-01 open Assets:Bank:ABC CNY
</span></code></pre><p>备注账户<pre style=background-color:#272822;color:#f8f8f2;><code><span>1970-01-01 note Assets:Bank:ABC "农行卡"
</span></code></pre><p>关闭帐户，账户关闭后就可以在现实界面上过滤掉已经关闭的账户。<pre style=background-color:#272822;color:#f8f8f2;><code><span>1970-01-02 close Assets:Bank:ABC
</span></code></pre><h3 id=jiao-yi>交易</h3><p>这是单笔简单交易的写法，表示我去美食风暴用微信支付吃了个盒饭。<pre style=background-color:#272822;color:#f8f8f2;><code><span>2019-08-02 * "美食风暴" "盒饭"
</span><span>  Assets:Wechat:EINDEX                                  -18 CNY
</span><span>  Expenses:Food:Restaurant:Lunch       
</span></code></pre><h3 id=she-zhi-jie-ge>设置价格</h3><p>可以这是各种“货币”之间的价格转换。如果用上程序员思维，我们就可以实现股票价格跟踪、汇率跟踪等等。来提高账本的准确度。<pre style=background-color:#272822;color:#f8f8f2;><code><span>2019-10-01 price USD 7 CNY
</span></code></pre><h3 id=yu-e-zi-dong-she-zhi>余额自动设置</h3><p>这是一个偷懒必备功能，下面的 <code>pad</code>，我农行卡自动平账使用<code>Equity:Opening-Balances</code>，明天的 <code>balance</code> 表示在 2019年10月02日时这张卡的余额为4000CNY，如果旧的账单不平就会从<code>Equity:Opening-Balances</code>自动平账。<pre style=background-color:#272822;color:#f8f8f2;><code><span>2019-10-01 pad Assets:Bank:ABC Equity:Opening-Balances
</span><span>
</span><span>2019-10-02 balance Assets:Bank:ABC 4000 CNY
</span></code></pre><p>如果未来要在这个账户过去的账目上做删改，2019年10月1日的余额也会是4000元不变。<h2 id=shi-yong-beancount>使用 Beancount</h2><p>首先需要安装 Python 3，然后安装 beancount、fava。<pre style=background-color:#272822;color:#f8f8f2;><code><span>pip install beancount fava
</span></code></pre><p><code>fava</code> 是 beancount 的一个 WebUI 实现，可以可视化的看见自己的账本。<h3 id=example>Example</h3><p>官方提供了一个 Beancount 的使用用例。<pre style=background-color:#272822;color:#f8f8f2;><code><span>bean-example > example.bean
</span><span>fava example.bean
</span></code></pre><p>然后打开 <code>localhost:5000</code> 就可以在本地体验 Beancount 与 fava 了。<p><img alt=-w1315 src=https://eindex.me/cn/posts/beancount-introduce/media/15676038764861/15676114399432.jpg></section><section class=post-footer><div class=tags><span class=tag><a href=https://eindex.me/cn/tags/beancount/>Beancount</a></span></div></section><section class=backlinks><h3>反向链接</h3><p><a href=https://eindex.me/cn/posts/my-homelab-introduce/>My HomeLab</a></section><section style="display: none;" class=comments id=giscus><script async crossorigin=anonymous data-category-id=DIC_kwDOGWb6Ys4CAKn- data-emit-metadata=0 data-lang=zh-CN data-mapping=pathname data-reactions-enabled=1 data-repo=EINDEX/blog data-repo-id=R_kgDOGWb6Yg data-theme=light src=https://giscus.app/client.js></script></section><button onclick='document.getElementById("giscus").style="";document.getElementById("giscus-button").style="display:none";' id=giscus-button>Loading Comments</button></article></main><aside></aside></div><footer class=footer><span class=webring> <a href=https://xn--sr8hvo.ws/%F0%9F%95%90%F0%9F%89%91%F0%9F%88%B6/previous>←</a> An IndieWeb Webring 🕸💍 <a href=https://xn--sr8hvo.ws/%F0%9F%95%90%F0%9F%89%91%F0%9F%88%B6/next>→</a> </span><link href=https://github.com/EINDEX rel=me></footer></div>