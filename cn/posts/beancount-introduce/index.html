


  
  


<!DOCTYPE html>
<html lang="en" charset="utf-8">
  <head>
    

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SR36ZS0R52"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  
  var page_link = new URL(window.location.href);
  gtag('js', new Date());
  gtag('config', 'G-SR36ZS0R52', {
    traffic_type: page_link.searchParams.get("traffic_type")
  });
  gtag('set', {
    traffic_type: page_link.searchParams.get("traffic_type")
  })
  

</script>









  
    
    <link rel="alternate" type="application/rss+xml" title="RSS" href="https://eindex.me/cn/feed.xml">
    
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <meta name="author" itemprop="author" content="EINDEX">
  
  <title>复式记账工具 Beancount &bull; EINDEX&#x27;s Blog</title>
  <meta property="og:title" content="复式记账工具 Beancount &bull; EINDEX&#x27;s Blog" />
  

  <!-- Required meta tags -->
  <meta charset="utf-8" />


  <!-- **** BEGINNING, favicons **** -->

  <!-- generics -->

  <!-- iOS -->

  <!-- Android -->

  <!-- Windows 8, IE 10 -->

  <!-- Windows 8.1 and up, IE 11 -->

  <!-- **** CONCLUSION, favicons **** -->

  <!-- CSS/SCSS -->
  <link rel="stylesheet" href="https://eindex.me/css/index.css?h=b94c9aaab34db6e206c8e50c66b697c0be3fa2b7d4985a38d5c03fb5a95facd0" />  <style>@-moz-document url-prefix() {.lazy:-moz-loading {visibility:hidden;}}.ieOnly {display: none;}@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {.ieOnly {display: block;}}</style>


  <link rel="webmention" href="https://webmention.io/eindex.me/webmention" />
  <link rel="pingback" href="https://webmention.io/eindex.me/xmlrpc" />

  <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.1/dist/iconify-icon.min.js"></script>
  
  
  <link rel="apple-touch-icon" sizes="512x512" href="/favicon-512.png">
  
  <link rel="icon" type="image/png" sizes="512x512" href="/favicon-512.png">
  
  
  <link rel="icon" type="image/png" sizes="192x192" href="/favicon-192.png">
  
  <link rel="manifest" href="/manifest.json">
  <meta name="twitter:dnt" content="on">
  <meta name="twitter:widgets:csp" content="on">
  



  
    
  

  
    
  





<meta property="og:url" content="https://eindex.me/cn/posts/beancount-introduce/">
<meta property="og:site_name" content="EINDEX&#x27;s Blog">
<meta property="og:image" content="https://eindex.me/images/avatar.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="复式记账工具 Beancount">

<meta name="twitter:site" content="@eindex_li">
<meta name="twitter:creator" content="@eindex_li">
<meta name="twitter:image" content="https://eindex.me/images/avatar.png">
<link
  rel="me"
  href="https://twitter.com/eindex_li">
<script type="application/ld+json">
{
  "@context": "https://schema.org/",
  "@type": "BlogPosting",
  "headline": "复式记账工具 Beancount",
  "image": "https://eindex.me/images/avatar.png",
  
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://eindex.me/cn/posts/beancount-introduce/"
  },
  
  "datePublished": "2019-11-30",
  
  
  "author": {
    "@type": "Person",
    "name": "EINDEX",
    "url": "https://eindex.me/about"
  },
  "publisher": {
    "@type": "Organization",
    "name": "EINDEX's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://eindex.me/images/avatar.png"
    }
  },
  "keywords": ["Beancount","algorithm"]
}
</script>

  
  <link
rel="stylesheet"
href="https://cdn.jsdelivr.net/npm/docs-searchbar.js@2.4.1/dist/cdn/docs-searchbar.min.css"
/>
  
  
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1265138627025369"
     crossorigin="anonymous"></script>





    
  </head>
  <body>
    <div class="all">
      <header>
  <nav class="navbar">
    <div class="avatar">
      
      <a class="site-link" href="https://eindex.me/cn/"><img
        class="avatar"
        src="https:&#x2F;&#x2F;eindex.me&#x2F;processed_images&#x2F;e75389feba7c019600.png"
        alt="Workflow"
    /></a>
  </div>
  <div class="menus">
    
    
      <a
        href="https://eindex.me/cn/gallery/"
        >相册</a
      >
    
    
    
      <a
        href="https://eindex.me/cn/archive/"
        >归档</a
      >
    
    
  </div>
    
    <div class="switcher">
      <a class="language switch"href = "https://eindex.me/"><iconify-icon icon="ri:english-input"></iconify-icon></a>
    </div>
  </nav>
</header>


      <div class="content">
          <main>
              
  <article class="h-entry" data-clarity-region="article">
    
<section class="header">
  <section class="title-area">
    
      
      
      
      <a class="series p-category" href="https:&#x2F;&#x2F;eindex.me&#x2F;cn&#x2F;series&#x2F;algorithm&#x2F;">Algorithm</a>
    
    <h1 class="title p-name">
    <a class="u-url" href="https:&#x2F;&#x2F;eindex.me&#x2F;cn&#x2F;posts&#x2F;beancount-introduce&#x2F;">复式记账工具 Beancount</a>
    </h1>
  </section>
  <section class="meta-area">
    <p class="p-summary" style="display: none;">&lt;p&gt;本文简单介绍一下复式记账和 Beancount 的使用方法。&lt;&#x2F;p&gt;
</p>
  
    <span><iconify-icon icon="ant-design:calendar-outlined"></iconify-icon>&nbsp;<time class="dt-published">2019-11-30</time>&nbsp;</span>
  
    <span><iconify-icon icon="bx:time-five"></iconify-icon>&nbsp;6 mins</span>  
    <span style="display:none"><iconify-icon icon="mdi:eye-outline"></iconify-icon>&nbsp;<span id="pv"></span>&nbsp;views</span>
  </section>
</section>

    <div class="p-author h-card" style="display: none;">
    <img class="u-logo u-photo" src="https://eindex.me/images/avatar.png">
    <a class="p-nickname p-name u-url" href="https://eindex.me">EINDEX</a>
    <p class="p-note">My goal is make happy.</p>
</div>
    
    <section class="main e-content">
        
  <p>本文简单介绍一下复式记账和 Beancount 的使用方法。</p>
<span id="continue-reading"></span><h2 id="wei-shi-yao-yao-ji-zhang">为什么要记账</h2>
<p>记账是理财的第一步，熟话说得好：”你不理财，才不理你。“</p>
<p>记账可以明确自己每一笔钱花在哪去了，这个月最大的开销是什么，以及对自己的冲动消费、不必要消费能有一个反思。</p>
<p>我曾使用过很多记账软件如：挖财、随手记、网易有钱、MoneyWiz、MOZE 等，其实记账最大的问题在于很难坚持下来，因为短期来看记账的收益并不高，而从长远来看，账本也能体现经济的健康状况。</p>
<h2 id="fu-shi-ji-zhang-shi-shi-yao">复式记账是什么</h2>
<p>复式记账（Double Entry Bookkeeping）是以资产与权益平衡关系作为记账基础，对每一笔账单，都要以相等的金额在两个相互联系的账户中进行记录。</p>
<p>原理：
<code>资产 = 负债 + 所有者权益</code></p>
<p>复式记账的优点是：</p>
<ul>
<li>账户对应关系清楚，可以鲜明的表示各种经济活动的来龙去脉。</li>
<li>有借必有贷，借贷必相等的记账方式，对于检查账单是否记对非常有帮助。</li>
</ul>
<h2 id="he-wei-beancount">何为 Beancount</h2>
<p>Beancount 是一个用 Python 实现的开源复式记账软件。</p>
<p>数据文件基于纯文本，所以不用担心程序出问题，数据没法看懂。</p>
<p>Beancount（fava）的界面大概是这个样子。
<img src="https://eindex.me/cn/posts/beancount-introduce/media/15676038764861/15676114899083.jpg" alt="-w2638" />
<img src="https://eindex.me/cn/posts/beancount-introduce/media/15676038764861/15676115071325.jpg" alt="-w1319" /></p>
<p>Beancount 的优点：</p>
<ol>
<li>开源，可以自己写功能。</li>
<li>数据基于纯文本，自己掌握所有数据，不担心隐私泄露。</li>
<li>支持各种图标，支持SQL查询生成报表。</li>
<li>支持预算（fava）。</li>
<li>支持无限账本、无限账户、无限币种。</li>
<li>可以导入各种账单文件（有些需要写代码支持）。</li>
<li>可以用 Git、iCloud 等工具来管理账本。</li>
</ol>
<p>不仅如此，Beancount 还可以量化年假，产假等等非标准金融标的。</p>
<p>例如讲公司年假记为一笔收入，从公司账户转入到个人账户，成为资产。使用掉年假，则把年假从个人资产转出到消费即可。这样就相当于把年假消费掉了。而年假的货币单位可以设置成 Day。</p>
<p>写在 Beancount 里大概是这个样子。</p>
<pre data-lang="beancount" style="background-color:#272822;color:#f8f8f2;" class="language-beancount "><code class="language-beancount" data-lang="beancount"><span>2019-04-24 * &quot;CompanyName&quot; &quot;请假一天休息&quot;
</span><span>  Assets:Leave                              -1.00 DAY
</span><span>  Expenses:Health
</span><span>
</span><span>2019-04-01 * &quot;CompanyName&quot; &quot;年假-初始化&quot;
</span><span>  Income:Job:CompanyName:Leave
</span><span>  Assets:Leave                                 +7.00 DAY
</span></code></pre>
<h2 id="ji-ben-yu-fa">基本语法</h2>
<h3 id="ji-ben-ge-shi">基本格式</h3>
<pre style="background-color:#272822;color:#f8f8f2;"><code><span>YYYY-MM-DD &lt;directive&gt; &lt;arguments...&gt;
</span></code></pre>
<h3 id="chuang-jian-huo-bi">创建货币</h3>
<pre style="background-color:#272822;color:#f8f8f2;"><code><span>option &quot;operating_currency&quot; &quot;CNY&quot;
</span></code></pre>
<h3 id="zhang-hu-xiang-guan">账户相关</h3>
<p>创建账户</p>
<pre style="background-color:#272822;color:#f8f8f2;"><code><span>1970-01-01 open Assets:Bank:ABC CNY
</span></code></pre>
<p>备注账户</p>
<pre style="background-color:#272822;color:#f8f8f2;"><code><span>1970-01-01 note Assets:Bank:ABC &quot;农行卡&quot;
</span></code></pre>
<p>关闭帐户，账户关闭后就可以在现实界面上过滤掉已经关闭的账户。</p>
<pre style="background-color:#272822;color:#f8f8f2;"><code><span>1970-01-02 close Assets:Bank:ABC
</span></code></pre>
<h3 id="jiao-yi">交易</h3>
<p>这是单笔简单交易的写法，表示我去美食风暴用微信支付吃了个盒饭。</p>
<pre style="background-color:#272822;color:#f8f8f2;"><code><span>2019-08-02 * &quot;美食风暴&quot; &quot;盒饭&quot;
</span><span>  Assets:Wechat:EINDEX                                  -18 CNY
</span><span>  Expenses:Food:Restaurant:Lunch       
</span></code></pre>
<h3 id="she-zhi-jie-ge">设置价格</h3>
<p>可以这是各种“货币”之间的价格转换。如果用上程序员思维，我们就可以实现股票价格跟踪、汇率跟踪等等。来提高账本的准确度。</p>
<pre style="background-color:#272822;color:#f8f8f2;"><code><span>2019-10-01 price USD 7 CNY
</span></code></pre>
<h3 id="yu-e-zi-dong-she-zhi">余额自动设置</h3>
<p>这是一个偷懒必备功能，下面的 <code>pad</code>，我农行卡自动平账使用<code>Equity:Opening-Balances</code>，明天的 <code>balance</code> 表示在 2019年10月02日时这张卡的余额为4000CNY，如果旧的账单不平就会从<code>Equity:Opening-Balances</code>自动平账。</p>
<pre style="background-color:#272822;color:#f8f8f2;"><code><span>2019-10-01 pad Assets:Bank:ABC Equity:Opening-Balances
</span><span>
</span><span>2019-10-02 balance Assets:Bank:ABC 4000 CNY
</span></code></pre>
<p>如果未来要在这个账户过去的账目上做删改，2019年10月1日的余额也会是4000元不变。</p>
<h2 id="shi-yong-beancount">使用 Beancount</h2>
<p>首先需要安装 Python 3，然后安装 beancount、fava。</p>
<pre style="background-color:#272822;color:#f8f8f2;"><code><span>pip install beancount fava
</span></code></pre>
<p><code>fava</code> 是 beancount 的一个 WebUI 实现，可以可视化的看见自己的账本。</p>
<h3 id="example">Example</h3>
<p>官方提供了一个 Beancount 的使用用例。</p>
<pre style="background-color:#272822;color:#f8f8f2;"><code><span>bean-example &gt; example.bean
</span><span>fava example.bean
</span></code></pre>
<p>然后打开 <code>localhost:5000</code> 就可以在本地体验 Beancount 与 fava 了。</p>
<p><img src="https://eindex.me/cn/posts/beancount-introduce/media/15676038764861/15676114399432.jpg" alt="-w1315" /></p>


        






    </section>
    <section class="post-footer">
        
<div class="tags">
    
        
        <span class="tag"><a href="https:&#x2F;&#x2F;eindex.me&#x2F;cn&#x2F;tags&#x2F;beancount&#x2F;">Beancount</a></span>
    
</div>

    </section>
    

  <section class="backlinks">
    <h3>反向链接</h3>
      
      <p><a href="https:&#x2F;&#x2F;eindex.me&#x2F;cn&#x2F;posts&#x2F;my-homelab-introduce&#x2F;">My HomeLab</a></p>
      
  </section>


    




<hr/>
<section class="webmentions">
  <h2>Response</h2>
  <p class="how-to-send-webmention">Have you written any responses to this article? If so, please send your article or tweet link below. (Making sure to include the link of this article in the content, learn more about webmentions from <a href="https://indieweb.org/Webmention">here</a>.)</p>
  <form class="webmention-form" action="https://webmention.io/eindex.me/webmention" method="post">
    <input name="target" type="hidden" value="https:&#x2F;&#x2F;eindex.me&#x2F;cn&#x2F;posts&#x2F;beancount-introduce&#x2F;" />
    <input name="source" type="text" placeholder="Your webmention link" />
    <button type="submit">Send Webmention</button>
  </form>
  <p class="how-to-send-webmention"><a class="twitter-share-button" href="https://twitter.com/intent/tweet">Tweet</a> and send response
  
  
    </p>
  
</section>
    
</article>

          </main>
          <aside>
              
<section class="search">
<input type="search" id="search-bar-input" placeholder="Searching..." />
</section>
<section>
    <h3 class="section-title">Series</h3>
    
    
    <p><a href="https:&#x2F;&#x2F;eindex.me&#x2F;series&#x2F;blog-enhance-plan&#x2F;">博客演进计划 (1)</a></p>
    
    <p><a href="https:&#x2F;&#x2F;eindex.me&#x2F;series&#x2F;security&#x2F;">应用安全 (1)</a></p>
    
</section>

<section class="tags">
<h3 class="section-title">Tags</h3>

<div class="tags">
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;webmentions&#x2F;">Webmentions (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;umami&#x2F;">umami (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;static-analysis&#x2F;">Static Analysis (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;semgrep&#x2F;">Semgrep (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;security&#x2F;">Security (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;sast&#x2F;">SAST (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;microformats2&#x2F;">Microformats2 (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;memos&#x2F;">memos (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;meilisearch&#x2F;">meilisearch (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;javascript&#x2F;">JavaScript (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;indie-web&#x2F;">Indie Web (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;github-actions&#x2F;">Github Actions (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;engagement&#x2F;">Engagement (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;devsecops&#x2F;">DevSecOps (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;devops&#x2F;">DevOps (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;connectivity&#x2F;">Connectivity (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;community&#x2F;">Community (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;code-review&#x2F;">Code Review (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;ci&#x2F;">CI (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;build-security-in&#x2F;">Build Security In (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;best-practices&#x2F;">Best Practices (1)</a>,
    
    <a href="https:&#x2F;&#x2F;eindex.me&#x2F;tags&#x2F;beginner-s-guide&#x2F;">Beginner&#x27;s Guide (1)</a>
    
<div>
</section>

<section class="advertisement">
    <h3 class="section-title">Advertisements</h3>
    <ins class="adsbygoogle"
        style="display:inline-block;width:192px;height:500px"
        data-ad-client="ca-pub-1265138627025369"
        data-ad-slot="3472732805"></ins>
</section>
          </aside>
      </div>
      <footer class="footer">
  <span class="webring">
<a href="https://xn--sr8hvo.ws/%F0%9F%95%90%F0%9F%89%91%F0%9F%88%B6/previous">←</a>
An IndieWeb Webring 🕸💍
<a href="https://xn--sr8hvo.ws/%F0%9F%95%90%F0%9F%89%91%F0%9F%88%B6/next">→</a>
</span>
  <link href="https://github.com/eindex" rel="me">
  <span>@2022 EINDEX</span>
</footer>

    </div>
  </body>
  
<script async defer data-website-id="692d9153-7341-4370-b652-60df196f2b31" data-host-url="https://u.eindex.me" data-domains="eindex.me" src="/js/umami.js"></script>
<script>window.twttr = (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0],
      t = window.twttr || {};
    if (d.getElementById(id)) return t;
    js = d.createElement(s);
    js.id = id;
    js.src = "https://platform.twitter.com/widgets.js?omit_script=true";
    fjs.parentNode.insertBefore(js, fjs);
  
    t._e = [];
    t.ready = function(f) {
      t._e.push(f);
    };
  
    return t;
  }(document, "script", "twitter-wjs"));</script>
<script src="https://cdn.jsdelivr.net/npm/docs-searchbar.js@2.4.1/dist/cdn/docs-searchbar.min.js"></script>
<script>
  docsSearchBar({
    hostUrl: "https://meili.eindex.me",
    apiKey: "a39cff5442b90bb926f6408b0b08671eee444599e6d9c44c29bd0adae09a4b86",
    indexUid: "blog",
    inputSelector: '#search-bar-input',
    debug: true, // Set debug to true if you want to inspect the dropdown
  })
</script>

<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>

</body>
  
    <script src="/js/pv-counter.js" async defer></script>

</html>