<?xml version="1.0" encoding="utf-8" standalone="yes"?>
{% set posts_section = get_section(path="posts/_index.cn.md") %}

<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
<channel>
  <title>{{ config.title }}</title>
  <link>{{ get_url(path="feed.xml", trailing_slash=false) }}</link>
  <description xml:lang="{{lang}}">{{ config.description }}</description>
  <atom:link href="{{ get_url(path="feed.xml", trailing_slash=false) }}" rel="self" type="application/rss+xml"/>

  {% for post in pages %}
  <item>
    {% if post.path is starting_with("/thoughts/") %}
    <title xml:lang="{{lang}}">Thoughts | {{ post.date | date(format="%a, %d %b %Y", timezone="Asia/Shanghai") }}</title>
    {% else %}
    <title xml:lang="{{lang}}">{{ post.title }}</title>
    {% endif %}
    <link>{{ post.permalink }}</link>
    <pubDate>{{ post.date | date(format="%a, %d %b %Y %H:00:00 %z", timezone="Asia/Shanghai") }}</pubDate>
    <guid>{{ post.permalink }}</guid>
    {% if post.path is starting_with("/thoughts/") %}
    <description xml:lang="{{lang}}">{{ post.content }}</description>
    {% else %}
      {% if not post.summary %}
      <description xml:lang="{{lang}}">{{ post.content }}</description>
      {% else %}
        <description xml:lang="{{lang}}">{{ post.summary }}{{ '<p><a href="' ~ post.permalink ~ '#continue-reading">Continue Reading</a></p>' | escape | safe }}</description>
      {% endif %}
    {% endif %}
  </item>
  {% endfor %}
</channel>
</rss>